const t={id:"",classname:"",theme:"light",parent:"",toggle:!0,popover:!0,position:"bottom-start",margin:4,preset:!0,color:"#000",default:"#000",target:"",disabled:!1,format:"rgb",singleInput:!1,inputs:!0,opacity:!0,preview:!0,copy:!0,swatches:[],toggleSwatches:!1,closeOnScroll:!1,i18n:{palette:"Color picker",buttons:{copy:"Copy color to clipboard",changeFormat:"Change color format",swatch:"Color swatch",toggleSwatches:"Toggle Swatches"},sliders:{hue:"Change hue",alpha:"Change opacity"}}},e='<svg width="18" height="18" viewBox="0 0 24 24" aria-role="none"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg>',o=parseInt,{min:n,max:s,abs:r,round:i,PI:l}=Math,a=(t,e=100,o=0)=>t>e?e:t<o?o:t,c=t=>i((t%=360)<0?t+360:t),h=document,p=h.documentElement,u="button",g="open",d="close",_="color",f="click",w="pointerdown",b="scroll",y="keydown",m="input",$="change",v="blur",S="rgb",x="hsl",C=["hex",S,x],k="aria-label",A={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowRight:[1,0],ArrowLeft:[-1,0]},H={deg:1,turn:360,rad:180/l,grad:.9},L=/^hsla?\(\s*([+-]?\d*\.?\d+)(\w*)?\s*[\s,]\s*([+-]?\d*\.?\d+)%?\s*,?\s*([+-]?\d*\.?\d+)%?(?:\s*[\/,]\s*([+-]?\d*\.?\d+)(%)?)?\s*\)?$/,M=(t,e=S)=>{let o=t.a,n="",s=e;return o<1&&(n+=", "+o,s+="a"),e===S?s+`(${t.r}, ${t.g}, ${t.b+n})`:s+`(${t.h}, ${t.s}%, ${t.l}%${n})`},O="alwan",V=`${O}__container`,z=`${O}__palette`,B=`${O}__marker`,E=`${O}__preview`,I=`${O}__button`,F=`${O}__copy-button`,R=`${O}__slider`,T=`${O}__hue`,j=`${O}__alpha`,D=`${O}__input`,P=`${O}__inputs`,U=`${O}__swatch`,Z=`${O}__swatches`,K=`${O}__reference`,N=`${O}__backdrop`,q=`${O}__toggle-button`,G=`${O}--open`,J=`${O}--collapse`,Q=(t,e,o,n)=>t.addEventListener(e,o,n),W=(t,e,o)=>t.removeEventListener(e,o),X=t=>"string"==typeof t,Y=t=>null!=t,tt=t=>t instanceof Element,et=t=>Number.isFinite(X(t)&&""!==t.trim()?+t:t),{keys:ot,assign:nt,setPrototypeOf:st,prototype:rt}=Object,{from:it,isArray:lt}=Array,at=t=>Y(t)&&"object"==typeof t&&!lt(t)&&!tt(t),ct=(t,e)=>ot(t).forEach((o=>e(o,t[o]))),ht=(t,e)=>(at(t)||(t={}),ct(e,((e,o)=>{Y(o)&&nt(t,{[e]:at(o)?ht(t[e]||{},o):o})})),t),pt=()=>h.body,ut=(t,e=p)=>X(t)&&t.trim()?it(e.querySelectorAll(t)):tt(t)?[t]:[],gt=t=>ut(`${m},${u},[tabindex]`,t),dt=(t,...e)=>t.append(...e.filter((t=>t))),_t=(t,e)=>{t.innerHTML=e},ft=(t,e,o)=>{t&&(et(o)||o)&&t.setAttribute(e,o+"")},wt=(...t)=>t.join(" ").trim(),bt=(t,e,o=[],n,s)=>{const r=h.createElement(t);return e&&(r.className=e),n&&_t(r,n),ct(s||{},((t,e)=>ft(r,t,e))),dt(r,...o),r},yt=(t,...e)=>bt("div",t,e),mt=t=>t.remove(),$t=(t,e)=>(t.replaceWith(e),e),vt=(t="",e="",o,n=t)=>bt(u,wt(I,e),[],o,{type:u,[k]:t,title:n}),St=(t,e,o=1)=>bt(m,wt(R,t),[],"",{max:e,step:o,type:"range"}),xt=(t,e,o)=>(t&&t.style.setProperty("--"+e,o+""),t),Ct=(t,e,o)=>t.classList.toggle(e,o),kt=(t,e,o)=>{t.style.transform=`translate(${e}px,${o}px)`},At=t=>t&&t.parentElement||pt(),Ht=(t,e)=>{let o,n,s,r,i,l;return tt(t)?(({x:o,y:n,width:s,height:r,right:i,bottom:l}=t.getBoundingClientRect()),e&&(o+=t.clientTop,n+=t.clientLeft)):(o=n=0,s=i=p.clientWidth,r=l=p.clientHeight),[o,n,s,r,i,l]},Lt=t=>t&&t!==pt()?t instanceof ShadowRoot?t:Lt(t.parentNode):null,Mt=bt("canvas").getContext("2d"),Ot=(t,e)=>{let n,s,r="";X(t)?r=t.trim():at(t)&&(n=[S,x].find((e=>e.split("").every((e=>et(t[e]))))),n&&(r=M(t,n)));const[l,h,p,u,g,d="1",_]=L.exec(r)||[];if(l)s={h:c(+h*(H[p]?H[p]:1)),s:a(+u),l:a(+g),a:a(+d/(_?100:1),1)},n=x;else if(n=S,/^[\da-f]+$/i.test(r)&&(r="#"+r),Mt.fillStyle="#000",Mt.fillStyle=r,r=Mt.fillStyle,"#"===r[0])s={r:o(r.slice(1,3),16),g:o(r.slice(3,5),16),b:o(r.slice(5,7),16),a:1};else{const[t,e,o,n]=/\((.+)\)/.exec(r)[1].split(",").map((t=>+t));s={r:t,g:e,b:o,a:n}}return s.a=i(100*s.a)/100,e?M(s,n):[s,n]},Vt=t=>{let e,o,n,s=!1;return{t:({swatches:r,toggleSwatches:i,i18n:{buttons:l}})=>lt(r)?(e=o=n=null,r.length?(o=e=yt(wt(Z,i&&s?J:""),...r.map((t=>xt(vt(l.swatch,U,"",X(t)?t:Ot(t,!0)),_,Ot(t,!0))))),i&&(n=vt(l.toggleSwatches,q,'<svg width="20" height="20" viewBox="0 0 24 24" aria-role="none"><path d="M6.984 14.016l5.016-5.016 5.016 5.016h-10.031z"></path></svg>'),Q(n,f,(()=>{s=!s,Ct(o,J,s),t.i.o()})),e=yt("",o,n)),Q(o,f,(({target:e})=>{e!==o&&t.u.p(e.style.getPropertyValue("--"+_),!0,!0)})),e):e):e}},zt=t=>{let o,n,s=!1;const r=t=>{s=t,_t(n,t?'<svg width="18" height="18" viewBox="0 0 24 24" aria-role="none"><path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"></path></svg>':e)},i=t=>{const e=bt(m);dt(p,e),e.value=t,e.select(),h.execCommand("copy"),mt(e),n.focus(),r(!0)},l=()=>{if(!s){const e=navigator.clipboard,o=t.u._();e?e.writeText(o).then((()=>r(!0))).catch((()=>i(o))):i(o)}};return{t:({preview:t,copy:i,i18n:a})=>(o=n=null,i&&(n=vt(a.buttons.copy,F,e),Q(n,f,l),Q(n,v,(()=>s&&r(!1))),Q(n,"mouseout",(()=>n.blur()))),t&&(o=yt(E,n)),o||n)}},Bt={top:[1,5,4,0],bottom:[5,1,4,0],right:[4,0,1,5],left:[0,4,1,5]},Et={start:[0,1,2],center:[1,0,2],end:[2,1,0]},It=(t,e=[h])=>{if((t=At(t))===pt())return e;const{display:o,overflow:n}=getComputedStyle(t);return/auto|scroll|overflow|clip|hidden/.test(n)&&!["inline","contents"].includes(o)&&e.push(t),It(t,e)},Ft=t=>(t=>{const e=!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none"),{transform:o,perspective:n,filter:s,containerType:r,backdropFilter:i,willChange:l="",contain:a=""}=getComputedStyle(t);return"none"!==o||"none"!==n||"normal"!==r||!e&&"none"!==i||!e&&"none"!==s||/transform|perspective|filter/.test(l)||/paint|layout|strict|content/.test(a)})(t=At(t))?t:t===p||Tt(t)?h:Ft(t),Rt=[":popover-open",":modal"],Tt=t=>Rt.some((e=>{try{return t.matches(e)}catch(t){return!1}})),jt=(t,e,o,{margin:n,position:s,toggle:l,closeOnScroll:a},{m:c,$:p})=>{n=et(n)?+n:0;const[u,g]=X(s)?s.split("-"):[],d=Bt[u]||Bt.bottom,_=Et[g]||Et.center,f=It(t),m=e.style,$=Lt(o),v=()=>{m.height="";const o=Ht(h),s=Ht(t),l=Ht(e),a=Ht(Ft(e),!0),c=[null,null];d.some((t=>{let e=t%2;const i=o[t],a=s[t],h=n+l[e+2];if(h>r(i-a))return!1;c[e]=a+(t<=1?-h:n),e=(e+1)%2;const p=e+4,u=e+2,g=l[u],d=s[e],f=s[p],w=o[p]-d,b=(g+s[u])/2;return _.some((t=>0==t&&g<=w?(c[e]=d,!0):1==t&&b<=f&&b<=w?(c[e]=f-b,!0):2==t&&g<=f&&(c[e]=f-g,!0))),!0})),kt(e,...c.map(((t,e)=>(e&&null===t&&l[3]>o[5]&&(m.height=o[5]-6+"px",l[3]=o[5]-3),i((Y(t)?t:(o[e+4]-l[e+2])/2)-a[e])))))},S=({type:e})=>{!c()&&l||(((t,e)=>e.every((e=>{const[o,n,,,s,r]=Ht(t),[i,l,,,a,c]=Ht(e);return n<c&&r>l&&o<a&&s>i})))(t,f)?c()?(v(),a&&e===b&&p(!1)):p(!0,!0):p(!1,!0))},x=t=>{if(c()){const{target:n,key:s,shiftKey:r}=t;if("Escape"===s)p(!1);else if("Tab"===s){const s=gt(e),i=s[0],l=n===o&&!r,a=r&&n===i||!r&&n===s.pop(),c=l?i:a?o:null;c&&(t.preventDefault(),c.focus())}}},C=({target:t})=>{!c()||$&&t===$.host||t===o||e.contains(t)||it(o.labels||[]).some((e=>e.contains(t)))||p(!1)},k=t=>{f.forEach((e=>t(e,b,S))),t(window,"resize",S),t(h,y,x),t(h,w,C),$&&t($,w,C)};return k(Q),v(),{o:v,v(){k(W),m.transform=""}}},Dt=(t,e)=>{const{config:o,u:r}=t,i=yt(O),l=((t,e)=>{let o;const n=pt(),s=e&&e!==n&&e!==p?e:null,r=()=>t.i.$();return s?o=s:(o=vt(),dt(n,o)),{t:({preset:t,classname:e})=>(s&&t!=(s!==o)&&(t?(o=$t(s,vt()),s.id&&(o.id=s.id)):o=$t(o,s)),Q(o,f,r),s&&!t||(o.className=wt(I,K,X(e)?e:"")),o),v(){s?(W(s,f,r),s!==o&&$t(o,s)):mt(o)}}})(t,ut(e)[0]),c=(({u:t})=>{let e,o,s,r;const i=yt(B),l=yt(z,i),c={s:0,l:0},u=(r,[l,h]=[0,0])=>{let p,u,[g,d,_,f]=s;r?(e=r.clientX-g,o=r.clientY-d):(e+=l*_/100,o+=h*f/100),e=a(e,_),o=a(o,f),kt(i,e,o),p=1-o/f,u=p*(1-e/(2*_)),c.s=1===u||0===u?0:(p-u)/n(u,1-u)*100,c.l=100*u,t.S(c)},g=t=>{t.buttons?u(t):f(!1)},d=()=>{t.C(),f(!1)},_=()=>t.C(),f=t=>{Ct(p,N,t),(t?Q:W)(h,"pointermove",g),(t?Q:W)(window,v,_)};return Q(l,w,(e=>{r||(t.k(),s=Ht(l),u(e),f(!0),Q(h,"pointerup",d,{once:!0}))})),Q(l,y,(e=>{const o=A[e.key];o&&(e.preventDefault(),s=Ht(l),t.k(),u(null,o),t.C())})),{t:({i18n:t,disabled:e})=>(ft(l,k,t.palette),ft(l,"tabindex",e?"":0),r=e,l),A(t,r){t=(r/=100)+t/100*n(r,1-r),s=Ht(l),e=(t?2*(1-r/t):0)*s[2],o=(1-t)*s[3],kt(i,e,o)}}})(t),u=(({u:t,H:e})=>{let o,n;const s=St(T,360);return Q(s,m,(()=>t.S({h:+s.value}))),{t:({opacity:r,i18n:{sliders:i}})=>(o=null,r?(o=St(j,1,.01),Q(o,m,(()=>t.S({a:+o.value})))):t.L.a=1,ft(s,k,i.hue),ft(o,k,i.alpha),n=yt("",s,o),Q(n,$,(()=>e.M($))),n),O(t,e){s.value=t+"",o&&(o.value=e+"")}}})(t),_=(t=>{let e,o,n,r,i,l,{config:a,u:c}=t,h=[],p=!1;const u=()=>{let t={},e=h[r];p||(c.k(),p=!0),ct(i,((e,o)=>t[e]=o.value)),c.p(l?t[e]:M(t,e),!0)},g=()=>{if(o){i={},_t(o,""),l="hex"===h[r]||a.singleInput;const t=h[r],e=l?[t]:(t+(a.opacity?"a":"")).split(""),n=c.L;dt(o,...e.map((t=>(i[t]=bt(m,D,[],"",{type:"text",value:n[t]}),bt("label","",[i[t],bt("span","",[],t)])))))}},d=()=>{r=(r+1)%h.length,c.V(h[r]),g()};return{t({inputs:i,format:l,i18n:a}){e=o=n=null,h=C,!0!==i&&(i=i||{},h=h.filter((t=>i[t])));const _=h.length;return _||(h=C),r=s(h.indexOf(l),0),c.V(h[r]),_&&(_>1&&(n=vt(a.buttons.changeFormat,"",'<svg width="15" height="15" viewBox="0 0 20 20" aria-role="none"><path d="M10 1L5 8h10l-5-7zm0 18l5-7H5l5 7z"></path></svg>'),Q(n,f,d)),o=yt(P),e=yt(V,o,n),Q(o,m,u),Q(o,$,(()=>{c.C(),p=!1})),Q(o,"focusin",(t=>t.target.select())),Q(o,y,(e=>"Enter"===e.key&&t.i.$(!1))),g()),e},O(t){p||ct(i||{},((e,o)=>o.value=t[e]+""))}}})(t),b=[c,{t:e=>yt(V,...[zt(t),u].map((t=>t.t(e))))},_,Vt(t)];let S=!1,x=null;return r.B(i,c,u,_),{I(t){t=t||{};const e=this,{id:n,color:s}=t,{theme:a,parent:c,toggle:h,popover:p,target:u,disabled:g}=ht(o,t),d=l.t(o),_=ut(c)[0],f=ut(u)[0];r.F(d),mt(i),_t(i,""),dt(i,...b.map((t=>t.t(o)))),X(n)&&(i.id=n),nt(i.dataset,{theme:a,display:p?"popover":"block"}),d.style.display=p||h?"":"none",x&&(x.v(),x=null),p?(dt(_||pt(),i),x=jt(f||d,i,d,o,e)):f||_?dt(f||_,i):d.after(i),h||e.$(!0,!0),[d,...gt(i)].forEach((t=>t.disabled=!!g)),g&&(p?e.$(!1,!0):h||e.$(!0,!0)),Y(s)&&r.p(s),r.S({},!1,!0,!0)},$(e=!S,n=!1){e===S||o.disabled&&(!n||e&&o.popover)||!o.toggle&&!n||(e&&x&&x.o(),S=e,Ct(i,G,e),t.H.M(S?g:d))},m:()=>S,o(){x&&x.o()},v(){mt(i),x&&x.v(),l.v()}}},Pt=t=>(t<16?"0":"")+t.toString(16),Ut=(t,e,o)=>(t%=12,i(255*(o-e*n(o,1-o)*s(-1,n(t-3,9-t,1))))),Zt=t=>{const e={h:0,s:0,l:0,r:0,g:0,b:0,a:1,rgb:"",hsl:"",hex:""},o=t.config,l=t.H.M;let a,h,p,u,g,d,f;return{L:e,_:()=>e[d],V(t){d=o.format=t},F(t){a=t},B(t,e,o,n){h=t,p=e,u=o,g=n},S(t,o=!0,n,s){const r=e.hex;nt(e,t),!n&&nt(e,(({h:t,s:e,l:o})=>({r:Ut(t/=30,e/=100,o/=100),g:Ut(t+8,e,o),b:Ut(t+4,e,o)}))(e)),e.s=i(e.s),e.l=i(e.l),e.rgb=M(e),e.hsl=M(e,x),e.hex=(({r:t,g:e,b:o,a:n})=>"#"+Pt(t)+Pt(e)+Pt(o)+(n<1?Pt(i(255*n)):""))(e),xt(a,_,e.rgb),xt(h,S,`${e.r},${e.g},${e.b}`),xt(h,"a",e.a),xt(h,"h",e.h),g.O(e),s&&(u.O(e.h,e.a),p.A(e.s,e.l)),o&&r!==e.hex&&l(_,e)},p(t,i=!1,a){const[h,p]=Ot(t),u=p===S;o.opacity||(h.a=1),e[p]!==M(h,p)&&(nt(e,h,u?(({r:t,g:e,b:o,a:i})=>{const l=s(t/=255,e/=255,o/=255),a=n(t,e,o),h=l-a,p=(l+a)/2;return{h:c(60*(0===h?0:l===t?(e-o)/h%6:l===e?(o-t)/h+2:l===o?(t-e)/h+4:0)),s:h?h/(1-r(2*p-1))*100:0,l:100*p,a:i}})(h):{}),this.S({},i,u,!0),a&&l($,e))},k(){f=e[d]},C(){f!==e[d]&&l($,e)}}};class Kt{static version(){return"2.1.1"}static setDefaults(e){ht(t,e)}constructor(e,o){this.config=ht({},t),this.H=(t=>{const e={[g]:[],[d]:[],[$]:[],[_]:[]};return{M(o,n=t.u.L){(e[o]||[]).forEach((e=>e(nt({type:o,source:t},n))))},R(t,o){e[t]&&!e[t].includes(o)&&"function"==typeof o&&e[t].push(o)},T(t,o){Y(t)?e[t]&&(Y(o)?e[t]=e[t].filter((t=>t!==o)):e[t]=[]):ct(e,(t=>{e[t]=[]}))}}})(this),this.u=Zt(this),this.i=Dt(this,e),this.i.I(o)}setOptions(t){this.i.I(t)}setColor(t){return this.u.p(t),this}getColor(){return{...this.u.L}}isOpen(){return this.i.m()}open(){this.i.$(!0)}close(){this.i.$(!1)}toggle(){this.i.$()}on(t,e){this.H.R(t,e)}off(t,e){this.H.T(t,e)}addSwatches(...t){this.i.I({swatches:this.config.swatches.concat(t)})}removeSwatches(...t){this.i.I({swatches:this.config.swatches.filter(((e,o)=>!t.some((t=>et(t)?+t===o:t===e))))})}enable(){this.i.I({disabled:!1})}disable(){this.i.I({disabled:!0})}reset(){this.u.p(this.config.default)}reposition(){this.i.o()}trigger(t){this.H.M(t)}destroy(){this.i.v(),ct(this,(t=>delete this[t])),st(this,rt)}}export{Kt as default};
