const Ne={id:"",classname:"",theme:"light",parent:"",toggle:!0,popover:!0,position:"bottom-start",margin:4,preset:!0,color:"#000",default:"#000",target:"",disabled:!1,format:"rgb",singleInput:!1,inputs:!0,opacity:!0,preview:!0,copy:!0,swatches:[],toggleSwatches:!1,closeOnScroll:!1,i18n:{picker:"Color picker",buttons:{copy:"Copy color to clipboard",changeFormat:"Change color format",swatch:"Color swatch",toggleSwatches:"Toggle Swatches"},sliders:{hue:"Change hue",alpha:"Change opacity"}}},C=document,we=C.documentElement,be="button",fe="open",Fe="close",Pe="color",E="click",ze="pointerdown",De="pointermove",Re="pointerup",je="scroll",ve="keydown",R="input",I="change",X="rgb",ye="hsl",We={capture:!0},Ze=["hex",X,ye],V=e=>typeof e=="string",Y=e=>e instanceof Element,ee=e=>Number.isFinite(V(e)&&e.trim()!==""?+e:e),qe=e=>[ye,X].find(t=>[...t].every(n=>ee(e[n]))),{keys:gt,assign:te,setPrototypeOf:dt,prototype:ut}=Object,{isArray:ne}=Array,Ke=e=>e!=null&&typeof e=="object"&&!ne(e)&&!Y(e),N=(e,t)=>gt(e).forEach(n=>t(n,e[n])),se=(e,t)=>(N(t,(n,o)=>{te(e,{[n]:Ke(o)?se(e[n]||{},o):o})}),e),Ue=()=>C.body,ae=(e,t=we)=>V(e)&&e.trim()?[...t.querySelectorAll(e)]:Y(e)?[e]:[],Ge=e=>ae(`${R},${be},[tabindex]`,e),M=(e,t,n,o={},a)=>{const s=C.createElement(e);return t&&(s.className=t.trim()),n&&(V(n)?s.innerHTML=n:s.append(...(ne(n)?n:[n]).filter(l=>!!l))),N(a?{...o,"aria-label":a}:o,(l,c)=>{(ee(c)||c)&&s.setAttribute(l,c+"")}),s},L=(e,t,n)=>M("div",t,e,{},n),oe=(e,t)=>(e&&e!==t&&e.replaceWith(t),t),j=(e="",t="",n,o=e)=>M(be,"alwan__button "+t,n,{type:be,title:o},e),Je=(e,t,n,o=1)=>M(R,"alwan__slider alwan__"+t,"",{type:"range",max:n,step:o},e),Qe=(e,t)=>e.style.setProperty("--color",t),re=(e,t,n)=>e.classList.toggle("alwan--"+t,n),_e=(e,t,n)=>{e.style.transform=`translate(${t}px,${n}px)`},F=(e,t)=>{let{x:n,y:o,width:a,height:s}=e.getBoundingClientRect();return t&&(n+=e.clientLeft-e.scrollLeft,o+=e.clientTop-e.scrollTop),[n,o,a,s,a+n,s+o]},Xe=e=>L(e,"alwan__container"),xe=(e,t)=>e.style.display=t?"none":"",mt=[":popover-open",":modal"],Ye=(e,t)=>!(e=e&&e.parentNode)||e===C||(n=>Y(n)&&mt.some(o=>{try{return n.matches(o)}catch{return!1}}))(e)?[0,0]:(e===t&&(e=t.host),Y(e)&&(({transform:n,perspective:o,filter:a,containerType:s,backdropFilter:l,willChange:c,contain:i})=>n!=="none"||o!=="none"||s!=="normal"||l!=="none"||a!=="none"||c&&/\b(transform|perspective|filter)\b/.test(c)||i&&/\b(paint|layout|strict|content)\b/.test(i))(getComputedStyle(e))?F(e,!0):Ye(e,t)),f=(e,t,n,o)=>e.addEventListener(t,n,o),le=(e,t,n)=>e.removeEventListener(t,n),W=(e,t=X)=>t+(t===X?`(${e.r}, ${e.g}, ${e.b}`:`(${e.h}, ${e.s}%, ${e.l}%`)+(e.a<1?`, ${e.a})`:")"),{min:Z,max:$e,abs:wt,round:O,PI:bt}=Math,q=(e,t=100,n=0)=>e>t?t:e<n?n:e,et=e=>O((e%=360)<0?e+360:e),Le=e=>parseInt(e,16),ft=e=>{let t,n,{config:o,s:a}=e,s=!1;const l=()=>{const i={};s||(a.t(),s=!0),N(t,(p,u)=>i[p]=u.value),a.o(i[n]||W(i,n),!0)},c=()=>{t={};const i=n==="hex"||o.singleInput?[n]:[...n+(o.opacity?"a":"")];return L(i.map(p=>M("label","",[t[p]=M(R,"alwan__input",[],{type:"text",value:a.i[p]}),M("span","",p)])),"alwan__inputs")};return{p({inputs:i,format:p,i18n:u}){let y,h,g,w,r=Ze;return i!==!0&&(i=i||{},r=r.filter(m=>i[m])),w=r.length,r=w?r:Ze,n=r[$e(r.indexOf(p),0)],a.u(n),w?(w>1&&(g=j(u.buttons.changeFormat,"",'<svg width="15" height="15" viewBox="0 0 20 20" aria-role="none"><path d="M10 1L5 8h10l-5-7zm0 18l5-7H5l5 7z"></path></svg>'),f(g,E,()=>{n=r[(r.indexOf(n)+1)%w],a.u(n),y=oe(y,c())})),y=c(),h=L(y),f(h,R,l),f(h,I,()=>{a._(),s=!1}),f(h,"focusin",m=>m.target.select()),f(h,ve,m=>m.key==="Enter"&&e.c.v(!1)),Xe([h,g])):null},m(i){s||N(t||{},(p,u)=>u.value=i[p]+"")}}},vt={ArrowLeft:-1,ArrowRight:1},yt={ArrowUp:-1,ArrowDown:1},_t=({s:e})=>{let t,n,o,a,s;const l={s:0,l:0},c=(h,g)=>{let w,r,[,,m,x]=s;o=h=q(h,m),a=g=q(g,x),_e(n,h,g),w=1-g/x,r=w*(1-h/(2*m)),l.s=r===1||r===0?0:(w-r)/Z(r,1-r)*100,l.l=100*r,e.$(l)},i=({x:h,y:g,buttons:w})=>{w?c(h-s[0],g-s[1]):p()},p=()=>{e._(),le(C,De,i),le(C,Re,p)},u=h=>{t.setPointerCapture(h.pointerId),e.t(),s=F(t),c(h.x-s[0],h.y-s[1]),f(C,De,i),f(C,Re,p)},y=h=>{const g=h.key,w=vt[g]||0,r=yt[g]||0;(w||r)&&(h.preventDefault(),s=F(t),e.t(),c(o+w*s[2]/100,a+r*s[3]/100),e._())};return{p:({i18n:h,disabled:g})=>(n=L("","alwan__cursor"),t=L(n,"alwan__selector",h.picker||h.palette),g||(t.tabIndex=0,f(t,ze,u),f(t,ve,y)),t),k(h,g){h=(g/=100)+h/100*Z(g,1-g),s=F(t),o=(h?2*(1-g/h):0)*s[2],a=(1-h)*s[3],_e(n,o,a)}}},xt=({s:e,e:t})=>{let n,o,a;return{p:({opacity:s,i18n:{sliders:l}})=>(n=Je(l.hue,"hue",360),o=s?Je(l.alpha,"alpha",1,.01):null,a=L([n,o]),f(a,I,()=>t.A(I)),f(a,R,({target:c})=>e.$({[c===n?"h":"a"]:c.value})),a),m(s,l){n.value=s+"",o&&(o.value=l+"")}}},$t=e=>{let t=!1;return{p({swatches:n,toggleSwatches:o,i18n:{buttons:a}}){let s,l,c;return ne(n)&&n.length?(s=L(n.map(i=>{const p=V(i)?i:W(i,qe(i)),u=j(a.swatch,"alwan__swatch","",p);return Qe(u,p),f(u,E,()=>e.s.o(p,!0,!0)),u}),"alwan__swatches"),o?(c=(i=!t)=>{t=i,re(s,"collapse",t),e.c.C()},l=j(a.toggleSwatches,"alwan__toggle-button",'<svg width="20" height="20" viewBox="0 0 24 24" aria-role="none"><path d="M6.984 14.016l5.016-5.016 5.016 5.016h-10.031z"></path></svg>'),f(l,E,()=>c()),c(t),L([s,l])):s):s}}},Lt=e=>({p({preview:t,copy:n,i18n:o}){let a,s,l,c,i;return n&&(a=j(o.buttons.copy,"alwan__cp",'<svg width="18" height="18" viewBox="0 0 24 24" aria-role="none"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg width="18" height="18" viewBox="0 0 24 24" aria-role="none"><path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"></path></svg>'),[l,c]=a.children,s=p=>{xe(l,p),xe(c,!p)},s(!1),i=navigator.clipboard,i&&(f(a,E,()=>i.writeText(e.s.S()).then(()=>s(!0))),f(a,"blur",()=>s()),f(a,"mouseleave",()=>a.blur()))),t?L(a,"alwan__preview"):a}}),tt=(e,t)=>e.map(n=>ne(n)?Xe(tt(n,t)):n.p(t)),nt={top:[1,5,4,0],bottom:[5,1,4,0],right:[4,0,1,5],left:[0,4,1,5]},st={start:[0,1,2],center:[1,0,2],end:[2,1,0]},Ct=(e,t)=>{let n,o=L(),a=!1,s=null;const{config:l,s:c}=e,i=((r,m)=>{const x=j(),P=x.className+" alwan__ref ";let $;return r&&r.id&&(x.id=r.id),{H:K=>($=oe($||r,K.preset||!r?x:r),$===x&&($.className=(P+K.classname).trim(),$.parentNode||Ue().append($)),f($,E,m),$),O(){r?(le(r,E,m),oe($,r)):$.remove()}}})(t,()=>e.toggle()),p=L(o,"alwan"),[u,y,h,g,w]=(r=>[_t,Lt,xt,ft,$t].map(m=>m(r)))(e);return c.V(r=>{Qe(n,r.rgb),o.style.cssText=`--rgb:${r.r},${r.g},${r.b};--a:${r.a};--h:${r.h}`,g.m(r)},({a:r,h:m,s:x,l:P})=>{h.m(m,r),u.k(x,P)}),{L(r){const m=this,{id:x,color:P=c.i.hsl}=r,{theme:$,parent:K,toggle:ce,popover:he,target:at,disabled:Se}=se(l,r);n=i.H(l);let U=ae(K)[0],ke=ae(at)[0]||n;x&&(p.id=x),re(p,"dark",$==="dark"),re(p,"block",!he),o=oe(o,L(tt([u,[y,h],g,w],l))),xe(n,!he&&!ce),s&&(s.M(),s=null),he?(U=U||ce&&Ue(),s=((A,S,pe,{margin:T,position:He,closeOnScroll:ot,toggle:ge,disabled:rt},{v:G,B:lt})=>{let z;T=ee(T)?+T:0;let J=lt(),Me=A.getRootNode();const[it,ct]=V(He)?He.split("-"):[],de=S.style,D=Me instanceof ShadowRoot?Me:null,Oe=Ge(S),ue=Oe[0],Te=Oe.pop(),me=()=>{const d=[we.clientWidth,we.clientHeight],v=F(A),_=F(S),Q=Ye(S,D),B=[-1,-1];de.height="",!J||!z||v[4]<0||v[5]<0||v[0]>d[0]||v[1]>d[1]||((nt[it]||nt.bottom).some(k=>{let b=k%2,H=v[k]+(k<=1?-_[b+2]-T:T);return!(H<0||H+_[b+2]+T>d[b])&&(B[b]=H,b=+!b,(st[ct]||st.center).some(Ve=>(H=Ve===0?v[b]:v[b+4]-(Ve===2?_[b+2]:(_[b+2]+v[b+2])/2),!(H<0||H+_[b+2]>d[b]||(B[b]=H,0)))))}),_e(S,...B.map((k,b)=>(b&&k===-1&&_[3]>d[b]&&(de.height=d[b]-6+"px",_[3]=d[b]-3),O((k>=0?k:(d[b]-_[b+2])/2)-Q[b])))))};ge&&f(S,ve,d=>{let v,{key:_,target:Q,shiftKey:B}=d;_==="Escape"?G(!1):_==="Tab"&&(Q===ue&&B?v=Te:Q!==Te||B||(v=ue),v&&(v.focus(),d.preventDefault()))});const ht=[S,pe,...pe.labels||[]],pt=d=>{const v=d.composedPath();J&&!ht.some(_=>v.includes(_))&&G(!1)},Be=new IntersectionObserver(([d])=>{z=d.isIntersecting,G(!rt&&z&&(!ge||J),!0)}),Ee=({target:d})=>{(D&&d.contains(D.host)||d.contains(A))&&(me(),ot&&G(!1))},Ie=d=>{d(window,"resize",me),d(C,je,Ee,We),d(C,ze,pt),D&&d(D,je,Ee,We)};return Be.observe(A),Ie(f),{I:()=>z,C(d,v){J=d,z&&(me(),ge&&v!==d&&(d?ue:pe).focus())},M(){de.cssText="",Be.unobserve(A),Ie(le)}}})(ke,p,n,l,m)):m.v(!ce||!Se&&a,!0),U?U.append(p):ke.after(p),Se&&[n,...Ge(p)].forEach(A=>{A.disabled=!0}),c.o(P)},v(r=!a,m=!1){(r!==a&&(!s||s.I())&&!l.disabled&&l.toggle||m)&&(re(p,fe,r),s&&s.C(r,a),a=r,e.e.A(a?fe:Fe))},B:()=>a,C(){s&&s.C(a,a)},M(){p.remove(),s&&s.M(),i.O()}}},ie=e=>(e<16?"0":"")+e.toString(16),Ce=(e,t,n)=>(e%=12,O(255*(n-t*Z(n,1-n)*$e(-1,Z(e-3,9-e,1))))),Ae=M("canvas").getContext("2d"),At={turn:360,rad:180/bt,grad:.9},St=/a?\(\s*([+-]?\d*\.?\d+)(\w*)?\s*[\s,]\s*([+-]?\d*\.?\d+)%?\s*,?\s*([+-]?\d*\.?\d+)%?(?:\s*[\/,]\s*([+-]?\d*\.?\d+)(%)?)?\s*\)?$/,kt=(e,t)=>{let n,o,a,s="";if(V(e)?s=e.trim():Ke(e)&&(a=qe(e),a&&(s=W(e,a))),/^hsl/.test(s)){const[l,c,i,p,u,y="1",h]=St.exec(s)||[];l&&(o={h:et(+c*(At[i]||1)),s:q(+p),l:q(+u),a:q(+y/(h?100:1),1)})}if(!o){if(/^[\da-f]+$/i.test(s)&&(s="#"+s),Ae.fillStyle="#000",Ae.fillStyle=s,s=Ae.fillStyle,s[0]==="#")n={r:Le(s[1]+s[2]),g:Le(s[3]+s[4]),b:Le(s[5]+s[6]),a:1};else{const[l,c,i,p]=s.match(/[\d\.]+/g).map(Number);n={r:l,g:c,b:i,a:p}}o=(({r:l,g:c,b:i,a:p})=>{const u=$e(l/=255,c/=255,i/=255),y=Z(l,c,i),h=u-y,g=(u+y)/2;return{h:et(60*(h===0?0:u===l?(c-i)/h%6:u===c?(i-l)/h+2:u===i?(l-c)/h+4:0)),s:h?h/(1-wt(2*g-1))*100:0,l:100*g,a:p}})(n)}return o.a=t?O(100*o.a)/100:1,n&&(n.a=o.a),[o,n]},Ht=e=>{const t={h:0,s:0,l:0,r:0,g:0,b:0,a:1,rgb:"",hsl:"",hex:""},n=e.config,o=e.e.A;let a,s,l,c;return{i:t,S:()=>t[l],V(i,p){a=i,s=p},u(i){l=n.format=i},$(i,p,u=!0,y){const h=t.hex;te(t,i),te(t,p||(({h:g,s:w,l:r,a:m})=>({r:Ce(g/=30,w/=100,r/=100),g:Ce(g+8,w,r),b:Ce(g+4,w,r),a:m}))(t)),t.s=O(t.s),t.l=O(t.l),t.rgb=W(t),t.hsl=W(t,ye),t.hex=(({r:g,g:w,b:r,a:m})=>"#"+ie(g)+ie(w)+ie(r)+(m<1?ie(O(255*m)):""))(t),a(t),h!==t.hex&&(u&&o(Pe,t),y&&o(I,t))},o(i,p=!1,u){this.$(...kt(i,n.opacity),p,u),s(t)},t(){c=t[l]},_(){c!==t[l]&&o(I,t)}}};class Mt{static version(){return"2.2.0"}static setDefaults(t){se(Ne,t)}constructor(t,n){this.config=se({},Ne),this.e=(o=>{const a={[fe]:[],[Fe]:[],[I]:[],[Pe]:[]};return{A(s,l=o.s.i){(a[s]||[]).forEach(c=>c(te({type:s,source:o},l)))},F(s,l){l&&!(a[s]||[]).includes(l)&&a[s].push(l)},T(s,l){s?a[s]&&(a[s]=l?a[s].filter(c=>c!==l):[]):N(a,c=>{a[c]=[]})}}})(this),this.s=Ht(this),this.c=Ct(this,ae(t)[0]),this.c.L(n||{})}setOptions(t){t&&this.c.L(t)}setColor(t){return this.s.o(t),this}getColor(){return{...this.s.i}}isOpen(){return this.c.B()}open(){this.c.v(!0)}close(){this.c.v(!1)}toggle(){this.c.v()}on(t,n){this.e.F(t,n)}off(t,n){this.e.T(t,n)}addSwatches(...t){this.c.L({swatches:this.config.swatches.concat(t)})}removeSwatches(...t){this.c.L({swatches:this.config.swatches.filter((n,o)=>!t.some(a=>ee(a)?+a===o:a===n))})}enable(){this.c.L({disabled:!1})}disable(){this.c.L({disabled:!0})}reset(){this.s.o(this.config.default)}reposition(){this.c.C()}trigger(t){this.e.A(t)}destroy(){this.c.M(),N(this,t=>{this[t]=null}),dt(this,ut)}}export{Mt as default};
