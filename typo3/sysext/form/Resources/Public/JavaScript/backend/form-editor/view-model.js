/*
 * This file is part of the TYPO3 CMS project.
 *
 * It is free software; you can redistribute it and/or modify it under
 * the terms of the GNU General Public License, either version 2
 * of the License, or any later version.
 *
 * For the full copyright and license information, please read the
 * LICENSE.txt file that was distributed with this source code.
 *
 * The TYPO3 project - inspiring people to share!
 */
import o from"jquery";import*as _ from"@typo3/form/backend/form-editor/tree-component-adapter.js";import*as j from"@typo3/form/backend/form-editor/modals-component.js";import*as M from"@typo3/form/backend/form-editor/inspector-component.js";import*as me from"@typo3/form/backend/form-editor/stage-component.js";import*as H from"@typo3/form/backend/form-editor/helper.js";import F from"@typo3/backend/icons.js";import V from"@typo3/backend/notification.js";import{loadModule as de}from"@typo3/core/java-script-item-processor.js";const K={domElementClassNames:{formElementIsComposit:"formeditor-element-composit",formElementIsTopLevel:"formeditor-element-toplevel",hasError:"has-error",selectedCompositFormElement:"selected",selectedFormElement:"selected",selectedRootFormElement:"selected",selectedStagePanel:"t3-form-form-stage-selected",sortableHover:"sortable-hover",viewModeAbstract:"formeditor-module-viewmode-abstract",viewModePreview:"formeditor-module-viewmode-preview",validationErrors:"formeditor-validation-errors",validationChildHasErrors:"formeditor-validation-child-has-error"},domElementDataAttributeNames:{abstractType:"data-element-abstract-type"},domElementDataAttributeValues:{buttonHeaderClose:"closeButton",buttonHeaderPaginationNext:"buttonPaginationNext",buttonHeaderPaginationPrevious:"buttonPaginationPrevious",buttonHeaderRedo:"redoButton",buttonHeaderSave:"saveButton",buttonHeaderUndo:"undoButton",buttonHeaderViewModeAbstract:"buttonViewModeAbstract",buttonHeaderViewModePreview:"buttonViewModePreview",buttonStageNewElementBottom:"stageNewElementBottom",buttonFormSettings:"formSettings",buttonToggleStructure:"formeditorStructureToggle",buttonToggleInspector:"formeditorInspectorToggle",buttonNewPage:"newPage",iconMailform:"content-form",iconSave:"actions-document-save",iconSaveSpinner:"spinner-circle",inspectorSection:"inspectorSection",moduleLoadingIndicator:"moduleLoadingIndicator",moduleWrapper:"moduleWrapper",stageArea:"stageArea",stageContainer:"stageContainer",stageContainerInner:"stageContainerInner",stageNewElementRow:"stageNewElementRow",stagePanelHeading:"panelHeading",stageSection:"stageSection",structure:"structure-element",structureSection:"structureSection",structureRootContainer:"treeRootContainer",structureRootElement:"treeRootElement"}};let z=!1,T=null,$=null,q=null,G=null,J=null;function c(){return a().getRootFormElement()}function D(e,t,r){return a().assert(e,t,r)}function u(){return a().getUtility()}function v(){return a().getCurrentlySelectedFormElement()}function s(){return a().getPublisherSubscriber()}function ue(){a().addPropertyValidationValidator("NotEmpty",function(e,t){const r=e.get(t);if(!r||r===""||o.isArray(r)&&!r.length)return a().getFormElementPropertyValidatorDefinition("NotEmpty").errorMessage||"invalid value"}),a().addPropertyValidationValidator("Integer",function(e,t){if(!o.isNumeric(e.get(t)))return a().getFormElementPropertyValidatorDefinition("Integer").errorMessage||"invalid value"}),a().addPropertyValidationValidator("IntegerOrEmpty",function(e,t){if(!u().isUndefinedOrNull(e.get(t))&&e.get(t).length>0&&!o.isNumeric(e.get(t)))return a().getFormElementPropertyValidatorDefinition("Integer").errorMessage||"invalid value"}),a().addPropertyValidationValidator("NaiveEmail",function(e,t){if(!u().isUndefinedOrNull(e.get(t))&&!e.get(t).match(/\S+@\S+\.\S+/))return a().getFormElementPropertyValidatorDefinition("NaiveEmail").errorMessage||"invalid value"}),a().addPropertyValidationValidator("NaiveEmailOrEmpty",function(e,t){if(!u().isUndefinedOrNull(e.get(t))&&e.get(t).length>0&&!e.get(t).match(/\S+@\S+\.\S+/))return a().getFormElementPropertyValidatorDefinition("NaiveEmailOrEmpty").errorMessage||"invalid value"}),a().addPropertyValidationValidator("FormElementIdentifierWithinCurlyBracesInclusive",function(e,t){if(u().isUndefinedOrNull(e.get(t)))return;const l=/\{([a-z0-9-_]+)?\}/gi.exec(e.get(t));if(l&&(l[1]&&l[1]!=="__currentTimestamp"&&!a().isFormElementIdentifierUsed(l[1])||!l[1]))return a().getFormElementPropertyValidatorDefinition("FormElementIdentifierWithinCurlyBracesInclusive").errorMessage||"invalid value"}),a().addPropertyValidationValidator("FormElementIdentifierWithinCurlyBracesExclusive",function(e,t){if(u().isUndefinedOrNull(e.get(t)))return;const l=/^\{([a-z0-9-_]+)?\}$/i.exec(e.get(t));if(!l||l[1]&&l[1]!=="__currentTimestamp"&&!a().isFormElementIdentifierUsed(l[1])||!l[1])return a().getFormElementPropertyValidatorDefinition("FormElementIdentifierWithinCurlyBracesInclusive").errorMessage||"invalid value"}),a().addPropertyValidationValidator("FileSize",function(e,t){if(!u().isUndefinedOrNull(e.get(t))&&!e.get(t).match(/^(\d*\.?\d+)(B|K|M|G)$/i))return a().getFormElementPropertyValidatorDefinition("FileSize").errorMessage||"invalid value"}),a().addPropertyValidationValidator("RFC3339FullDate",function(e,t){if(!u().isUndefinedOrNull(e.get(t))&&!e.get(t).match(/^([0-9]{4})-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])$/i))return a().getFormElementPropertyValidatorDefinition("RFC3339FullDate").errorMessage||"invalid value"}),a().addPropertyValidationValidator("RFC3339FullDateOrEmpty",function(e,t){if(!u().isUndefinedOrNull(e.get(t))&&e.get(t).length>0&&!e.get(t).match(/^([0-9]{4})-(0[1-9]|1[012])-(0[1-9]|1[0-9]|2[0-9]|3[01])$/i))return a().getFormElementPropertyValidatorDefinition("RFC3339FullDate").errorMessage||"invalid value"}),a().addPropertyValidationValidator("RegularExpressionPattern",function(e,t){const r=e.get(t);let l=!0;if(!u().isNonEmptyString(r))return a().getFormElementPropertyValidatorDefinition("RegularExpressionPattern").errorMessage||"invalid value";try{const i=r.match(/^\/(.*)\/[gmixsuUAJD]*$/);i!==null?new RegExp(i[1]):l=!1}catch{l=!1}if(!l)return a().getFormElementPropertyValidatorDefinition("RegularExpressionPattern").errorMessage||"invalid value"})}function ce(e){let t=[];if(typeof e=="object"&&!Array.isArray(e))for(const l of Object.keys(e))t.push(e[l]);else t=e;if(o.type(t)!=="array"){s().publish("view/ready");return}const r=t.length;if(r>0){let l=0;for(let i=0;i<r;++i)de(t[i]).then(function(m){D(o.type(m.bootstrap)==="function",'The module "'+t[i].name+'" does not implement the method "bootstrap"',1475425785),m.bootstrap(a()),l++,r===l&&s().publish("view/ready")})}else s().publish("view/ready")}function ge(){D(o.type(_.bootstrap)==="function",'The structure component does not implement the method "bootstrap"',1478268639),$=_.bootstrap(a(),o(n().getDomElementDataAttribute("identifier","bracesWithKeyValue",[n().getDomElementDataAttributeValue("structure")]))),o(n().getDomElementDataIdentifierSelector("iconMailform"),o(n().getDomElementDataIdentifierSelector("structureRootContainer"))).attr("title","identifier: "+c().get("identifier"))}function fe(){D(o.type(j.bootstrap)==="function",'The modals component does not implement the method "bootstrap"',1478895106),q=j.bootstrap(a())}function Ee(){D(o.type(M.bootstrap)==="function",'The inspector component does not implement the method "bootstrap"',1478895106),G=M.bootstrap(a())}function pe(){D(o.type(M.bootstrap)==="function",'The stage component does not implement the method "bootstrap"',1478986610),J=me.bootstrap(a(),o(n().getDomElementDataAttribute("identifier","bracesWithKeyValue",[n().getDomElementDataAttributeValue("stageArea")]))),d().getStagePanelDomElement().on("click",function(e){(o(e.target).attr(n().getDomElementDataAttribute("identifier"))===n().getDomElementDataAttributeValue("stagePanelHeading")||o(e.target).attr(n().getDomElementDataAttribute("identifier"))===n().getDomElementDataAttributeValue("stageSection")||o(e.target).attr(n().getDomElementDataAttribute("identifier"))===n().getDomElementDataAttributeValue("stageArea"))&&ae(a().getCurrentlySelectedPageIndex()),s().publish("view/stage/panel/clicked",[])})}function De(){o(n().getDomElementDataIdentifierSelector("buttonHeaderSave")).on("click",function(){s().publish("view/header/button/save/clicked",[])}),o(n().getDomElementDataIdentifierSelector("buttonStageNewElementBottom")).on("click",function(){s().publish("view/stage/abstract/button/newElement/clicked",["view/insertElements/perform/bottom"])}),o(n().getDomElementDataIdentifierSelector("buttonToggleStructure")).on("click",function(){o(n().getDomElementDataIdentifierSelector("structureSection")).toggleClass("formeditor-sidebar-expanded")}),o(n().getDomElementDataIdentifierSelector("buttonToggleInspector")).on("click",function(){o(n().getDomElementDataIdentifierSelector("inspectorSection")).toggleClass("formeditor-sidebar-expanded")}),o(n().getDomElementDataIdentifierSelector("buttonFormSettings")).on("click",function(){s().publish("view/header/formSettings/clicked",[])}),o(n().getDomElementDataIdentifierSelector("buttonNewPage")).on("click",function(){s().publish("view/structure/button/newPage/clicked",["view/insertPages/perform"])}),o(n().getDomElementDataIdentifierSelector("buttonHeaderClose")).on("click",function(e){a().getUnsavedContent()&&(e.preventDefault(),s().publish("view/header/button/close/clicked",[]))}),o(n().getDomElementDataIdentifierSelector("buttonHeaderUndo")).on("click",function(){s().publish("view/undoButton/clicked",[])}),o(n().getDomElementDataIdentifierSelector("buttonHeaderRedo")).on("click",function(){s().publish("view/redoButton/clicked",[])}),o(n().getDomElementDataIdentifierSelector("buttonHeaderViewModeAbstract")).on("click",function(){s().publish("view/viewModeButton/abstract/clicked",[])}),o(n().getDomElementDataIdentifierSelector("buttonHeaderViewModePreview")).on("click",function(){s().publish("view/viewModeButton/preview/clicked",[])}),o(n().getDomElementDataIdentifierSelector("structureRootContainer")).on("click",function(){s().publish("view/structure/root/selected")}),o(n().getDomElementDataIdentifierSelector("buttonHeaderPaginationNext")).on("click",function(){s().publish("view/paginationNext/clicked",[])}),o(n().getDomElementDataIdentifierSelector("buttonHeaderPaginationPrevious")).on("click",function(){s().publish("view/paginationPrevious/clicked",[])})}function a(){return T}function n(e){return u().isUndefinedOrNull(e)?H.setConfiguration(K):H.setConfiguration(e)}function p(e,t){return a().getFormElementDefinition(e,t)}function ve(){return o.extend(!0,{},K)}function be(){return z}function he(e){z=!!e}function g(){return $}function B(){g().renew(),s().publish("view/structure/renew/postProcess")}function Q(e){g().getTreeNode(e).addClass(n().getDomElementClassName("selectedFormElement"))}function Se(e){g().getTreeNode(e).removeClass(n().getDomElementClassName("selectedFormElement"))}function X(){o(n().getDomElementClassName("selectedFormElement",!0),g().getTreeDomElement()).removeClass(n().getDomElementClassName("selectedFormElement"))}function k(){return o(n().getDomElementDataAttribute("identifier","bracesWithKeyValue",[n().getDomElementDataAttributeValue("structureRootContainer")]))}function Y(){return o(n().getDomElementDataAttribute("identifier","bracesWithKeyValue",[n().getDomElementDataAttributeValue("structureRootElement")]))}function Z(){o(n().getDomElementDataAttribute("identifier","bracesWithKeyValue",[n().getDomElementDataAttributeValue("structureRootContainer")])).removeClass(n().getDomElementClassName("selectedRootFormElement"))}function ee(){o(n().getDomElementDataAttribute("identifier","bracesWithKeyValue",[n().getDomElementDataAttributeValue("structureRootContainer")])).addClass(n().getDomElementClassName("selectedRootFormElement"))}function te(e){u().isUndefinedOrNull(e)&&(e=o("<span></span>").text(c().get("label")?c().get("label"):c().get("identifier")).text()),Y().text(e)}function Ce(){g().clearAllValidationErrors(),g().getAllTreeNodes().removeClass(n().getDomElementClassName("validationErrors")).removeClass(n().getDomElementClassName("validationChildHasErrors")),se(k());const e=a().validateFormElementRecursive(c());for(let t=0,r=e.length;t<r;++t){let l=!1;for(let i=0,m=e[t].validationResults.length;i<m;++i)if(e[t].validationResults[i].validationResults&&e[t].validationResults[i].validationResults.length>0){l=!0;break}if(l)if(t===0)P(k());else{const i=e[t].formElementIdentifierPath;g().setNodeValidationError(i,!0);const m=g().getTreeNode(i);P(m);const E=i.split("/");for(;E.pop();){const f=E.join("/");if(f){g().setNodeChildHasError(f,!0);const I=g().getTreeNode(f);o.type(I)==="object"&&P(I,"validationChildHasErrors")}}}}}function S(){return q}function we(e){u().isUndefinedOrNull(e)&&(e=v()),S().showRemoveFormElementModal(e)}function Ne(e,t,r){u().isUndefinedOrNull(r)&&(r=v()),S().showRemoveCollectionElementModal(e,t,r)}function Pe(){S().showCloseConfirmationModal()}function Ie(e,t){S().showInsertElementsModal(e,t)}function Ae(e){S().showInsertPagesModal(e)}function Fe(){const e=a().validateFormElementRecursive(c());S().showValidationErrorsModal(e)}function N(){return G}function U(e,t){u().isUndefinedOrNull(t)&&(t=!0);const r=l=>{N().renderEditors(e,l)};t?N().getInspectorDomElement().fadeOut("fast",function(){r(function(){N().getInspectorDomElement().fadeIn("fast")})}):r()}function Ve(){document.querySelector(n().getDomElementDataIdentifierSelector("buttonToggleInspector"))?.getClientRects().length===1&&document.querySelector(n().getDomElementDataIdentifierSelector("inspectorSection")).classList.add("formeditor-sidebar-expanded")}function ye(e,t){N().renderCollectionElementEditors(e,t)}function d(){return J}function ne(e){d().setStageHeadline(e)}function oe(){d().getStagePanelDomElement().addClass(n().getDomElementClassName("selectedStagePanel"))}function re(){d().getStagePanelDomElement().removeClass(n().getDomElementClassName("selectedStagePanel"))}function O(){d().renderPagination()}function Re(){d().renderUndoRedo()}function ie(e,t){u().isUndefinedOrNull(e)&&(e=!0),u().isUndefinedOrNull(t)&&(t=!0),y(o(n().getDomElementDataIdentifierSelector("buttonHeaderViewModeAbstract"))),W(o(n().getDomElementDataIdentifierSelector("buttonHeaderViewModePreview"))),o(n().getDomElementDataIdentifierSelector("moduleWrapper")).addClass(n().getDomElementClassName("viewModeAbstract")).removeClass(n().getDomElementClassName("viewModePreview"));const r=i=>{d().renderAbstractStageArea(void 0,i)},l=()=>{const i=p(v(),void 0);d().getAllFormElementDomElements().hover(function(){d().getAllFormElementDomElements().parent().removeClass(n().getDomElementClassName("sortableHover")),o(this).parent().hasClass(n().getDomElementClassName("formElementIsComposit"))&&!o(this).parent().hasClass(n().getDomElementClassName("formElementIsTopLevel"))&&o(this).parent().addClass(n().getDomElementClassName("sortableHover"))}),i._isTopLevelFormElement&&!i._isCompositeFormElement&&!a().isRootFormElementSelected()?(w(o(n().getDomElementDataIdentifierSelector("buttonStageNewElementBottom"))),w(o(n().getDomElementDataIdentifierSelector("stageNewElementRow")))):(b(o(n().getDomElementDataIdentifierSelector("buttonStageNewElementBottom"))),b(o(n().getDomElementDataIdentifierSelector("stageNewElementRow")))),x(t),s().publish("view/stage/abstract/render/postProcess")};e?o(n().getDomElementDataIdentifierSelector("stageSection")).fadeOut(400,function(){r(function(){s().publish("view/stage/abstract/render/preProcess"),o(n().getDomElementDataIdentifierSelector("stageSection")).fadeIn(400),l(),s().publish("view/stage/abstract/render/postProcess")})}):r(function(){s().publish("view/stage/abstract/render/preProcess"),l(),s().publish("view/stage/abstract/render/postProcess")})}function Me(e){y(o(n().getDomElementDataIdentifierSelector("buttonHeaderViewModePreview"))),W(o(n().getDomElementDataIdentifierSelector("buttonHeaderViewModeAbstract"))),o(n().getDomElementDataIdentifierSelector("moduleWrapper")).addClass(n().getDomElementClassName("viewModePreview")).removeClass(n().getDomElementClassName("viewModeAbstract")),o(n().getDomElementDataIdentifierSelector("stageSection")).fadeOut(400,function(){w(o(n().getDomElementDataIdentifierSelector("buttonStageNewElementBottom"))),d().renderPreviewStageArea(e),o(n().getDomElementDataIdentifierSelector("stageSection")).fadeIn(400),s().publish("view/stage/preview/render/postProcess")})}function He(){const e=a().validateFormElementRecursive(c());for(let t=0,r=e.length;t<r;++t){let l=!1;for(let i=0,m=e[t].validationResults.length;i<m;++i)if(e[t].validationResults[i].validationResults&&e[t].validationResults[i].validationResults.length>0){l=!0;break}if(l&&t>0){const i=d().getAbstractViewFormElementDomElement(e[t].formElementIdentifierPath);P(i)}}}function Te(e,t,r){const l=a().createAndAddFormElement(e,t);return r||s().publish("view/formElement/inserted",[l]),l}function C(e,t,r,l){const i=a().moveFormElement(e,t,r,!1);return l||s().publish("view/formElement/moved",[i]),i}function Be(e,t){let r;return u().isUndefinedOrNull(e)&&(e=v()),p(e,"_isTopLevelFormElement")&&p(e,"_isCompositeFormElement")&&c().get("renderables").length===1?V.error(p(c(),"modalRemoveElementLastAvailablePageFlashMessageTitle"),p(c(),"modalRemoveElementLastAvailablePageFlashMessageMessage"),2):(r=a().removeFormElement(e,!1),t||s().publish("view/formElement/removed",[r])),r}function ke(e,t,r,l,i,m){a().createAndAddPropertyCollectionElement(e,t,r,l,i),m||s().publish("view/collectionElement/new/added",[e,t,r,l,i])}function Ue(e,t,r,l,i,m){u().isUndefinedOrNull(i)&&(i=v()),a().movePropertyCollectionElement(e,t,r,l,i,!1),m||s().publish("view/collectionElement/moved",[e,t,r,l,i])}function Oe(e,t,r,l){let i,m;a().removePropertyCollectionElement(e,t,r);const E=a().getPropertyCollectionElementConfiguration(e,t);if(o.type(E.editors)==="array"){for(let f=0,I=E.editors.length;f<I;++f)if(o.type(E.editors[f].additionalElementPropertyPaths)==="array")for(let h=0,R=E.editors[f].additionalElementPropertyPaths.length;h<R;++h)v().unset(E.editors[f].additionalElementPropertyPaths[h],!0);else if(E.editors[f].identifier==="validationErrorMessage"&&(m=a().buildPropertyPath(E.editors[f].propertyPath),i=v().get(m),!u().isUndefinedOrNull(i))){for(let h=0,R=E.editors[f].errorCodes.length;h<R;++h)for(let A=0,L=i.length;A<L;++A)parseInt(E.editors[f].errorCodes[h],10)===parseInt(i[A].code,10)&&(i.splice(A,1),--L);v().set(m,i)}}l||s().publish("view/collectionElement/removed",[e,t,r])}function x(e){u().isUndefinedOrNull(e)&&(e=!0);const t=p(v(),void 0);if(d().removeAllStageToolbars(),le(),X(),!a().isRootFormElementSelected()){Z(),Q();const r=d().getAbstractViewFormElementDomElement();t._isTopLevelFormElement?oe():(r.addClass(n().getDomElementClassName("selectedFormElement")),d().createAndAddAbstractViewFormElementToolbar(r,void 0,e)),d().getAllFormElementDomElements().parent().removeClass(n().getDomElementClassName("selectedCompositFormElement")),!t._isTopLevelFormElement&&t._isCompositeFormElement&&r.parent().addClass(n().getDomElementClassName("selectedCompositFormElement"))}}function ae(e){D(o.type(e)==="number",'Invalid parameter "pageIndex"',1478651732),D(e>=0,'Invalid parameter "pageIndex"',1478651733),D(e<c().get("renderables").length,'Invalid parameter "pageIndex"',1478651734),a().setCurrentlySelectedFormElement(c().get("renderables")[e]),B(),O(),x(),U()}function le(){d().getAllFormElementDomElements().removeClass(n().getDomElementClassName("selectedFormElement")),re(),d().getAllFormElementDomElements().parent().removeClass(n().getDomElementClassName("sortableHover"))}function xe(){w(o(n().getDomElementDataIdentifierSelector("buttonStageNewElementBottom"))),w(o(n().getDomElementDataIdentifierSelector("stageNewElementRow"))),ne(),te(),ie(!1),B(),ee(),U(),O(),w(o(n().getDomElementDataIdentifierSelector("moduleLoadingIndicator"))),b(o(n().getDomElementDataIdentifierSelector("moduleWrapper"))),b(o(n().getDomElementDataIdentifierSelector("buttonHeaderSave"))),b(o(n().getDomElementDataIdentifierSelector("buttonHeaderClose"))),b(o(n().getDomElementDataIdentifierSelector("buttonHeaderUndo"))),b(o(n().getDomElementDataIdentifierSelector("buttonHeaderRedo"))),y(o(n().getDomElementDataIdentifierSelector("buttonHeaderViewModeAbstract")))}function We(e,t){o(t).removeClass(n().getDomElementClassName("sortableHover"))}function Le(e,t,r){d().getAllFormElementDomElements().parent().removeClass(n().getDomElementClassName("sortableHover")),r&&d().getAbstractViewParentFormElementWithinDomElement(e).parent().addClass(n().getDomElementClassName("sortableHover"))}function _e(e,t,r,l){let i,m;l?i=C(t,"before",l):r?i=C(t,"after",r):(m=d().getAbstractViewParentFormElementIdentifierPathWithinDomElement(e),m?i=C(t,"inside",m):D(!1,"Next element, previous or parent element need to be set.",1472502237)),d().getAbstractViewFormElementWithinDomElement(e).attr(n().getDomElementDataAttribute("elementIdentifier"),i.get("__identifierPath"))}function je(e,t,r){g().getAllTreeNodes().parent().removeClass(n().getDomElementClassName("sortableHover")),d().getAllFormElementDomElements().parent().removeClass(n().getDomElementClassName("sortableHover")),r&&(g().getParentTreeNodeWithinDomElement(e).parent().addClass(n().getDomElementClassName("sortableHover")),d().getAbstractViewFormElementDomElement(r).parent().addClass(n().getDomElementClassName("sortableHover")))}function Ke(e,t,r,l){let i,m;l?i=C(t,"before",l):r?i=C(t,"after",r):(m=g().getParentTreeNodeIdentifierPathWithinDomElement(e),m?i=C(t,"inside",m):a().assert(!1,"Next element, previous or parent element need to be set.",1479048646)),g().getTreeNodeWithinDomElement(e).attr(n().getDomElementDataAttribute("elementIdentifier"),i.get("__identifierPath"))}function ze(){document.location.href=o(n().getDomElementDataIdentifierSelector("buttonHeaderClose")).prop("href")}function P(e,t){a().getUtility().isUndefinedOrNull(t)?e.addClass(n().getDomElementClassName("validationErrors")):e.addClass(n().getDomElementClassName(t))}function se(e,t){a().getUtility().isUndefinedOrNull(t)?e.removeClass(n().getDomElementClassName("validationErrors")):e.removeClass(n().getDomElementClassName(t))}function b(e){e.removeClass(n().getDomElementClassName("hidden")).show()}function w(e){e.addClass(n().getDomElementClassName("hidden")).hide()}function $e(e){e.prop("disabled",!1).removeClass(n().getDomElementClassName("disabled"))}function qe(e){e.prop("disabled","disabled").addClass(n().getDomElementClassName("disabled"))}function y(e){e.addClass(n().getDomElementClassName("active"))}function W(e){e.removeClass(n().getDomElementClassName("active"))}function Ge(){F.getIcon(n().getDomElementDataAttributeValue("iconSaveSpinner"),F.sizes.small).then(function(e){o(n().getDomElementDataIdentifierSelector("iconSave")).replaceWith(o(e))})}function Je(){F.getIcon(n().getDomElementDataAttributeValue("iconSave"),F.sizes.small).then(function(e){o(n().getDomElementDataIdentifierSelector("iconSaveSpinner")).replaceWith(o(e))})}function Qe(){V.success(p(c(),"saveSuccessFlashMessageTitle"),p(c(),"saveSuccessFlashMessageMessage"),2)}function Xe(e){V.error(p(c(),"saveErrorFlashMessageTitle"),p(c(),"saveErrorFlashMessageMessage")+" "+e.message)}function Ye(e,t){V.error(e,t,2)}function Ze(e,t){T=e,H.bootstrap(T),ge(),fe(),Ee(),pe(),De(),ue(),ce(t)}export{He as addAbstractViewValidationResults,oe as addStagePanelSelection,ee as addStructureRootElementSelection,Q as addStructureSelection,Ce as addStructureValidationResults,Ze as bootstrap,ze as closeEditor,Te as createAndAddFormElement,ke as createAndAddPropertyCollectionElement,qe as disableButton,$e as enableButton,ve as getConfiguration,a as getFormEditorApp,p as getFormElementDefinition,n as getHelper,N as getInspector,S as getModals,be as getPreviewMode,d as getStage,g as getStructure,k as getStructureRootContainer,Y as getStructureRootElement,w as hideComponent,C as moveFormElement,Ue as movePropertyCollectionElement,Le as onAbstractViewDndChangeBatch,We as onAbstractViewDndStartBatch,_e as onAbstractViewDndUpdateBatch,je as onStructureDndChangeBatch,Ke as onStructureDndUpdateBatch,xe as onViewReadyBatch,x as refreshSelectedElementItemsBatch,le as removeAllStageElementSelectionsBatch,X as removeAllStructureSelections,W as removeButtonActive,se as removeElementValidationErrorClass,Be as removeFormElement,Oe as removePropertyCollectionElement,re as removeStagePanelSelection,Z as removeStructureRootElementSelection,Se as removeStructureSelection,ie as renderAbstractStageArea,ye as renderInspectorCollectionElementEditors,U as renderInspectorEditors,O as renderPagination,Me as renderPreviewStageArea,Re as renderUndoRedo,B as renewStructure,ae as selectPageBatch,y as setButtonActive,P as setElementValidationErrorClass,he as setPreviewMode,ne as setStageHeadline,te as setStructureRootElementTitle,Pe as showCloseConfirmationModal,b as showComponent,Ye as showErrorFlashMessage,Ie as showInsertElementsModal,Ae as showInsertPagesModal,Ve as showInspectorSidebar,Ne as showRemoveCollectionElementModal,we as showRemoveFormElementModal,Je as showSaveButtonSaveIcon,Ge as showSaveButtonSpinnerIcon,Xe as showSaveErrorMessage,Qe as showSaveSuccessMessage,Fe as showValidationErrorsModal};
