config.absRefPrefix =
page = PAGE
page {
  includeCSS {
    extensionCSS = {$extensionCSS}
    externalCSS = {$externalCSS}
    externalCSS.external = 1
  }

  includeJS {
    extensionJS = {$extensionJS}
    externalJS = {$externalJS}
    externalJS.external = 1
  }
  # added so we can also test the inclusion of these types in FE
  includeCSSLibs {
    extensionCSS = {$extensionCSS}
  }
  includeJSLibs {
    extensionJS = {$extensionJS}
  }
  includeJSFooterlibs {
    extensionJS = {$extensionJS}
  }
  20 = IMAGE
  20 {
    file = {$localImage}
  }
}

[traverse(request.getQueryParams(), 'testAbsRefPrefix') == 'auto' || traverse(request.getParsedBody(), 'testAbsRefPrefix') == 'auto']
  config.absRefPrefix = auto
[traverse(request.getQueryParams(), 'testAbsRefPrefix') == 'absolute-with-host' || traverse(request.getParsedBody(), 'testAbsRefPrefix') == 'absolute-with-host']
  config.absRefPrefix = http://localhost/
[traverse(request.getQueryParams(), 'testAbsRefPrefix') == 'absolute-without-host' || traverse(request.getParsedBody(), 'testAbsRefPrefix') == 'absolute-without-host']
  config.absRefPrefix = /
[end]
