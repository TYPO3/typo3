import{ObservableMixin as x,insertToPriorityArray as se,CKEditorError as c,EmitterMixin as oe,Config as G,Locale as re,Collection as F,KeystrokeHandler as ae,env as E,global as A,uid as L,parseBase64EncodedObject as le,toArray as ce,crc32 as ue,releaseDate as de,logError as fe,setDataInElement as z}from"@ckeditor/ckeditor5-utils";import{Model as he,StylesProcessor as ge,DataController as me,EditingController as ye,Conversion as we}from"@ckeditor/ckeditor5-engine";import{EditorWatchdog as pe,ContextWatchdog as be}from"@ckeditor/ckeditor5-watchdog";/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class _e extends x(){editor;_disableStack=new Set;constructor(e){super(),this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",B,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",B),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function B(t){t.return=!1,t.stop()}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class W extends x(){editor;_isEnabledBasedOnSelection;_affectsData;_disableStack;constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",n=>{if(!this.affectsData)return;const i=e.model.document.selection,l=!(i.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(i);(e.isReadOnly||this._isEnabledBasedOnSelection&&!l)&&(n.return=!1,n.stop())},{priority:"highest"}),this.on("execute",n=>{this.isEnabled||n.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",$,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",$),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function $(t){t.return=!1,t.stop()}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class ke extends W{_childCommandsDefinitions=[];refresh(){}execute(...e){const n=this._getFirstEnabledCommand();return!!n&&n.execute(e)}registerChildCommand(e,n={}){se(this._childCommandsDefinitions,{command:e,priority:n.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:n})=>n.isEnabled);return e&&e.command}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class H{_commands;constructor(){this._commands=new Map}add(e,n){this._commands.set(e,n)}get(e){return this._commands.get(e)}execute(e,...n){const i=this.get(e);if(!i)throw new c("commandcollection-command-not-found",this,{commandName:e});return i.execute(...n)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Y extends oe(){_context;_plugins=new Map;_availablePlugins;_contextPlugins;constructor(e,n=[],i=[]){super(),this._context=e,this._availablePlugins=new Map;for(const s of n)s.pluginName&&this._availablePlugins.set(s.pluginName,s);this._contextPlugins=new Map;for(const[s,l]of i)this._contextPlugins.set(s,l),this._contextPlugins.set(l,s),s.pluginName&&this._availablePlugins.set(s.pluginName,s)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const n=this._plugins.get(e);if(!n){let i=e;throw typeof e=="function"&&(i=e.pluginName||e.name),new c("plugincollection-plugin-not-loaded",this._context,{plugin:i})}return n}has(e){return this._plugins.has(e)}init(e,n=[],i=[]){const s=this,l=this._context;b(e),y(e);const f=e.filter(o=>!S(o,n)),d=[...P(f)];C(d,i);const _=T(d);return O(_,"init").then(()=>O(_,"afterInit")).then(()=>_);function w(o){return typeof o=="function"}function k(o){return w(o)&&!!o.isContextPlugin}function S(o,u){return u.some(r=>r===o||m(o)===r||m(r)===o)}function m(o){return w(o)?o.pluginName||o.name:o}function b(o,u=new Set){o.forEach(r=>{w(r)&&(u.has(r)||(u.add(r),r.pluginName&&!s._availablePlugins.has(r.pluginName)&&s._availablePlugins.set(r.pluginName,r),r.requires&&b(r.requires,u)))})}function P(o,u=new Set){return o.map(r=>w(r)?r:s._availablePlugins.get(r)).reduce((r,a)=>u.has(a)?r:(u.add(a),a.requires&&(y(a.requires,a),P(a.requires,u).forEach(h=>r.add(h))),r.add(a)),new Set)}function y(o,u=null){o.map(r=>w(r)?r:s._availablePlugins.get(r)||r).forEach(r=>{D(r,u),I(r,u),N(r,u)})}function D(o,u){if(!w(o))throw u?new c("plugincollection-soft-required",l,{missingPlugin:o,requiredBy:m(u)}):new c("plugincollection-plugin-not-found",l,{plugin:o})}function I(o,u){if(k(u)&&!k(o))throw new c("plugincollection-context-required",l,{plugin:m(o),requiredBy:m(u)})}function N(o,u){if(u&&S(o,n))throw new c("plugincollection-required",l,{plugin:m(o),requiredBy:m(u)})}function T(o){return o.map(u=>{let r=s._contextPlugins.get(u);return r=r||new u(l),s._add(u,r),r})}function O(o,u){return o.reduce((r,a)=>!a[u]||s._contextPlugins.has(a)?r:r.then(a[u].bind(a)),Promise.resolve())}function C(o,u){for(const r of u){if(typeof r!="function")throw new c("plugincollection-replace-plugin-invalid-type",null,{pluginItem:r});const a=r.pluginName;if(!a)throw new c("plugincollection-replace-plugin-missing-name",null,{pluginItem:r});if(r.requires&&r.requires.length)throw new c("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:a});const h=s._availablePlugins.get(a);if(!h)throw new c("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:a});const p=o.indexOf(h);if(p===-1){if(s._contextPlugins.has(h))return;throw new c("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:a})}if(h.requires&&h.requires.length)throw new c("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:a});o.splice(p,1,r),s._availablePlugins.set(a,r)}}}destroy(){const e=[];for(const[,n]of this)typeof n.destroy=="function"&&!this._contextPlugins.has(n)&&e.push(n.destroy());return Promise.all(e)}_add(e,n){this._plugins.set(e,n);const i=e.pluginName;if(i){if(this._plugins.has(i))throw new c("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,n)}}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class R{config;plugins;locale;t;editors;static defaultConfig;static builtinPlugins;_contextOwner=null;constructor(e){const{translations:n,...i}=e||{};this.config=new G(i,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new Y(this,s);const l=this.config.get("language")||{};this.locale=new re({uiLanguage:typeof l=="string"?l:l.ui,contentLanguage:this.config.get("language.content"),translations:n}),this.t=this.locale.t,this.editors=new F}initPlugins(){const e=this.config.get("plugins")||[],n=this.config.get("substitutePlugins")||[];for(const i of e.concat(n)){if(typeof i!="function")throw new c("context-initplugins-constructor-only",null,{Plugin:i});if(i.isContextPlugin!==!0)throw new c("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(e,[],n)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,n){if(this._contextOwner)throw new c("context-addeditor-private-context");this.editors.add(e),n&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const n of this.config.names())["plugins","removePlugins","extraPlugins"].includes(n)||(e[n]=this.config.get(n));return e}static create(e){return new Promise(n=>{const i=new this(e);n(i.initPlugins().then(()=>i))})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class V extends x(){context;constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class j extends ae{editor;constructor(e){super(),this.editor=e}set(e,n,i={}){if(typeof n=="string"){const s=n;n=(l,f)=>{this.editor.execute(s),f()}}super.set(e,n,i)}}function v(t){return t==="__proto__"}function Ee(t){switch(typeof t){case"number":case"symbol":return!1;case"string":return t.includes(".")||t.includes("[")||t.includes("]")}}function J(t){return typeof t=="string"||typeof t=="symbol"?t:Object.is(t?.valueOf?.(),-0)?"-0":String(t)}function X(t){const e=[],n=t.length;if(n===0)return e;let i=0,s="",l="",f=!1;for(t.charCodeAt(0)===46&&(e.push(""),i++);i<n;){const d=t[i];l?d==="\\"&&i+1<n?(i++,s+=t[i]):d===l?l="":s+=d:f?d==='"'||d==="'"?l=d:d==="]"?(f=!1,e.push(s),s=""):s+=d:d==="["?(f=!0,s&&(e.push(s),s="")):d==="."?s&&(e.push(s),s=""):s+=d,i++}return s&&e.push(s),e}function Q(t,e,n){if(t==null)return n;switch(typeof e){case"string":{if(v(e))return n;const i=t[e];return i===void 0?Ee(e)?Q(t,X(e),n):n:i}case"number":case"symbol":{typeof e=="number"&&(e=J(e));const i=t[e];return i===void 0?n:i}default:{if(Array.isArray(e))return Pe(t,e,n);if(Object.is(e?.valueOf(),-0)?e="-0":e=String(e),v(e))return n;const i=t[e];return i===void 0?n:i}}}function Pe(t,e,n){if(e.length===0)return n;let i=t;for(let s=0;s<e.length;s++){if(i==null||v(e[s]))return n;i=i[e[s]]}return i===void 0?n:i}function Z(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function xe(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}const Se=/^(?:0|[1-9]\d*)$/;function Oe(t,e=Number.MAX_SAFE_INTEGER){switch(typeof t){case"number":return Number.isInteger(t)&&t>=0&&t<e;case"symbol":return!1;case"string":return Se.test(t)}}function Ce(t){return typeof t=="symbol"||t instanceof Symbol}const ve=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,De=/^\w*$/;function Ie(t,e){return Array.isArray(t)?!1:typeof t=="number"||typeof t=="boolean"||t==null||Ce(t)?!0:typeof t=="string"&&(De.test(t)||!ve.test(t))||e!=null&&Object.hasOwn(e,t)}const Ne=(t,e,n)=>{const i=t[e];(!(Object.hasOwn(t,e)&&xe(i,n))||n===void 0&&!(e in t))&&(t[e]=n)};function Te(t,e,n,i){if(t==null&&!Z(t))return t;const s=Ie(e,t)?[e]:Array.isArray(e)?e:typeof e=="string"?X(e):[e];let l=t;for(let f=0;f<s.length&&l!=null;f++){const d=J(s[f]);if(v(d))continue;let _;if(f===s.length-1)_=n(l[d]);else{const w=l[d],k=i?.(w,d,t);_=k!==void 0?k:Z(w)?w:Oe(s[f+1])?[]:{}}Ne(l,d,_),l=l[d]}return t}function Ae(t,e,n){return Te(t,e,()=>n,()=>{})}function ee(t){return typeof t=="function"}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const K="contentEditing",U="common";class te{keystrokeInfos=new Map;_editor;constructor(e){this._editor=e;const n=e.config.get("menuBar.isVisible"),i=e.locale.t;this.addKeystrokeInfoCategory({id:K,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];n&&s.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:e,label:n,description:i,groups:s}){this.keystrokeInfos.set(e,{id:e,label:n,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:U}),s&&s.forEach(l=>{this.addKeystrokeInfoGroup({categoryId:e,...l})})}addKeystrokeInfoGroup({categoryId:e=K,id:n,label:i,keystrokes:s}){const l=this.keystrokeInfos.get(e);if(!l)throw new c("accessibility-unknown-keystroke-info-category",this._editor,{groupId:n,categoryId:e});l.groups.set(n,{id:n,label:i,keystrokes:s||[]})}addKeystrokeInfos({categoryId:e=K,groupId:n=U,keystrokes:i}){if(!this.keystrokeInfos.has(e))throw new c("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:i});const s=this.keystrokeInfos.get(e);if(!s.groups.has(n))throw new c("accessibility-unknown-keystroke-info-group",this._editor,{groupId:n,categoryId:e,keystrokes:i});s.groups.get(n).keystrokes.push(...i)}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function ne(t){return{sessionId:qe(),pageSessionId:Me(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:Le(t),plugins:Re(t.plugins),distribution:Ke(),env:Ue(),integration:Object.create(null),menuBar:{isVisible:!!t.config.get("menuBar.isVisible")},language:{ui:t.locale.uiLanguage,content:t.locale.contentLanguage},toolbar:{main:q(t.config.get("toolbar")),block:q(t.config.get("blockToolbar")),balloon:q(t.config.get("balloonToolbar"))}}}function Le(t){return Object.getPrototypeOf(t).constructor.editorName}function Re(t){return Array.from(t).filter(([e])=>!!e.pluginName).map(([e])=>{const{pluginName:n,isContextPlugin:i,isOfficialPlugin:s,isPremiumPlugin:l}=e;return{isContext:!!i,isOfficial:!!s,isPremium:!!l,name:n}})}function q(t){if(!t)return;const e=Array.isArray(t)?{items:t}:t,n=l(e.items||[]);return{isMultiline:n.includes("-"),shouldNotGroupWhenFull:!!e.shouldNotGroupWhenFull,items:s(n)};function s(f){return f.filter(d=>d!=="|"&&d!=="-")}function l(f){return f.flatMap(d=>typeof d=="string"?[d]:l(d.items))}}function Ke(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function Ue(){let t="unknown",e="unknown";return E.isMac?t="mac":E.isWindows?t="windows":E.isiOS?t="ios":E.isAndroid&&(t="android"),E.isGecko?e="gecko":E.isBlink?e="blink":E.isSafari&&(e="safari"),{os:t,browser:e}}function qe(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",L()),localStorage.getItem("__ckeditor-session-id")}function Me(){return A.window.CKEDITOR_PAGE_SESSION_ID=A.window.CKEDITOR_PAGE_SESSION_ID||L(),A.window.CKEDITOR_PAGE_SESSION_ID}function Ge(t,{insertAt:e}={}){if(typeof document>"u")return;const n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",window.litNonce&&i.setAttribute("nonce",window.litNonce),e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}Ge(":root{--ck-content-font-family:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-content-font-size:medium;--ck-content-font-color:#000;--ck-content-line-height:1.5;--ck-content-word-break:break-word}.ck-content{color:var(--ck-content-font-color);font-family:var(--ck-content-font-family);font-size:var(--ck-content-font-size);line-height:var(--ck-content-line-height);word-break:var(--ck-content-word-break)}");/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Fe extends x(){static get editorName(){return"Editor"}accessibility;commands;config;conversion;data;editing;locale;model;plugins;keystrokes;t;static defaultConfig;static builtinPlugins;_context;_readOnlyLocks;constructor(e={}){if(super(),"sanitizeHtml"in e)throw new c("editor-config-sanitizehtml-not-supported");const n=this.constructor,{translations:i,...s}=n.defaultConfig||{},{translations:l=i,...f}=e,d=e.language||s.language;this._context=e.context||new R({language:d,translations:l}),this._context._addEditor(this,!e.context);const _=Array.from(n.builtinPlugins||[]);this.config=new G(f,s),this.config.define("plugins",_),this.config.define(this._context._getEditorConfig()),k(this.config),this.plugins=new Y(this,_,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new H,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new he,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const w=new ge;this.data=new me(this.model,w),this.editing=new ye(this.model,w),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new we([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new j(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new te(this),S(this);function k(m){let b=m.get("licenseKey");if(!b&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(b=window.CKEDITOR_GLOBAL_LICENSE_KEY,m.set("licenseKey",b)),!b)throw new c("license-key-missing")}function S(m){const b=m.config.get("licenseKey"),P=window[Symbol.for("cke distribution")]||"sh";function y(a){m.enableReadOnlyMode(Symbol("invalidLicense")),m._showLicenseError(a)}function D(a){const h=a.split(".");return h.length!=3?null:h[1]}function I(a){return["exp","jti","vc"].every(p=>p in a)}function N(a){return Object.getOwnPropertyNames(a).sort().filter(g=>g!="vc"&&a[g]!=null).map(g=>a[g])}function T(a){const{hostname:h}=new URL(window.location.href);if(a.includes(h))return!0;const p=h.split(".");return a.filter(g=>g.includes("*")).map(g=>g.split(".")).filter(g=>g.length<=p.length).map(g=>Array(p.length-g.length).fill(g[0]==="*"?"*":"").concat(g)).some(g=>p.every((ie,M)=>g[M]===ie||g[M]==="*"))}function O(a){const h=a[0].toUpperCase()+a.slice(1),p=a==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${h} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`\u26A0\uFE0F You are using ${p} ${a} license of CKEditor 5${a==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(b=="GPL"){P=="cloud"&&y("distributionChannel");return}const C=D(b);if(!C){y("invalid");return}const o=le(C);if(!o){y("invalid");return}if(!I(o)){y("invalid");return}if(o.distributionChannel&&!ce(o.distributionChannel).includes(P)){y("distributionChannel");return}if(ue(N(o))!=o.vc.toLowerCase()){y("invalid");return}if(new Date(o.exp*1e3)<de){y("expired");return}const r=o.licensedHosts;if(r&&r.length>0&&!T(r)){y("domainLimit");return}if(["evaluation","trial"].includes(o.licenseType)&&o.exp*1e3<Date.now()){y("expired");return}if(["development","evaluation","trial"].includes(o.licenseType)){const{licenseType:a}=o;window.CKEDITOR_WARNING_SUPPRESSIONS=window.CKEDITOR_WARNING_SUPPRESSIONS||{},window.CKEDITOR_WARNING_SUPPRESSIONS[a]||(O(a),window.CKEDITOR_WARNING_SUPPRESSIONS[a]=!0)}if(["evaluation","trial"].includes(o.licenseType)){const a=o.licenseType,h=setTimeout(()=>{y(`${a}Limit`)},6e5);m.on("destroy",()=>{clearTimeout(h)})}o.usageEndpoint&&m.once("ready",()=>{const a={requestId:L(),requestTime:Math.round(Date.now()/1e3),license:b,editor:ze(m)};m._sendUsageRequest(o.usageEndpoint,a).then(h=>{const{status:p,message:g}=h;g&&console.warn(g),p!="ok"&&y("usageLimit")},()=>{fe("license-key-validation-endpoint-not-reachable",{url:o.usageEndpoint})})},{priority:"high"})}}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new c("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new c("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new c("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,n=e.get("plugins"),i=e.get("removePlugins")||[],s=e.get("extraPlugins")||[],l=e.get("substitutePlugins")||[];return this.plugins.init(n.concat(s),i,l)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(n=>this.once("ready",n))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...n){try{return this.commands.execute(e,...n)}catch(i){/* istanbul ignore next -- @preserve */c.rethrowUnexpectedError(i,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}static Context=R;static EditorWatchdog=pe;static ContextWatchdog=be;_showLicenseError(e,n){setTimeout(()=>{if(e=="invalid")throw new c("invalid-license-key");if(e=="expired")throw new c("license-key-expired");if(e=="domainLimit")throw new c("license-key-domain-limit");if(e=="featureNotAllowed")throw new c("license-key-plugin-not-allowed",null,{pluginName:n});if(e=="evaluationLimit")throw new c("license-key-evaluation-limit");if(e=="trialLimit")throw new c("license-key-trial-limit");if(e=="developmentLimit")throw new c("license-key-development-limit");if(e=="usageLimit")throw new c("license-key-usage-limit");if(e=="distributionChannel")throw new c("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(e,n){const i=new Headers({"Content-Type":"application/json"}),s=await fetch(new URL(e),{method:"POST",headers:i,body:JSON.stringify(n)});if(!s.ok)throw new Error(`HTTP Response: ${s.status}`);return s.json()}}function ze(t){const e=ne(t);function n(i,s){if(Q(e,i)!==void 0)throw new c("editor-usage-data-path-already-set",{path:i});Ae(e,i,s)}return t.fire("collectUsageData",{setUsageData:n}),e}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Be(t){if(!ee(t.updateSourceElement))throw new c("attachtoform-missing-elementapi-interface",t);const e=t.sourceElement;if(We(e)&&e.form){let n;const i=e.form,s=()=>t.updateSourceElement();ee(i.submit)&&(n=i.submit,i.submit=()=>{s(),n.apply(i)}),i.addEventListener("submit",s),t.on("destroy",()=>{i.removeEventListener("submit",s),n&&(i.submit=n)})}}function We(t){return!!t&&t.tagName.toLowerCase()==="textarea"}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function $e(t){class e extends t{sourceElement;updateSourceElement(i){if(!this.sourceElement)throw new c("editor-missing-sourceelement",this);const s=this.config.get("updateSourceElementOnDestroy"),l=this.sourceElement instanceof HTMLTextAreaElement;if(!s&&!l){z(this.sourceElement,"");return}const f=typeof i=="string"?i:this.data.get();z(this.sourceElement,f)}}return e}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function He(t,e){if(e.ckeditorInstance)throw new c("editor-source-element-already-used",t);e.ckeditorInstance=t,t.once("destroy",()=>{delete e.ckeditorInstance})}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ye extends V{_actions;static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new F({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new c("pendingactions-add-invalid-message",this);const n=new(x());return n.set("message",e),this._actions.add(n),this.hasAny=!0,n}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}export{te as Accessibility,W as Command,H as CommandCollection,R as Context,V as ContextPlugin,j as EditingKeystrokeHandler,Fe as Editor,$e as ElementApiMixin,ke as MultiCommand,Ye as PendingActions,_e as Plugin,U as _DEFAULT_ACCESSIBILITY_GROUP_ID,ne as _getEditorUsageData,Be as attachToForm,He as secureSourceElement};
