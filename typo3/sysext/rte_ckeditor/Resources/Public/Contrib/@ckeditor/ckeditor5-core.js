import{ObservableMixin as x,insertToPriorityArray as V,EmitterMixin as Z,CKEditorError as l,Config as U,Locale as ee,Collection as G,KeystrokeHandler as te,env as E,global as L,uid as T,parseBase64EncodedObject as ie,toArray as ne,crc32 as se,releaseDate as oe,logError as re,setDataInElement as F}from"@ckeditor/ckeditor5-utils";import{Model as ae,StylesProcessor as le,DataController as ce,EditingController as ue,Conversion as de}from"@ckeditor/ckeditor5-engine";import{EditorWatchdog as fe,ContextWatchdog as he}from"@ckeditor/ckeditor5-watchdog";/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class ge extends x(){editor;_disableStack=new Set;constructor(e){super(),this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",z,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",z),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function z(n){n.return=!1,n.stop()}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class B extends x(){editor;_isEnabledBasedOnSelection;_affectsData;_disableStack;constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;const i=e.model.document.selection,c=!(i.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(i);(e.isReadOnly||this._isEnabledBasedOnSelection&&!c)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",W,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",W),this.refresh())}execute(...e){}destroy(){this.stopListening()}}function W(n){n.return=!1,n.stop()}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class me extends B{_childCommandsDefinitions=[];refresh(){}execute(...e){const t=this._getFirstEnabledCommand();return!!t&&t.execute(e)}registerChildCommand(e,t={}){V(this._childCommandsDefinitions,{command:e,priority:t.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const e=this._childCommandsDefinitions.find(({command:t})=>t.isEnabled);return e&&e.command}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class $ extends Z(){_context;_plugins=new Map;_availablePlugins;_contextPlugins;constructor(e,t=[],i=[]){super(),this._context=e,this._availablePlugins=new Map;for(const s of t)s.pluginName&&this._availablePlugins.set(s.pluginName,s);this._contextPlugins=new Map;for(const[s,c]of i)this._contextPlugins.set(s,c),this._contextPlugins.set(c,s),s.pluginName&&this._availablePlugins.set(s.pluginName,s)}*[Symbol.iterator](){for(const e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){const t=this._plugins.get(e);if(!t){let i=e;throw typeof e=="function"&&(i=e.pluginName||e.name),new l("plugincollection-plugin-not-loaded",this._context,{plugin:i})}return t}has(e){return this._plugins.has(e)}init(e,t=[],i=[]){const s=this,c=this._context;p(e),y(e);const h=e.filter(o=>!S(o,t)),d=[...k(h)];O(d,i);const _=N(d);return v(_,"init").then(()=>v(_,"afterInit")).then(()=>_);function b(o){return typeof o=="function"}function P(o){return b(o)&&!!o.isContextPlugin}function S(o,u){return u.some(r=>r===o||m(o)===r||m(r)===o)}function m(o){return b(o)?o.pluginName||o.name:o}function p(o,u=new Set){o.forEach(r=>{b(r)&&(u.has(r)||(u.add(r),r.pluginName&&!s._availablePlugins.has(r.pluginName)&&s._availablePlugins.set(r.pluginName,r),r.requires&&p(r.requires,u)))})}function k(o,u=new Set){return o.map(r=>b(r)?r:s._availablePlugins.get(r)).reduce((r,a)=>u.has(a)?r:(u.add(a),a.requires&&(y(a.requires,a),k(a.requires,u).forEach(f=>r.add(f))),r.add(a)),new Set)}function y(o,u=null){o.map(r=>b(r)?r:s._availablePlugins.get(r)||r).forEach(r=>{C(r,u),D(r,u),I(r,u)})}function C(o,u){if(!b(o))throw u?new l("plugincollection-soft-required",c,{missingPlugin:o,requiredBy:m(u)}):new l("plugincollection-plugin-not-found",c,{plugin:o})}function D(o,u){if(P(u)&&!P(o))throw new l("plugincollection-context-required",c,{plugin:m(o),requiredBy:m(u)})}function I(o,u){if(u&&S(o,t))throw new l("plugincollection-required",c,{plugin:m(o),requiredBy:m(u)})}function N(o){return o.map(u=>{let r=s._contextPlugins.get(u);return r=r||new u(c),s._add(u,r),r})}function v(o,u){return o.reduce((r,a)=>!a[u]||s._contextPlugins.has(a)?r:r.then(a[u].bind(a)),Promise.resolve())}function O(o,u){for(const r of u){if(typeof r!="function")throw new l("plugincollection-replace-plugin-invalid-type",null,{pluginItem:r});const a=r.pluginName;if(!a)throw new l("plugincollection-replace-plugin-missing-name",null,{pluginItem:r});if(r.requires&&r.requires.length)throw new l("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:a});const f=s._availablePlugins.get(a);if(!f)throw new l("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:a});const w=o.indexOf(f);if(w===-1){if(s._contextPlugins.has(f))return;throw new l("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:a})}if(f.requires&&f.requires.length)throw new l("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:a});o.splice(w,1,r),s._availablePlugins.set(a,r)}}}destroy(){const e=[];for(const[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);const i=e.pluginName;if(i){if(this._plugins.has(i))throw new l("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class A{config;plugins;locale;t;editors;static defaultConfig;static builtinPlugins;_contextOwner=null;constructor(e){const{translations:t,...i}=e||{};this.config=new U(i,this.constructor.defaultConfig);const s=this.constructor.builtinPlugins;this.config.define("plugins",s),this.plugins=new $(this,s);const c=this.config.get("language")||{};this.locale=new ee({uiLanguage:typeof c=="string"?c:c.ui,contentLanguage:this.config.get("language.content"),translations:t}),this.t=this.locale.t,this.editors=new G}initPlugins(){const e=this.config.get("plugins")||[],t=this.config.get("substitutePlugins")||[];for(const i of e.concat(t)){if(typeof i!="function")throw new l("context-initplugins-constructor-only",null,{Plugin:i});if(i.isContextPlugin!==!0)throw new l("context-initplugins-invalid-plugin",null,{Plugin:i})}return this.plugins.init(e,[],t)}destroy(){return Promise.all(Array.from(this.editors,e=>e.destroy())).then(()=>this.plugins.destroy())}_addEditor(e,t){if(this._contextOwner)throw new l("context-addeditor-private-context");this.editors.add(e),t&&(this._contextOwner=e)}_removeEditor(e){return this.editors.has(e)&&this.editors.remove(e),this._contextOwner===e?this.destroy():Promise.resolve()}_getEditorConfig(){const e={};for(const t of this.config.names())["plugins","removePlugins","extraPlugins"].includes(t)||(e[t]=this.config.get(t));return e}static create(e){return new Promise(t=>{const i=new this(e);t(i.initPlugins().then(()=>i))})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class H extends x(){context;constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function j(n){return typeof n=="function"}function ye(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}function we(n){return Object.is(n,-0)?"-0":n.toString()}function Y(n){const e=[],t=n.length;if(t===0)return e;let i=0,s="",c="",h=!1;for(n.charCodeAt(0)===46&&(e.push(""),i++);i<t;){const d=n[i];c?d==="\\"&&i+1<t?(i++,s+=n[i]):d===c?c="":s+=d:h?d==='"'||d==="'"?c=d:d==="]"?(h=!1,e.push(s),s=""):s+=d:d==="["?(h=!0,s&&(e.push(s),s="")):d==="."?s&&(e.push(s),s=""):s+=d,i++}return s&&e.push(s),e}function J(n,e,t){if(n==null)return t;switch(typeof e){case"string":{const i=n[e];return i===void 0?ye(e)?J(n,Y(e),t):t:i}case"number":case"symbol":{typeof e=="number"&&(e=we(e));const i=n[e];return i===void 0?t:i}default:{if(Array.isArray(e))return pe(n,e,t);Object.is(e?.valueOf(),-0)?e="-0":e=String(e);const i=n[e];return i===void 0?t:i}}}function pe(n,e,t){if(e.length===0)return t;let i=n;for(let s=0;s<e.length;s++){if(i==null)return t;i=i[e[s]]}return i===void 0?t:i}const be=/^(?:0|[1-9]\d*)$/;function _e(n,e=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<e;case"symbol":return!1;case"string":return be.test(n)}}function Ee(n,e,t){const i=Array.isArray(e)?e:typeof e=="string"?Y(e):[e];let s=n;for(let h=0;h<i.length-1;h++){const d=i[h],_=i[h+1];s[d]==null&&(s[d]=_e(_)?[]:{}),s=s[d]}const c=i[i.length-1];return s[c]=t,n}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class ke{_commands;constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){const i=this.get(e);if(!i)throw new l("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const e of this.commands())e.destroy()}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class xe extends te{editor;constructor(e){super(),this.editor=e}set(e,t,i={}){if(typeof t=="string"){const s=t;t=(c,h)=>{this.editor.execute(s),h()}}super.set(e,t,i)}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const R="contentEditing",X="common";class Pe{keystrokeInfos=new Map;_editor;constructor(e){this._editor=e;const t=e.config.get("menuBar.isVisible"),i=e.locale.t;this.addKeystrokeInfoCategory({id:R,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});const s=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&s.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:s}]})}addKeystrokeInfoCategory({id:e,label:t,description:i,groups:s}){this.keystrokeInfos.set(e,{id:e,label:t,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:X}),s&&s.forEach(c=>{this.addKeystrokeInfoGroup({categoryId:e,...c})})}addKeystrokeInfoGroup({categoryId:e=R,id:t,label:i,keystrokes:s}){const c=this.keystrokeInfos.get(e);if(!c)throw new l("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});c.groups.set(t,{id:t,label:i,keystrokes:s||[]})}addKeystrokeInfos({categoryId:e=R,groupId:t=X,keystrokes:i}){if(!this.keystrokeInfos.has(e))throw new l("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:i});const s=this.keystrokeInfos.get(e);if(!s.groups.has(t))throw new l("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:i});s.groups.get(t).keystrokes.push(...i)}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Se(n){return{sessionId:Ie(),pageSessionId:Ne(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:ve(n),plugins:Oe(n.plugins),distribution:Ce(),env:De(),integration:Object.create(null),menuBar:{isVisible:!!n.config.get("menuBar.isVisible")},language:{ui:n.locale.uiLanguage,content:n.locale.contentLanguage},toolbar:{main:K(n.config.get("toolbar")),block:K(n.config.get("blockToolbar")),balloon:K(n.config.get("balloonToolbar"))}}}function ve(n){return Object.getPrototypeOf(n).constructor.editorName}function Oe(n){return Array.from(n).filter(([e])=>!!e.pluginName).map(([e])=>{const{pluginName:t,isContextPlugin:i,isOfficialPlugin:s,isPremiumPlugin:c}=e;return{isContext:!!i,isOfficial:!!s,isPremium:!!c,name:t}})}function K(n){if(!n)return;const e=Array.isArray(n)?{items:n}:n,t=c(e.items||[]);return{isMultiline:t.includes("-"),shouldNotGroupWhenFull:!!e.shouldNotGroupWhenFull,items:s(t)};function s(h){return h.filter(d=>d!=="|"&&d!=="-")}function c(h){return h.flatMap(d=>typeof d=="string"?[d]:c(d.items))}}function Ce(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function De(){let n="unknown",e="unknown";return E.isMac?n="mac":E.isWindows?n="windows":E.isiOS?n="ios":E.isAndroid&&(n="android"),E.isGecko?e="gecko":E.isBlink?e="blink":E.isSafari&&(e="safari"),{os:n,browser:e}}function Ie(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",T()),localStorage.getItem("__ckeditor-session-id")}function Ne(){return L.window.CKEDITOR_PAGE_SESSION_ID=L.window.CKEDITOR_PAGE_SESSION_ID||T(),L.window.CKEDITOR_PAGE_SESSION_ID}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Le extends x(){static get editorName(){return"Editor"}accessibility;commands;config;conversion;data;editing;locale;model;plugins;keystrokes;t;static defaultConfig;static builtinPlugins;_context;_readOnlyLocks;constructor(e={}){if(super(),"sanitizeHtml"in e)throw new l("editor-config-sanitizehtml-not-supported");const t=this.constructor,{translations:i,...s}=t.defaultConfig||{},{translations:c=i,...h}=e,d=e.language||s.language;this._context=e.context||new A({language:d,translations:c}),this._context._addEditor(this,!e.context);const _=Array.from(t.builtinPlugins||[]);this.config=new U(h,s),this.config.define("plugins",_),this.config.define(this._context._getEditorConfig()),P(this.config),this.plugins=new $(this,_,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new ke,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new ae,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const b=new le;this.data=new ce(this.model,b),this.editing=new ue(this.model,b),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new de([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new xe(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new Pe(this),S(this);function P(m){let p=m.get("licenseKey");if(!p&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(p=window.CKEDITOR_GLOBAL_LICENSE_KEY,m.set("licenseKey",p)),!p)throw new l("license-key-missing")}function S(m){const p=m.config.get("licenseKey"),k=window[Symbol.for("cke distribution")]||"sh";function y(a){m.enableReadOnlyMode(Symbol("invalidLicense")),m._showLicenseError(a)}function C(a){const f=a.split(".");return f.length!=3?null:f[1]}function D(a){return["exp","jti","vc"].every(w=>w in a)}function I(a){return Object.getOwnPropertyNames(a).sort().filter(g=>g!="vc"&&a[g]!=null).map(g=>a[g])}function N(a){const{hostname:f}=new URL(window.location.href);if(a.includes(f))return!0;const w=f.split(".");return a.filter(g=>g.includes("*")).map(g=>g.split(".")).filter(g=>g.length<=w.length).map(g=>Array(w.length-g.length).fill(g[0]==="*"?"*":"").concat(g)).some(g=>w.every((Q,q)=>g[q]===Q||g[q]==="*"))}function v(a){const f=a[0].toUpperCase()+a.slice(1),w=a==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${f} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`\u26A0\uFE0F You are using ${w} ${a} license of CKEditor 5${a==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(p=="GPL"){k=="cloud"&&y("distributionChannel");return}const O=C(p);if(!O){y("invalid");return}const o=ie(O);if(!o){y("invalid");return}if(!D(o)){y("invalid");return}if(o.distributionChannel&&!ne(o.distributionChannel).includes(k)){y("distributionChannel");return}if(se(I(o))!=o.vc.toLowerCase()){y("invalid");return}if(new Date(o.exp*1e3)<oe){y("expired");return}const r=o.licensedHosts;if(r&&r.length>0&&!N(r)){y("domainLimit");return}if(["evaluation","trial"].includes(o.licenseType)&&o.exp*1e3<Date.now()){y("expired");return}if(["development","evaluation","trial"].includes(o.licenseType)){const{licenseType:a}=o;window.CKEDITOR_WARNING_SUPPRESSIONS=window.CKEDITOR_WARNING_SUPPRESSIONS||{},window.CKEDITOR_WARNING_SUPPRESSIONS[a]||(v(a),window.CKEDITOR_WARNING_SUPPRESSIONS[a]=!0)}if(["evaluation","trial"].includes(o.licenseType)){const a=o.licenseType,f=setTimeout(()=>{y(`${a}Limit`)},6e5);m.on("destroy",()=>{clearTimeout(f)})}o.usageEndpoint&&m.once("ready",()=>{const a={requestId:T(),requestTime:Math.round(Date.now()/1e3),license:p,editor:Te(m)};m._sendUsageRequest(o.usageEndpoint,a).then(f=>{const{status:w,message:g}=f;g&&console.warn(g),w!="ok"&&y("usageLimit")},()=>{re("license-key-validation-endpoint-not-reachable",{url:o.usageEndpoint})})},{priority:"high"})}}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(e){throw new l("editor-isreadonly-has-no-setter")}enableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new l("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)||(this._readOnlyLocks.add(e),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(e){if(typeof e!="string"&&typeof e!="symbol")throw new l("editor-read-only-lock-id-invalid",null,{lockId:e});this._readOnlyLocks.has(e)&&(this._readOnlyLocks.delete(e),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(e){this.data.set(e)}getData(e){return this.data.get(e)}initPlugins(){const e=this.config,t=e.get("plugins"),i=e.get("removePlugins")||[],s=e.get("extraPlugins")||[],c=e.get("substitutePlugins")||[];return this.plugins.init(t.concat(s),i,c)}destroy(){let e=Promise.resolve();return this.state=="initializing"&&(e=new Promise(t=>this.once("ready",t))),e.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(e,...t){try{return this.commands.execute(e,...t)}catch(i){/* istanbul ignore next -- @preserve */l.rethrowUnexpectedError(i,this)}}focus(){this.editing.view.focus()}static create(...e){throw new Error("This is an abstract method.")}static Context=A;static EditorWatchdog=fe;static ContextWatchdog=he;_showLicenseError(e,t){setTimeout(()=>{if(e=="invalid")throw new l("invalid-license-key");if(e=="expired")throw new l("license-key-expired");if(e=="domainLimit")throw new l("license-key-domain-limit");if(e=="featureNotAllowed")throw new l("license-key-plugin-not-allowed",null,{pluginName:t});if(e=="evaluationLimit")throw new l("license-key-evaluation-limit");if(e=="trialLimit")throw new l("license-key-trial-limit");if(e=="developmentLimit")throw new l("license-key-development-limit");if(e=="usageLimit")throw new l("license-key-usage-limit");if(e=="distributionChannel")throw new l("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(e,t){const i=new Headers({"Content-Type":"application/json"}),s=await fetch(new URL(e),{method:"POST",headers:i,body:JSON.stringify(t)});if(!s.ok)throw new Error(`HTTP Response: ${s.status}`);return s.json()}}function Te(n){const e=Se(n);function t(i,s){if(J(e,i)!==void 0)throw new l("editor-usage-data-path-already-set",{path:i});Ee(e,i,s)}return n.fire("collectUsageData",{setUsageData:t}),e}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Ae(n){if(!j(n.updateSourceElement))throw new l("attachtoform-missing-elementapi-interface",n);const e=n.sourceElement;if(Re(e)&&e.form){let t;const i=e.form,s=()=>n.updateSourceElement();j(i.submit)&&(t=i.submit,i.submit=()=>{s(),t.apply(i)}),i.addEventListener("submit",s),n.on("destroy",()=>{i.removeEventListener("submit",s),t&&(i.submit=t)})}}function Re(n){return!!n&&n.tagName.toLowerCase()==="textarea"}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Ke(n){return n}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function M(n){class e extends n{sourceElement;updateSourceElement(i){if(!this.sourceElement)throw new l("editor-missing-sourceelement",this);const s=this.config.get("updateSourceElementOnDestroy"),c=this.sourceElement instanceof HTMLTextAreaElement;if(!s&&!c){F(this.sourceElement,"");return}const h=typeof i=="string"?i:this.data.get();F(this.sourceElement,h)}}return e}M.updateSourceElement=M(Object).prototype.updateSourceElement;/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Me(n,e){if(e.ckeditorInstance)throw new l("editor-source-element-already-used",n);e.ckeditorInstance=n,n.once("destroy",()=>{delete e.ckeditorInstance})}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class qe extends H{_actions;static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new G({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new l("pendingactions-add-invalid-message",this);const t=new(x());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}export{B as Command,A as Context,H as ContextPlugin,Ke as DataApiMixin,Le as Editor,M as ElementApiMixin,me as MultiCommand,qe as PendingActions,ge as Plugin,Ae as attachToForm,Me as secureSourceElement};
