import{Plugin as g}from"@ckeditor/ckeditor5-core";import{toArray as P,priorities as C,CKEditorError as xe,isValidAttributeName as Te,uid as Z,logWarning as Re,global as ee}from"@ckeditor/ckeditor5-utils";import{Matcher as te,StylesMap as Ne,UpcastWriter as U,HtmlDataProcessor as Me}from"@ckeditor/ckeditor5-engine";import{toWidget as re,Widget as He}from"@ckeditor/ckeditor5-widget";import{Enter as Ve}from"@ckeditor/ckeditor5-enter";function Le(){}function z(t){return t==null||typeof t!="object"&&typeof t!="function"}function W(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Ue(t){if(z(t))return t;if(Array.isArray(t)||W(t)||t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);const e=Object.getPrototypeOf(t),i=e.constructor;if(t instanceof Date||t instanceof Map||t instanceof Set)return new i(t);if(t instanceof RegExp){const r=new i(t);return r.lastIndex=t.lastIndex,r}if(t instanceof DataView)return new i(t.buffer.slice(0));if(t instanceof Error){const r=new i(t.message);return r.stack=t.stack,r.name=t.name,r.cause=t.cause,r}if(typeof File<"u"&&t instanceof File)return new i([t],t.name,{type:t.type,lastModified:t.lastModified});if(typeof t=="object"){const r=Object.create(e);return Object.assign(r,t)}return t}function ie(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(t)==="[object Object]":!1}function oe(t){return typeof t=="object"&&t!==null}function j(t){return Object.getOwnPropertySymbols(t).filter(e=>Object.prototype.propertyIsEnumerable.call(t,e))}function x(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const ne="[object RegExp]",q="[object String]",K="[object Number]",G="[object Boolean]",T="[object Arguments]",se="[object Symbol]",le="[object Date]",me="[object Map]",ce="[object Set]",ae="[object Array]",ze="[object Function]",ue="[object ArrayBuffer]",R="[object Object]",We="[object Error]",de="[object DataView]",fe="[object Uint8Array]",he="[object Uint8ClampedArray]",ge="[object Uint16Array]",be="[object Uint32Array]",qe="[object BigUint64Array]",pe="[object Int8Array]",we="[object Int16Array]",ye="[object Int32Array]",Ke="[object BigInt64Array]",Ae="[object Float32Array]",Ee="[object Float64Array]";function Ge(t,e){return S(t,void 0,t,new Map,e)}function S(t,e,i,r=new Map,o=void 0){const n=o?.(t,e,i,r);if(n!=null)return n;if(z(t))return t;if(r.has(t))return r.get(t);if(Array.isArray(t)){const s=new Array(t.length);r.set(t,s);for(let l=0;l<t.length;l++)s[l]=S(t[l],l,i,r,o);return Object.hasOwn(t,"index")&&(s.index=t.index),Object.hasOwn(t,"input")&&(s.input=t.input),s}if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){const s=new RegExp(t.source,t.flags);return s.lastIndex=t.lastIndex,s}if(t instanceof Map){const s=new Map;r.set(t,s);for(const[l,m]of t)s.set(l,S(m,l,i,r,o));return s}if(t instanceof Set){const s=new Set;r.set(t,s);for(const l of t)s.add(S(l,void 0,i,r,o));return s}if(typeof Buffer<"u"&&Buffer.isBuffer(t))return t.subarray();if(W(t)){const s=new(Object.getPrototypeOf(t)).constructor(t.length);r.set(t,s);for(let l=0;l<t.length;l++)s[l]=S(t[l],l,i,r,o);return s}if(t instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&t instanceof SharedArrayBuffer)return t.slice(0);if(t instanceof DataView){const s=new DataView(t.buffer.slice(0),t.byteOffset,t.byteLength);return r.set(t,s),E(s,t,i,r,o),s}if(typeof File<"u"&&t instanceof File){const s=new File([t],t.name,{type:t.type});return r.set(t,s),E(s,t,i,r,o),s}if(t instanceof Blob){const s=new Blob([t],{type:t.type});return r.set(t,s),E(s,t,i,r,o),s}if(t instanceof Error){const s=new t.constructor;return r.set(t,s),s.message=t.message,s.name=t.name,s.stack=t.stack,s.cause=t.cause,E(s,t,i,r,o),s}if(typeof t=="object"&&Xe(t)){const s=Object.create(Object.getPrototypeOf(t));return r.set(t,s),E(s,t,i,r,o),s}return t}function E(t,e,i=t,r,o){const n=[...Object.keys(e),...j(e)];for(let s=0;s<n.length;s++){const l=n[s],m=Object.getOwnPropertyDescriptor(t,l);(m==null||m.writable)&&(t[l]=S(e[l],l,i,r,o))}}function Xe(t){switch(x(t)){case T:case ae:case ue:case de:case G:case le:case Ae:case Ee:case pe:case we:case ye:case me:case K:case R:case ne:case ce:case q:case se:case fe:case he:case ge:case be:return!0;default:return!1}}function Ye(t,e){return t===e||Number.isNaN(t)&&Number.isNaN(e)}function Qe(t,e,i){return I(t,e,void 0,void 0,void 0,void 0,i)}function I(t,e,i,r,o,n,s){const l=s(t,e,i,r,o,n);if(l!==void 0)return l;if(typeof t==typeof e)switch(typeof t){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return t===e;case"number":return t===e||Object.is(t,e);case"function":return t===e;case"object":return $(t,e,n,s)}return $(t,e,n,s)}function $(t,e,i,r){if(Object.is(t,e))return!0;let o=x(t),n=x(e);if(o===T&&(o=R),n===T&&(n=R),o!==n)return!1;switch(o){case q:return t.toString()===e.toString();case K:{const m=t.valueOf(),c=e.valueOf();return Ye(m,c)}case G:case le:case se:return Object.is(t.valueOf(),e.valueOf());case ne:return t.source===e.source&&t.flags===e.flags;case ze:return t===e}i=i??new Map;const s=i.get(t),l=i.get(e);if(s!=null&&l!=null)return s===e;i.set(t,e),i.set(e,t);try{switch(o){case me:{if(t.size!==e.size)return!1;for(const[m,c]of t.entries())if(!e.has(m)||!I(c,e.get(m),m,t,e,i,r))return!1;return!0}case ce:{if(t.size!==e.size)return!1;const m=Array.from(t.values()),c=Array.from(e.values());for(let a=0;a<m.length;a++){const u=m[a],d=c.findIndex(h=>I(u,h,void 0,t,e,i,r));if(d===-1)return!1;c.splice(d,1)}return!0}case ae:case fe:case he:case ge:case be:case qe:case pe:case we:case ye:case Ke:case Ae:case Ee:{if(typeof Buffer<"u"&&Buffer.isBuffer(t)!==Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let m=0;m<t.length;m++)if(!I(t[m],e[m],m,t,e,i,r))return!1;return!0}case ue:return t.byteLength!==e.byteLength?!1:$(new Uint8Array(t),new Uint8Array(e),i,r);case de:return t.byteLength!==e.byteLength||t.byteOffset!==e.byteOffset?!1:$(new Uint8Array(t),new Uint8Array(e),i,r);case We:return t.name===e.name&&t.message===e.message;case R:{if(!($(t.constructor,e.constructor,i,r)||ie(t)&&ie(e)))return!1;const c=[...Object.keys(t),...j(t)],a=[...Object.keys(e),...j(e)];if(c.length!==a.length)return!1;for(let u=0;u<c.length;u++){const d=c[u],h=t[d];if(!Object.hasOwn(e,d))return!1;const p=e[d];if(!I(h,p,d,t,e,i,r))return!1}return!0}default:return!1}}finally{i.delete(t),i.delete(e)}}function ve(t,e){return Qe(t,e,Le)}const Je=/\p{Lu}?\p{Ll}+|[0-9]+|\p{Lu}+(?!\p{Ll})|\p{Emoji_Presentation}|\p{Extended_Pictographic}|\p{L}+/gu;function Ze(t){return Array.from(t.match(Je)??[])}function et(t,e){return Ge(t,(i,r,o,n)=>{if(typeof t=="object")switch(Object.prototype.toString.call(t)){case K:case q:case G:{const s=new t.constructor(t?.valueOf());return E(s,t),s}case T:{const s={};return E(s,t),s.length=t.length,s[Symbol.iterator]=t[Symbol.iterator],s}default:return}})}function X(t){return et(t)}function Se(t){return t!==null&&typeof t=="object"&&x(t)==="[object Arguments]"}function ke(t){if(t==null)return"";if(Array.isArray(t))return t.map(ke).join(",");const e=String(t);return e==="0"&&Object.is(Number(t),-0)?"-0":e}function tt(t){return W(t)}function Oe(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const i=t[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${i}]`}let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function rt(t,...e){const i=e.slice(0,-1),r=e[e.length-1];let o=t;for(let n=0;n<i.length;n++){const s=i[n];o=N(o,s,r,new Map)}return o}function N(t,e,i,r){if(z(t)&&(t=Object(t)),e==null||typeof e!="object")return t;if(r.has(e))return Ue(r.get(e));if(r.set(e,t),Array.isArray(e)){e=e.slice();for(let n=0;n<e.length;n++)e[n]=e[n]??void 0}const o=[...Object.keys(e),...j(e)];for(let n=0;n<o.length;n++){const s=o[n];let l=e[s],m=t[s];if(Se(l)&&(l={...l}),Se(m)&&(m={...m}),typeof Buffer<"u"&&Buffer.isBuffer(l)&&(l=X(l)),Array.isArray(l))if(typeof m=="object"&&m!=null){const a=[],u=Reflect.ownKeys(m);for(let d=0;d<u.length;d++){const h=u[d];a[h]=m[h]}m=a}else m=[];const c=i(m,l,s,t,e,r);c!=null?t[s]=c:Array.isArray(l)||oe(m)&&oe(l)?t[s]=N(m,l,i,r):m==null&&Oe(l)?t[s]=N({},l,i,r):m==null&&tt(l)?t[s]=X(l):(m===void 0||l!==void 0)&&(t[s]=l)}return t}function it(t){return typeof t!="string"&&(t=ke(t)),t.replace(/['\u2019]/g,"")}function ot(t){const e=Ze(it(t).trim());let i="";for(let r=0;r<e.length;r++){const o=e[r];i&&(i+=" "),o===o.toUpperCase()?i+=o:i+=o[0].toUpperCase()+o.slice(1).toLowerCase()}return i}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function w(t,e,i,r){e&&nt(t,e,r),i&&y(t,i,r)}function y(t,e,i){if(e.attributes)for(const[r,o]of Object.entries(e.attributes))t.setAttribute(r,o,i);e.styles&&t.setStyle(e.styles,i),e.classes&&t.addClass(e.classes,i)}function nt(t,e,i){if(e.attributes)for(const[r]of Object.entries(e.attributes))t.removeAttribute(r,i);if(e.styles)for(const r of Object.keys(e.styles))t.removeStyle(r,i);e.classes&&t.removeClass(e.classes,i)}function st(t,e){const i=X(t);let r="attributes";for(r in e)r=="classes"?i[r]=Array.from(new Set([...t[r]||[],...e[r]])):i[r]={...t[r],...e[r]};return i}function k(t,e,i,r,o){const n=e.getAttribute(i),s={};for(const l of["attributes","styles","classes"]){if(l!=r){n&&n[l]&&(s[l]=n[l]);continue}if(r=="classes"){const c=new Set(n&&n.classes||[]);o(c),c.size&&(s[l]=Array.from(c));continue}const m=new Map(Object.entries(n&&n[l]||{}));o(m),m.size&&(s[l]=Object.fromEntries(m))}Object.keys(s).length?e.is("documentSelection")?t.setSelectionAttribute(i,s):t.setAttribute(i,s,e):n&&(e.is("documentSelection")?t.removeSelectionAttribute(i):t.removeAttribute(i,e))}function lt(t){return ot(t).replace(/ /g,"")}function b(t){return`html${lt(t)}Attributes`}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Y({model:t}){return(e,i)=>i.writer.createElement(t,{htmlContent:e.getCustomProperty("$rawContent")})}function mt(t,{view:e,isInline:i}){const r=t.t;return(o,{writer:n})=>{const s=r("HTML object"),l=M(e,o,n),m=o.getAttribute(b(e));n.addClass("html-object-embed__content",l),m&&y(n,m,l);const c=n.createContainerElement(i?"span":"div",{class:"html-object-embed","data-html-object-embed-label":s},l);return re(c,n,{label:s})}}function M(t,e,i){return i.createRawElement(t,null,(r,o)=>{o.setContentOf(r,e.getAttribute("htmlContent"))})}function ct({view:t,model:e,allowEmpty:i},r){return n=>{n.on(`element:${t}`,(s,l,m)=>{let c=r.processViewAttributes(l.viewItem,m);if(!(!c&&!m.consumable.test(l.viewItem,{name:!0}))){if(c=c||{},m.consumable.consume(l.viewItem,{name:!0}),l.modelRange||(l=Object.assign(l,m.convertChildren(l.viewItem,l.modelCursor))),i&&l.modelRange.isCollapsed&&Object.keys(c).length){const a=m.writer.createElement("htmlEmptyElement");if(!m.safeInsert(a,l.modelCursor))return;const u=m.getSplitParts(a);l.modelRange=m.writer.createRange(l.modelRange.start,m.writer.createPositionAfter(u[u.length-1])),m.updateConversionResult(a,l),o(a,c,m);return}for(const a of l.modelRange.getItems())o(a,c,m)}},{priority:"low"})};function o(n,s,l){if(l.schema.checkAttribute(n,e)){const m=n.getAttribute(e),c=st(s,m||{});l.writer.setAttribute(e,c,n)}}}function Fe({model:t,view:e},i){return(r,{writer:o,consumable:n})=>{if(!r.hasAttribute(t))return null;const s=o.createContainerElement(e),l=r.getAttribute(t);return n.consume(r,`attribute:${t}`),y(o,l,s),s.getFillerOffset=()=>null,i?re(s,o):s}}function at({priority:t,view:e}){return(i,r)=>{if(!i)return;const{writer:o}=r,n=o.createAttributeElement(e,null,{priority:t});return y(o,i,n),n}}function O({view:t},e){return i=>{i.on(`element:${t}`,(r,o,n)=>{if(!o.modelRange||o.modelRange.isCollapsed)return;const s=e.processViewAttributes(o.viewItem,n);s&&n.writer.setAttribute(b(o.viewItem.name),s,o.modelRange)},{priority:"low"})}}function B({view:t,model:e}){return i=>{i.on(`attribute:${b(t)}:${e}`,(r,o,n)=>{if(!n.consumable.consume(o.item,r.name))return;const{attributeOldValue:s,attributeNewValue:l}=o,m=n.writer,c=n.mapper.toViewElement(o.item);w(m,s,l,c)})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/var Pe={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"horizontalLine",view:"hr"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlHr",view:"hr",isEmpty:!0,modelSchema:{inheritAllFrom:"$blockObject"}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class v extends g{_definitions=[];static get pluginName(){return"DataSchema"}static get isOfficialPlugin(){return!0}init(){for(const e of Pe.block)this.registerBlockElement(e);for(const e of Pe.inline)this.registerInlineElement(e)}registerBlockElement(e){this._definitions.push({...e,isBlock:!0})}registerInlineElement(e){this._definitions.push({...e,isInline:!0})}extendBlockElement(e){this._extendDefinition({...e,isBlock:!0})}extendInlineElement(e){this._extendDefinition({...e,isInline:!0})}getDefinitionsForView(e,i=!1){const r=new Set;for(const o of this._getMatchingViewDefinitions(e)){if(i)for(const n of this._getReferences(o.model))r.add(n);r.add(o)}return r}getDefinitionsForModel(e){return this._definitions.filter(i=>i.model==e)}_getMatchingViewDefinitions(e){return this._definitions.filter(i=>i.view&&ut(e,i.view))}*_getReferences(e){const i=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],r=this._definitions.filter(o=>o.model==e);for(const{modelSchema:o}of r)if(o)for(const n of i)for(const s of P(o[n]||[])){const l=this._definitions.filter(m=>m.model==s);for(const m of l)s!==e&&(yield*this._getReferences(m.model),yield m)}}_extendDefinition(e){const i=Array.from(this._definitions.entries()).filter(([,r])=>r.model==e.model);if(i.length==0){this._definitions.push(e);return}for(const[r,o]of i)this._definitions[r]=rt({},o,e,(n,s)=>Array.isArray(n)?n.concat(s):void 0)}}function ut(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):!1}function dt(t,{insertAt:e}={}){if(typeof document>"u")return;const i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",window.litNonce&&r.setAttribute("nonce",window.litNonce),e==="top"&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}dt(":root{--ck-html-object-embed-unfocused-outline-width:1px}.ck-widget.html-object-embed{background-color:var(--ck-color-base-foreground);font-size:var(--ck-font-size-base);min-width:calc(76px + var(--ck-spacing-standard));padding:var(--ck-spacing-small);padding-top:calc(var(--ck-font-size-tiny) + var(--ck-spacing-large))}.ck-widget.html-object-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-object-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.html-object-embed:before{background:#999;border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);content:attr(data-html-object-embed-label);font-family:var(--ck-font-face);font-size:var(--ck-font-size-tiny);font-style:normal;font-weight:400;left:var(--ck-spacing-standard);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-object-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);position:absolute;top:0;transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck-widget.html-object-embed .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck-widget.html-object-embed .html-object-embed__content{pointer-events:none}div.ck-widget.html-object-embed{margin:1em auto}span.ck-widget.html-object-embed{display:inline-block}");/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class f extends g{_dataSchema;_allowedAttributes;_disallowedAttributes;_allowedElements;_disallowedElements;_dataInitialized;_coupledAttributes;constructor(e){super(e),this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new te,this._disallowedAttributes=new te,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get isOfficialPlugin(){return!0}static get requires(){return[v,He]}loadAllowedConfig(e){for(const i of e){const r=i.name||/[\s\S]+/,o=Ie(i);this.allowElement(r),o.forEach(n=>this.allowAttributes(n))}}loadDisallowedConfig(e){for(const i of e){const r=i.name||/[\s\S]+/,o=Ie(i);o.length==0?this.disallowElement(r):o.forEach(n=>this.disallowAttributes(n))}}loadAllowedEmptyElementsConfig(e){for(const i of e)this.allowEmptyElement(i)}allowElement(e){for(const i of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(i),this._coupledAttributes=null}disallowElement(e){for(const i of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(i.view)}allowEmptyElement(e){for(const i of this._dataSchema.getDefinitionsForView(e,!0))i.isInline&&this._dataSchema.extendInlineElement({...i,allowEmpty:!0})}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,i){const{consumable:r}=i;return Ce(e,this._disallowedAttributes,r),ft(e,Ce(e,this._allowedAttributes,r))}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&typeof e.appliesToBlock=="string")for(const i of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))i.isBlock&&this._addAllowedElement(i);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:C.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const e of this._allowedElements)this._fireRegisterEvent(e)},{priority:C.highest+1})}_registerElementHandlers(){this.on("register",(e,i)=>{const r=this.editor.model.schema;if(i.isObject&&!r.isRegistered(i.model))this._registerObjectElement(i);else if(i.isBlock)this._registerBlockElement(i);else if(i.isInline)this._registerInlineElement(i);else throw new xe("data-filter-invalid-definition",null,i);e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const e=this.editor.model,i=e.document.selection;e.document.registerPostFixer(r=>{const o=e.document.differ.getChanges();let n=!1;const s=this._getCoupledAttributesMap();for(const l of o){if(l.type!="attribute"||l.attributeNewValue!==null)continue;const m=s.get(l.attributeKey);if(m)for(const{item:c}of l.range.getWalker())for(const a of m)c.hasAttribute(a)&&(r.removeAttribute(a,c),n=!0)}return n}),this.listenTo(i,"change:attribute",(r,{attributeKeys:o})=>{const n=new Set,s=this._getCoupledAttributesMap();for(const l of o){if(i.hasAttribute(l))continue;const m=s.get(l);if(m)for(const c of m)i.hasAttribute(c)&&n.add(c)}n.size!=0&&e.change(l=>{for(const m of n)l.removeSelectionAttribute(m)})})}_registerAssociatedHtmlAttributesPostFixer(){const e=this.editor.model;e.document.registerPostFixer(i=>{const r=e.document.differ.getChanges();let o=!1;for(const n of r)if(!(n.type!=="insert"||n.name==="$text"))for(const s of n.attributes.keys())!s.startsWith("html")||!s.endsWith("Attributes")||e.schema.checkAttribute(n.name,s)||(i.removeAttribute(s,n.position.nodeAfter),o=!0);return o})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const e of this._allowedElements)if(e.coupledAttribute&&e.model){const i=this._coupledAttributes.get(e.coupledAttribute);i?i.push(e.model):this._coupledAttributes.set(e.coupledAttribute,[e.model])}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?`register:${e.view}`:"register",e)}_registerObjectElement(e){const i=this.editor,r=i.model.schema,o=i.conversion,{view:n,model:s}=e;r.register(s,e.modelSchema);/* istanbul ignore next: paranoid check -- @preserve */n&&(r.extend(e.model,{allowAttributes:[b(n),"htmlContent"]}),i.data.registerRawContentMatcher({name:n}),o.for("upcast").elementToElement({view:n,model:Y(e),converterPriority:C.low+2}),o.for("upcast").add(O(e,this)),o.for("editingDowncast").elementToStructure({model:{name:s,attributes:[b(n)]},view:mt(i,e)}),o.for("dataDowncast").elementToElement({model:s,view:(l,{writer:m})=>M(n,l,m)}),o.for("dataDowncast").add(B(e)))}_registerBlockElement(e){const i=this.editor,r=i.model.schema,o=i.conversion,{view:n,model:s}=e;if(!r.isRegistered(e.model)){if(!e.modelSchema||(r.register(e.model,e.modelSchema),!n))return;o.for("upcast").elementToElement({model:s,view:n,converterPriority:C.low+2}),o.for("downcast").elementToElement({model:s,view:(l,{writer:m})=>e.isEmpty?m.createEmptyElement(n):m.createContainerElement(n)})}n&&(r.extend(e.model,{allowAttributes:b(n)}),o.for("upcast").add(O(e,this)),o.for("downcast").add(B(e)))}_registerInlineElement(e){const i=this.editor,r=i.model.schema,o=i.conversion,n=e.model;if(!e.appliesToBlock&&(r.extend("$text",{allowAttributes:n}),e.attributeProperties&&r.setAttributeProperties(n,e.attributeProperties),o.for("upcast").add(ct(e,this)),o.for("downcast").attributeToElement({model:n,view:at(e)}),!!e.allowEmpty)){if(r.setAttributeProperties(n,{copyFromObject:!1}),!r.isRegistered("htmlEmptyElement")){r.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"});const s=l=>Array.from(l.getAttributeKeys()).some(m=>m.startsWith("html"));i.model.document.registerPostFixer(l=>{const m=i.model.document.differ.getChanges(),c=new Set;for(const a of m)if(a.type!=="remove"){if(a.type==="attribute"&&a.attributeNewValue===null)for(const{item:u}of a.range)u.is("element","htmlEmptyElement")&&!s(u)&&c.add(u);if(a.type==="insert"&&a.position.nodeAfter){const u=a.position.nodeAfter;for(const{item:d}of l.createRangeOn(u))d.is("element","htmlEmptyElement")&&!s(d)&&c.add(d)}}for(const a of c)l.remove(a);return c.size>0})}i.data.htmlProcessor.domConverter.registerInlineObjectMatcher(s=>s.name==e.view&&s.isEmpty&&Array.from(s.getAttributeKeys()).length?{name:!0}:null),o.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:Fe(e,!0)}),o.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:Fe(e)})}}}function Ce(t,e,i){const r=e.matchAll(t)||[],o=t.document.stylesProcessor;return r.reduce((n,{match:s})=>{for(const[l,m]of s.attributes||[])if(l=="style"){const c=m,a=o.getRelatedStyles(c).filter(u=>u.split("-").length>c.split("-").length).sort((u,d)=>d.split("-").length-u.split("-").length);for(const u of a)i.consume(t,{styles:[u]})&&n.styles.push(u);i.consume(t,{styles:[c]})&&n.styles.push(c)}else if(l=="class"){const c=m;i.consume(t,{classes:[c]})&&n.classes.push(c)}else i.consume(t,{attributes:[l]})&&n.attributes.push(l);return n},{attributes:[],classes:[],styles:[]})}function ft(t,{attributes:e,classes:i,styles:r}){return!e.length&&!i.length&&!r.length?null:{...e.length&&{attributes:ht(t,e)},...r.length&&{styles:gt(t,r)},...i.length&&{classes:i}}}function ht(t,e){const i={};for(const r of e){const o=t.getAttribute(r);o!==void 0&&Te(r)&&(i[r]=o)}return i}function gt(t,e){const i=new Ne(t.document.stylesProcessor);for(const r of e){const o=t.getStyle(r);o!==void 0&&i.set(r,o)}return Object.fromEntries(i.getStylesEntries())}function Q(t,e){const{name:i}=t,r=t[e];return Oe(r)?Object.entries(r).map(([o,n])=>({name:i,[e]:{[o]:n}})):Array.isArray(r)?r.map(o=>({name:i,[e]:[o]})):[t]}function Ie(t){const{name:e,attributes:i,classes:r,styles:o}=t,n=[];return i&&n.push(...Q({name:e,attributes:i},"attributes")),r&&n.push(...Q({name:e,classes:r},"classes")),o&&n.push(...Q({name:e,styles:o},"styles")),n}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class bt extends g{static get requires(){return[f]}static get pluginName(){return"CodeBlockElementSupport"}static get isOfficialPlugin(){return!0}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const e=this.editor.plugins.get(f);e.on("register:pre",(i,r)=>{if(r.model!=="codeBlock")return;const o=this.editor,n=o.model.schema,s=o.conversion;n.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),s.for("upcast").add(pt(e)),s.for("downcast").add(wt()),i.stop()})}}function pt(t){return e=>{e.on("element:code",(i,r,o)=>{const n=r.viewItem,s=n.parent;if(!s||!s.is("element","pre"))return;l(s,"htmlPreAttributes"),l(n,"htmlContentAttributes");function l(m,c){const a=t.processViewAttributes(m,o);a&&o.writer.setAttribute(c,a,r.modelRange)}},{priority:"low"})}}function wt(){return t=>{t.on("attribute:htmlPreAttributes:codeBlock",(e,i,r)=>{if(!r.consumable.consume(i.item,e.name))return;const{attributeOldValue:o,attributeNewValue:n}=i,l=r.mapper.toViewElement(i.item).parent;w(r.writer,o,n,l)}),t.on("attribute:htmlContentAttributes:codeBlock",(e,i,r)=>{if(!r.consumable.consume(i.item,e.name))return;const{attributeOldValue:o,attributeNewValue:n}=i,s=r.mapper.toViewElement(i.item);w(r.writer,o,n,s)})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class yt extends g{static get requires(){return[f]}static get pluginName(){return"DualContentModelElementSupport"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(f).on("register",(i,r)=>{const o=r,n=this.editor,s=n.model.schema,l=n.conversion;if(!o.paragraphLikeModel||s.isRegistered(o.model)||s.isRegistered(o.paragraphLikeModel))return;const m={model:o.paragraphLikeModel,view:o.view};s.register(o.model,o.modelSchema),s.register(m.model,{inheritAllFrom:"$block"}),l.for("upcast").elementToElement({view:o.view,model:(c,{writer:a})=>this._hasBlockContent(c)?a.createElement(o.model):a.createElement(m.model),converterPriority:C.low+.5}),l.for("downcast").elementToElement({view:o.view,model:o.model}),this._addAttributeConversion(o),l.for("downcast").elementToElement({view:m.view,model:m.model}),this._addAttributeConversion(m),i.stop()})}_hasBlockContent(e){const i=this.editor.editing.view,r=i.domConverter.blockElements;for(const o of i.createRangeIn(e).getItems())if(o.is("element")&&r.includes(o.name))return!0;return!1}_addAttributeConversion(e){const i=this.editor,r=i.conversion,o=i.plugins.get(f);i.model.schema.extend(e.model,{allowAttributes:b(e.view)}),r.for("upcast").add(O(e,o)),r.for("downcast").add(B(e))}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class At extends g{static get requires(){return[v,Ve]}static get pluginName(){return"HeadingElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("HeadingEditing"))return;const i=e.config.get("heading.options");this.registerHeadingElements(e,i)}registerHeadingElements(e,i){const r=e.plugins.get(v),o=[];for(const n of i)"model"in n&&"view"in n&&(r.registerBlockElement({view:n.view,model:n.model}),o.push(n.model));r.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:o}}),r.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:o}})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function _(t,e,i){const r=t.createRangeOn(e);for(const{item:o}of r.getWalker())if(o.is("element",i))return o}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Et extends g{static get requires(){return[f]}static get pluginName(){return"ImageElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("ImageInlineEditing")&&!e.plugins.has("ImageBlockEditing"))return;const i=e.model.schema,r=e.conversion,o=e.plugins.get(f);o.on("register:figure",()=>{r.for("upcast").add(kt(o))}),o.on("register:img",(n,s)=>{s.model!=="imageBlock"&&s.model!=="imageInline"||(i.isRegistered("imageBlock")&&i.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),i.isRegistered("imageInline")&&i.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),r.for("upcast").add(vt(o)),r.for("downcast").add(Ot()),e.plugins.has("LinkImage")&&r.for("upcast").add(St(o,e)),n.stop())})}}function vt(t){return e=>{e.on("element:img",(i,r,o)=>{if(!r.modelRange)return;const n=r.viewItem,s=t.processViewAttributes(n,o);s&&o.writer.setAttribute("htmlImgAttributes",s,r.modelRange)},{priority:"low"})}}function St(t,e){const i=e.plugins.get("ImageUtils");return r=>{r.on("element:a",(o,n,s)=>{const l=n.viewItem;if(!i.findViewImgElement(l))return;const c=n.modelCursor.parent;if(!c.is("element","imageBlock"))return;const a=t.processViewAttributes(l,s);a&&s.writer.setAttribute("htmlLinkAttributes",a,c)},{priority:"low"})}}function kt(t){return e=>{e.on("element:figure",(i,r,o)=>{const n=r.viewItem;if(!r.modelRange||!n.hasClass("image"))return;const s=t.processViewAttributes(n,o);s&&o.writer.setAttribute("htmlFigureAttributes",s,r.modelRange)},{priority:"low"})}}function Ot(){return t=>{e("htmlImgAttributes"),i("img","htmlImgAttributes"),i("figure","htmlFigureAttributes"),i("a","htmlLinkAttributes");function e(r){t.on(`attribute:${r}:imageInline`,(o,n,s)=>{if(!s.consumable.consume(n.item,o.name))return;const{attributeOldValue:l,attributeNewValue:m}=n,c=s.mapper.toViewElement(n.item);w(s.writer,l,m,c)},{priority:"low"})}function i(r,o){t.on(`attribute:${o}:imageBlock`,(n,s,l)=>{if(!l.consumable.test(s.item,n.name))return;const{attributeOldValue:m,attributeNewValue:c}=s,a=l.mapper.toViewElement(s.item),u=_(l.writer,a,r);u&&(w(l.writer,m,c,u),l.consumable.consume(s.item,n.name))},{priority:"low"}),r==="a"&&t.on("attribute:linkHref:imageBlock",(n,s,l)=>{if(!l.consumable.consume(s.item,"attribute:htmlLinkAttributes:imageBlock"))return;const m=l.mapper.toViewElement(s.item),c=_(l.writer,m,"a");y(l.writer,s.item.getAttribute("htmlLinkAttributes"),c)},{priority:"low"})}}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ft extends g{static get requires(){return[f]}static get pluginName(){return"MediaEmbedElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("MediaEmbed")||e.config.get("mediaEmbed.previewsInData"))return;const i=e.model.schema,r=e.conversion,o=this.editor.plugins.get(f),n=this.editor.plugins.get(v),s=e.config.get("mediaEmbed.elementName");n.registerBlockElement({model:"media",view:s}),o.on("register:figure",()=>{r.for("upcast").add(Ct(o))}),o.on(`register:${s}`,(l,m)=>{m.model==="media"&&(i.extend("media",{allowAttributes:[b(s),"htmlFigureAttributes"]}),r.for("upcast").add(Pt(o,s)),r.for("dataDowncast").add(It(s)),l.stop())})}}function Pt(t,e){const i=(r,o,n)=>{const s=o.viewItem;l(s,b(e));function l(m,c){const a=t.processViewAttributes(m,n);a&&n.writer.setAttribute(c,a,o.modelRange)}};return r=>{r.on(`element:${e}`,i,{priority:"low"})}}function Ct(t){return e=>{e.on("element:figure",(i,r,o)=>{const n=r.viewItem;if(!r.modelRange||!n.hasClass("media"))return;const s=t.processViewAttributes(n,o);s&&o.writer.setAttribute("htmlFigureAttributes",s,r.modelRange)},{priority:"low"})}}function It(t){return e=>{i(t,b(t)),i("figure","htmlFigureAttributes");function i(r,o){e.on(`attribute:${o}:media`,(n,s,l)=>{if(!l.consumable.consume(s.item,n.name))return;const{attributeOldValue:m,attributeNewValue:c}=s,a=l.mapper.toViewElement(s.item),u=_(l.writer,a,r);w(l.writer,m,c,u)})}}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class $t extends g{static get requires(){return[f]}static get pluginName(){return"ScriptElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.plugins.get(f);e.on("register:script",(i,r)=>{const o=this.editor,n=o.model.schema,s=o.conversion;n.register("htmlScript",r.modelSchema),n.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),o.data.registerRawContentMatcher({name:"script"}),s.for("upcast").elementToElement({view:"script",model:Y(r)}),s.for("upcast").add(O(r,e)),s.for("downcast").elementToElement({model:"htmlScript",view:(l,{writer:m})=>M("script",l,m)}),s.for("downcast").add(B(r)),i.stop()})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Bt=["width","max-width","min-width","height","min-height","max-height"];class _t extends g{static get requires(){return[f]}static get pluginName(){return"TableElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("TableEditing"))return;const i=e.model.schema,r=e.conversion,o=e.plugins.get(f),n=e.plugins.get("TableUtils");o.on("register:figure",()=>{r.for("upcast").add(xt(o))}),o.on("register:table",(s,l)=>{l.model==="table"&&(i.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),r.for("upcast").add(jt(o)),r.for("downcast").add(Tt()),e.model.document.registerPostFixer(Dt(e.model,n)),s.stop())})}}function Dt(t,e){return i=>{const r=t.document.differ.getChanges();let o=!1;for(const n of r){if(n.type!="attribute"||n.attributeKey!="headingRows")continue;const s=n.range.start.nodeAfter,l=s.getAttribute("htmlTheadAttributes"),m=s.getAttribute("htmlTbodyAttributes");l&&!n.attributeNewValue?(i.removeAttribute("htmlTheadAttributes",s),o=!0):m&&n.attributeNewValue==e.getRows(s)&&(i.removeAttribute("htmlTbodyAttributes",s),o=!0)}return o}}function jt(t){return e=>{e.on("element:table",(i,r,o)=>{if(!r.modelRange)return;const n=r.viewItem;s(n,"htmlTableAttributes");for(const l of n.getChildren())l.is("element","thead")&&s(l,"htmlTheadAttributes"),l.is("element","tbody")&&s(l,"htmlTbodyAttributes");function s(l,m){const c=t.processViewAttributes(l,o);c&&o.writer.setAttribute(m,c,r.modelRange)}},{priority:"low"})}}function xt(t){return e=>{e.on("element:figure",(i,r,o)=>{const n=r.viewItem;if(!r.modelRange||!n.hasClass("table"))return;const s=t.processViewAttributes(n,o);s&&o.writer.setAttribute("htmlFigureAttributes",s,r.modelRange)},{priority:"low"})}}function Tt(){return t=>{e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes");function e(i,r){t.on(`attribute:${r}:table`,(o,n,s)=>{if(!s.consumable.test(n.item,o.name))return;const l=s.mapper.toViewElement(n.item),m=_(s.writer,l,i);if(m)if(s.consumable.consume(n.item,o.name),r==="htmlTableAttributes"&&l!==m){const c=$e(n.attributeOldValue),a=$e(n.attributeNewValue);w(s.writer,c.tableAttributes,a.tableAttributes,m),w(s.writer,c.figureAttributes,a.figureAttributes,l)}else w(s.writer,n.attributeOldValue,n.attributeNewValue,m)})}}}function $e(t){const e={},i={...t};if(!t||!("styles"in t))return{figureAttributes:e,tableAttributes:i};i.styles={};for(const[r,o]of Object.entries(t.styles))Bt.includes(r)?e.styles={...e.styles,[r]:o}:i.styles={...i.styles,[r]:o};return{figureAttributes:e,tableAttributes:i}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Rt extends g{static get requires(){return[f]}static get pluginName(){return"StyleElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.plugins.get(f);e.on("register:style",(i,r)=>{const o=this.editor,n=o.model.schema,s=o.conversion;n.register("htmlStyle",r.modelSchema),n.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),o.data.registerRawContentMatcher({name:"style"}),s.for("upcast").elementToElement({view:"style",model:Y(r)}),s.for("upcast").add(O(r,e)),s.for("downcast").elementToElement({model:"htmlStyle",view:(l,{writer:m})=>M("style",l,m)}),s.for("downcast").add(B(r)),i.stop()})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Nt extends g{static get requires(){return[f]}static get pluginName(){return"ListElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("ListEditing"))return;const i=e.model.schema,r=e.conversion,o=e.plugins.get(f),n=e.plugins.get("ListEditing"),s=e.plugins.get("ListUtils"),l=["ul","ol","li"];n.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:y}),n.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:y}),n.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:y}),o.on("register",(m,c)=>{if(!l.includes(c.view)||(m.stop(),i.checkAttribute("$block","htmlLiAttributes")))return;const a=l.map(u=>b(u));i.extend("$listItem",{allowAttributes:a}),r.for("upcast").add(u=>{u.on("element:ul",J("htmlUlAttributes",o),{priority:"low"}),u.on("element:ol",J("htmlOlAttributes",o),{priority:"low"}),u.on("element:li",J("htmlLiAttributes",o),{priority:"low"})})}),n.on("postFixer",(m,{listNodes:c,writer:a})=>{for(const{node:u,previousNodeInList:d}of c)if(d){if(d.getAttribute("listType")==u.getAttribute("listType")){const h=Be(d.getAttribute("listType")),p=d.getAttribute(h);!ve(u.getAttribute(h),p)&&a.model.schema.checkAttribute(u,h)&&(a.setAttribute(h,p,u),m.return=!0)}if(d.getAttribute("listItemId")==u.getAttribute("listItemId")){const h=d.getAttribute("htmlLiAttributes");!ve(u.getAttribute("htmlLiAttributes"),h)&&a.model.schema.checkAttribute(u,"htmlLiAttributes")&&(a.setAttribute("htmlLiAttributes",h,u),m.return=!0)}}}),n.on("postFixer",(m,{listNodes:c,writer:a})=>{for(const{node:u}of c){const d=u.getAttribute("listType");!s.isNumberedListType(d)&&u.getAttribute("htmlOlAttributes")&&(a.removeAttribute("htmlOlAttributes",u),m.return=!0),s.isNumberedListType(d)&&u.getAttribute("htmlUlAttributes")&&(a.removeAttribute("htmlUlAttributes",u),m.return=!0)}})}afterInit(){const e=this.editor;if(!e.commands.get("indentList"))return;const i=e.commands.get("indentList");this.listenTo(i,"afterExecute",(r,o)=>{e.model.change(n=>{for(const s of o){const l=Be(s.getAttribute("listType"));e.model.schema.checkAttribute(s,l)&&n.setAttribute(l,{},s)}})})}}function J(t,e){return(i,r,o)=>{const n=r.viewItem;r.modelRange||Object.assign(r,o.convertChildren(r.viewItem,r.modelCursor));const s=e.processViewAttributes(n,o);for(const l of r.modelRange.getItems({shallow:!0}))l.hasAttribute("listItemId")&&(l.hasAttribute("htmlUlAttributes")||l.hasAttribute("htmlOlAttributes")||o.writer.model.schema.checkAttribute(l,t)&&o.writer.setAttribute(t,s||{},l))}}function Be(t){return t==="numbered"||t=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Mt extends g{static get requires(){return[f]}static get pluginName(){return"HorizontalLineElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor;if(!e.plugins.has("HorizontalLineEditing"))return;const i=e.model.schema,r=e.conversion,o=e.plugins.get(f);o.on("register:hr",(n,s)=>{s.model==="horizontalLine"&&(i.extend("horizontalLine",{allowAttributes:["htmlHrAttributes"]}),r.for("upcast").add(O(s,o)),r.for("downcast").add(Ht()),n.stop())})}}function Ht(){return t=>{t.on("attribute:htmlHrAttributes:horizontalLine",(e,i,r)=>{if(!r.consumable.test(i.item,e.name))return;const{attributeOldValue:o,attributeNewValue:n}=i,s=r.mapper.toViewElement(i.item),l=_(r.writer,s,"hr");l&&(w(r.writer,o,n,l),r.consumable.consume(i.item,e.name))},{priority:"low"})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Vt extends g{static get requires(){return[f,v]}static get pluginName(){return"CustomElementSupport"}static get isOfficialPlugin(){return!0}init(){const e=this.editor.plugins.get(f),i=this.editor.plugins.get(v);e.on("register:$customElement",(r,o)=>{r.stop();const n=this.editor,s=n.model.schema,l=n.conversion,m=n.editing.view.domConverter.unsafeElements,c=n.data.htmlProcessor.domConverter.preElements;s.register(o.model,o.modelSchema),s.extend(o.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),n.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),l.for("upcast").elementToElement({view:/.*/,model:(a,u)=>{if(a.name=="$comment"||!Lt(a.name)||i.getDefinitionsForView(a.name).size)return null;m.includes(a.name)||m.push(a.name),c.includes(a.name)||c.push(a.name);const d=u.writer.createElement(o.model,{htmlElementName:a.name}),h=e.processViewAttributes(a,u);h&&u.writer.setAttribute("htmlCustomElementAttributes",h,d);let p;if(a.is("element","template")&&a.getCustomProperty("$rawContent"))p=a.getCustomProperty("$rawContent");else{const H=new U(a.document).createDocumentFragment(a),V=n.data.htmlProcessor.domConverter.viewToDom(H),L=V.firstChild;for(;L.firstChild;)V.appendChild(L.firstChild);L.remove(),p=n.data.htmlProcessor.htmlWriter.getHtml(V)}u.writer.setAttribute("htmlContent",p,d);for(const{item:D}of n.editing.view.createRangeIn(a))u.consumable.consume(D,{name:!0});return d},converterPriority:"low"}),l.for("editingDowncast").elementToElement({model:{name:o.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(a,{writer:u})=>{const d=a.getAttribute("htmlElementName"),h=u.createRawElement(d);return a.hasAttribute("htmlCustomElementAttributes")&&y(u,a.getAttribute("htmlCustomElementAttributes"),h),h}}),l.for("dataDowncast").elementToElement({model:{name:o.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(a,{writer:u})=>{const d=a.getAttribute("htmlElementName"),h=a.getAttribute("htmlContent"),p=u.createRawElement(d,null,(D,H)=>{H.setContentOf(D,h)});return a.hasAttribute("htmlCustomElementAttributes")&&y(u,a.getAttribute("htmlCustomElementAttributes"),p),p}})})}}function Lt(t){try{document.createElement(t)}catch{return!1}return!0}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ut extends g{static get pluginName(){return"GeneralHtmlSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[f,bt,yt,At,Et,Ft,$t,_t,Rt,Nt,Mt,Vt]}init(){const e=this.editor,i=e.plugins.get(f);i.loadAllowedEmptyElementsConfig(e.config.get("htmlSupport.allowEmpty")||[]),i.loadAllowedConfig(e.config.get("htmlSupport.allow")||[]),i.loadDisallowedConfig(e.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(e){const i=this.editor.plugins.get("DataSchema"),r=Array.from(i.getDefinitionsForView(e,!1)),o=r.find(n=>n.isInline&&!r[0].isObject);return o?o.model:b(e)}addModelHtmlClass(e,i,r){const o=this.editor.model,n=this.getGhsAttributeNameForElement(e);o.change(s=>{for(const l of F(o,r,n))k(s,l,n,"classes",m=>{for(const c of P(i))m.add(c)})})}removeModelHtmlClass(e,i,r){const o=this.editor.model,n=this.getGhsAttributeNameForElement(e);o.change(s=>{for(const l of F(o,r,n))k(s,l,n,"classes",m=>{for(const c of P(i))m.delete(c)})})}setModelHtmlAttributes(e,i,r){const o=this.editor.model,n=this.getGhsAttributeNameForElement(e);o.change(s=>{for(const l of F(o,r,n))k(s,l,n,"attributes",m=>{for(const[c,a]of Object.entries(i))m.set(c,a)})})}removeModelHtmlAttributes(e,i,r){const o=this.editor.model,n=this.getGhsAttributeNameForElement(e);o.change(s=>{for(const l of F(o,r,n))k(s,l,n,"attributes",m=>{for(const c of P(i))m.delete(c)})})}setModelHtmlStyles(e,i,r){const o=this.editor.model,n=this.getGhsAttributeNameForElement(e);o.change(s=>{for(const l of F(o,r,n))k(s,l,n,"styles",m=>{for(const[c,a]of Object.entries(i))m.set(c,a)})})}removeModelHtmlStyles(e,i,r){const o=this.editor.model,n=this.getGhsAttributeNameForElement(e);o.change(s=>{for(const l of F(o,r,n))k(s,l,n,"styles",m=>{for(const c of P(i))m.delete(c)})})}}function*F(t,e,i){if(e)if(!(Symbol.iterator in e)&&e.is("documentSelection")&&e.isCollapsed)t.schema.checkAttributeInSelection(e,i)&&(yield e);else for(const r of zt(t,e,i))yield*r.getItems({shallow:!0})}function zt(t,e,i){return!(Symbol.iterator in e)&&(e.is("node")||e.is("$text")||e.is("$textProxy"))?t.schema.checkAttribute(e,i)?[t.createRangeOn(e)]:[]:t.schema.getValidRanges(t.createSelection(e).getRanges(),i)}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Wt extends g{static get pluginName(){return"HtmlComment"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,i=new Map;e.data.processor.skipComments=!1,e.model.schema.addAttributeCheck((r,o)=>{if(r.endsWith("$root")&&o.startsWith("$comment"))return!0}),e.conversion.for("upcast").elementToMarker({view:"$comment",model:r=>{const n=`$comment:${Z()}`,s=r.getCustomProperty("$rawContent");return i.set(n,s),n}}),e.conversion.for("dataDowncast").markerToElement({model:"$comment",view:(r,{writer:o})=>{let n;for(const c of this.editor.model.document.getRootNames())if(n=this.editor.model.document.getRoot(c),n.hasAttribute(r.markerName))break;const s=r.markerName,l=n.getAttribute(s),m=o.createUIElement("$comment");return o.setCustomProperty("$rawContent",l,m),m}}),e.model.document.registerPostFixer(r=>{let o=!1;const n=e.model.document.differ.getChangedMarkers().filter(s=>s.name.startsWith("$comment:"));for(const s of n){const{oldRange:l,newRange:m}=s.data;if(!(l&&m&&l.root==m.root)){if(l){const c=l.root;c.hasAttribute(s.name)&&(r.removeAttribute(s.name,c),o=!0)}if(m){const c=m.root;c.rootName=="$graveyard"?(r.removeMarker(s.name),o=!0):c.hasAttribute(s.name)||(r.setAttribute(s.name,i.get(s.name)||"",c),o=!0)}}}return o}),e.data.on("set",()=>{for(const r of e.model.markers.getMarkersGroup("$comment"))this.removeHtmlComment(r.name)},{priority:"high"}),e.model.on("deleteContent",(r,[o])=>{for(const n of o.getRanges()){const s=e.model.schema.getLimitElement(n),l=e.model.createPositionAt(s,0),m=e.model.createPositionAt(s,"end");let c;l.isTouching(n.start)&&m.isTouching(n.end)?c=this.getHtmlCommentsInRange(e.model.createRange(l,m)):c=this.getHtmlCommentsInRange(n,{skipBoundaries:!0});for(const a of c)this.removeHtmlComment(a)}},{priority:"high"})}createHtmlComment(e,i){const r=Z(),n=this.editor.model,s=n.document.getRoot(e.root.rootName),l=`$comment:${r}`;return n.change(m=>{const c=m.createRange(e);return m.addMarker(l,{usingOperation:!0,affectsData:!0,range:c}),m.setAttribute(l,i,s),l})}removeHtmlComment(e){const i=this.editor,r=i.model.markers.get(e);return r?(i.model.change(o=>{o.removeMarker(r)}),!0):!1}getHtmlCommentData(e){const r=this.editor.model.markers.get(e);if(!r)return null;let o="";for(const n of this.editor.model.document.getRoots())if(n.hasAttribute(e)){o=n.getAttribute(e);break}return{content:o,position:r.getStart()}}getHtmlCommentsInRange(e,{skipBoundaries:i=!1}={}){const r=!i;return Array.from(this.editor.model.markers.getMarkersGroup("$comment")).filter(n=>o(n,e)).map(n=>n.name);function o(n,s){const l=n.getRange().start;return(l.isAfter(s.start)||r&&l.isEqual(s.start))&&(l.isBefore(s.end)||r&&l.isEqual(s.end))}}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class _e extends Me{toView(e){if(!/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4)))return super.toView(e);let i="",r="";e=e.trim().replace(/<\?xml\s[^?]*\?>/i,m=>(r=m,"")),e=e.trim().replace(/^<!DOCTYPE\s[^>]*?>/i,m=>(i=m,""));const o=this._toDom(e),n=this.domConverter.domToView(o,{skipComments:this.skipComments}),s=new U(n.document);s.setCustomProperty("$fullPageDocument",o.ownerDocument.documentElement.outerHTML,n);const l=Array.from(o.ownerDocument.querySelectorAll("head style"));return s.setCustomProperty("$fullPageHeadStyles",l,n),i&&s.setCustomProperty("$fullPageDocType",i,n),r&&s.setCustomProperty("$fullPageXmlDeclaration",r,n),n}toData(e){let i=super.toData(e);const r=e.getCustomProperty("$fullPageDocument"),o=e.getCustomProperty("$fullPageDocType"),n=e.getCustomProperty("$fullPageXmlDeclaration");return r&&(i=r.replace(/<\/body\s*>/,i+"$&"),o&&(i=o+`
`+i),n&&(i=n+`
`+i)),i}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class qt extends g{static get pluginName(){return"FullPage"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("htmlSupport.fullPage",{allowRenderStylesFromHead:!1,sanitizeCss:i=>(Re("css-full-page-provide-sanitize-function"),{css:i,hasChanged:!1})}),e.data.processor=new _e(e.data.viewDocument)}init(){const e=this.editor,i=["$fullPageDocument","$fullPageDocType","$fullPageXmlDeclaration","$fullPageHeadStyles"];e.model.schema.extend("$root",{allowAttributes:i}),e.data.on("toModel",(r,[o])=>{const n=e.model.document.getRoot();e.model.change(s=>{for(const l of i){const m=o.getCustomProperty(l);m&&s.setAttribute(l,m,n)}}),De(e)&&this._renderStylesFromHead(n)},{priority:"low"}),e.data.on("toView",(r,[o])=>{if(!o.is("rootElement"))return;const n=o,s=r.return;if(!n.hasAttribute("$fullPageDocument"))return;const l=new U(s.document);for(const m of i){const c=n.getAttribute(m);c&&l.setCustomProperty(m,c,s)}},{priority:"low"}),e.data.on("set",()=>{const r=e.model.document.getRoot();e.model.change(o=>{for(const n of i)r.hasAttribute(n)&&o.removeAttribute(n,r)})},{priority:"high"}),e.data.on("get",(r,o)=>{o[0]||(o[0]={}),o[0].trim=!1},{priority:"high"})}destroy(){super.destroy(),De(this.editor)&&this._removeStyleElementsFromDom()}_removeStyleElementsFromDom(){const e=Array.from(ee.document.querySelectorAll(`[data-full-page-style-id="${this.editor.id}"]`));for(const i of e)i.remove()}_renderStyleElementsInDom(e){const i=this.editor,r=e.getAttribute("$fullPageHeadStyles");if(!r)return;const o=i.config.get("htmlSupport.fullPage.sanitizeCss");for(const n of r){n.setAttribute("data-full-page-style-id",i.id);const s=o(n.innerText);s.hasChanged&&(n.innerText=s.css),ee.document.head.append(n)}}_renderStylesFromHead(e){this._removeStyleElementsFromDom(),this._renderStyleElementsInDom(e)}}function De(t){return t.config.get("htmlSupport.fullPage.allowRenderStylesFromHead")}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const A="htmlEmptyBlock";class Kt extends g{static get pluginName(){return"EmptyBlock"}static get isOfficialPlugin(){return!0}afterInit(){const{model:e,conversion:i,plugins:r,config:o}=this.editor,n=e.schema,s=o.get("htmlSupport.preserveEmptyBlocksInEditingView");n.extend("$block",{allowAttributes:[A]}),n.extend("$container",{allowAttributes:[A]}),n.isRegistered("tableCell")&&n.extend("tableCell",{allowAttributes:[A]}),s?i.for("downcast").add(je()):i.for("dataDowncast").add(je()),i.for("upcast").add(Gt(n)),r.has("ClipboardPipeline")&&this._registerClipboardPastingHandler()}_registerClipboardPastingHandler(){const e=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"contentInsertion",(i,r)=>{r.sourceEditorId!==this.editor.id&&this.editor.model.change(o=>{for(const{item:n}of o.createRangeIn(r.content))n.is("element")&&n.hasAttribute(A)&&o.removeAttribute(A,n)})})}}function je(){return t=>{t.on(`attribute:${A}`,(e,i,r)=>{const{mapper:o,consumable:n}=r,{item:s}=i;if(!n.consume(s,e.name))return;const l=o.toViewElement(s);l&&i.attributeNewValue&&(l.getFillerOffset=()=>null)})}}function Gt(t){return e=>{e.on("element",(i,r,o)=>{const{viewItem:n,modelRange:s}=r;if(!n.is("element")||!n.isEmpty||n.getCustomProperty("$hasBlockFiller"))return;const l=s&&s.start.nodeAfter;if(!l||!t.checkAttribute(l,A)||(o.writer.setAttribute(A,!0,l),l.childCount!=1))return;const m=l.getChild(0);m.is("element","paragraph")&&t.checkAttribute(m,A)&&o.writer.setAttribute(A,!0,m)},{priority:"lowest"})}}export{f as DataFilter,v as DataSchema,Kt as EmptyBlock,qt as FullPage,Ut as GeneralHtmlSupport,Wt as HtmlComment,_e as HtmlPageDataProcessor};
