import{Command as M,Plugin as f,icons as A}from"@ckeditor/ckeditor5-core";import{findAttributeRange as I,TwoStepCaretMovement as P,Input as ne,inlineHighlight as oe,Delete as se,TextWatcher as re,getLastTextLine as ae}from"@ckeditor/ckeditor5-typing";import{ClipboardPipeline as ce}from"@ckeditor/ckeditor5-clipboard";import{toMap as y,Collection as le,first as ue,ObservableMixin as de,env as ke,keyCodes as me,FocusTracker as N,KeystrokeHandler as B}from"@ckeditor/ckeditor5-utils";import{upperFirst as he}from"lodash-es";import{ClickObserver as fe,Matcher as ge}from"@ckeditor/ckeditor5-engine";import{View as L,ViewCollection as U,FocusCycler as H,submitHandler as be,LabeledFieldView as pe,createLabeledInputText as we,ButtonView as b,SwitchButtonView as _e,ContextualBalloon as R,CssTransitionDisablerMixin as ve,MenuBarMenuListItemButtonView as Ee,clickOutsideHandler as Ae}from"@ckeditor/ckeditor5-ui";import{isWidget as Ie}from"@ckeditor/ckeditor5-widget";/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class ye{constructor(){this._definitions=new Set}get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,n,i)=>{if(!i.consumable.test(n.item,"attribute:linkHref")||!(n.item.is("selection")||i.schema.isInline(n.item)))return;const o=i.writer,a=o.document.selection;for(const s of this._definitions){const c=o.createAttributeElement("a",s.attributes,{priority:5});s.classes&&o.addClass(s.classes,c);for(const l in s.styles)o.setStyle(l,s.styles[l],c);o.setCustomProperty("link",!0,c),s.callback(n.attributeNewValue)?n.item.is("selection")?o.wrap(a.getFirstRange(),c):o.wrap(i.mapper.toViewRange(n.range),c):o.unwrap(i.mapper.toViewRange(n.range),c)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,n,{writer:i,mapper:o})=>{const a=o.toViewElement(n.item),s=Array.from(a.getChildren()).find(c=>c.is("element","a"));if(s)for(const c of this._definitions){const l=y(c.attributes);if(c.callback(n.attributeNewValue)){for(const[u,d]of l)u==="class"?i.addClass(d,s):i.setAttribute(u,d,s);c.classes&&i.addClass(c.classes,s);for(const u in c.styles)i.setStyle(u,c.styles[u],s)}else{for(const[u,d]of l)u==="class"?i.removeClass(d,s):i.removeAttribute(u,s);c.classes&&i.removeClass(c.classes,s);for(const u in c.styles)i.removeStyle(u,s)}}})}}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Le=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Te="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",Se=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,xe=/^((\w+:(\/{2,})?)|(\W))/i,Ve=["https?","ftps?","mailto"],g="Ctrl+K";function F(r){return r.is("attributeElement")&&!!r.getCustomProperty("link")}function T(r,{writer:e}){const t=e.createAttributeElement("a",{href:r},{priority:5});return e.setCustomProperty("link",!0,t),t}function E(r,e=Ve){const t=String(r),n=e.join("|"),i=new RegExp(`${Te.replace("<protocols>",n)}`,"i");return Ce(t,i)?t:"#"}function Ce(r,e){return!!r.replace(Le,"").match(e)}function O(r,e){const t={"Open in a new tab":r("Open in a new tab"),Downloadable:r("Downloadable")};return e.forEach(n=>("label"in n&&t[n.label]&&(n.label=t[n.label]),n)),e}function z(r){const e=[];if(r)for(const[t,n]of Object.entries(r)){const i=Object.assign({},n,{id:`link${he(t)}`});e.push(i)}return e}function p(r,e){return r?e.checkAttribute(r.name,"linkHref"):!1}function j(r){return Se.test(r)}function w(r,e){const t=j(r)?"mailto:":e,n=!!t&&!S(r);return r&&n?t+r:r}function S(r){return xe.test(r)}function x(r){window.open(r,"_blank","noopener")}function V(r){const e=r.plugins.has("BookmarkEditing")?r.plugins.get("BookmarkEditing"):null;function t(i){return!!i&&i.startsWith("#")&&!!e&&!!e.getElementForBookmarkId(i.slice(1))}function n(i){const o=i.slice(1),a=e.getElementForBookmarkId(o);r.model.change(s=>{s.setSelection(a,"on")}),r.editing.view.scrollToTheSelection({alignToTop:!0,forceScroll:!0})}return{isScrollableToTarget:t,scrollToTarget:n}}var De=Object.freeze({__proto__:null,LINK_KEYSTROKE:g,addLinkProtocolIfApplicable:w,createBookmarkCallbacks:V,createLinkElement:T,ensureSafeUrl:E,getLocalizedDecorators:O,isEmail:j,isLinkElement:F,isLinkableElement:p,linkHasProtocol:S,normalizeDecorators:z,openLink:x});/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class K extends M{constructor(){super(...arguments),this.manualDecorators=new le,this.automaticDecorators=new ye}restoreManualDecoratorStates(){for(const e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){const e=this.editor.model,t=e.document.selection,n=t.getSelectedElement()||ue(t.getSelectedBlocks());p(n,e.schema)?(this.value=n.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(n,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(const i of this.manualDecorators)i.value=this._getDecoratorStateFromModel(i.id)}execute(e,t={}){const n=this.editor.model,i=n.document.selection,o=[],a=[];for(const s in t)t[s]?o.push(s):a.push(s);n.change(s=>{if(i.isCollapsed){const c=i.getFirstPosition();if(i.hasAttribute("linkHref")){const l=Y(i);let u=I(c,"linkHref",i.getAttribute("linkHref"),n);i.getAttribute("linkHref")===l&&(u=this._updateLinkContent(n,s,u,e)),s.setAttribute("linkHref",e,u),o.forEach(d=>{s.setAttribute(d,!0,u)}),a.forEach(d=>{s.removeAttribute(d,u)}),s.setSelection(s.createPositionAfter(u.end.nodeBefore))}else if(e!==""){const l=y(i.getAttributes());l.set("linkHref",e),o.forEach(d=>{l.set(d,!0)});const{end:u}=n.insertContent(s.createText(e,l),c);s.setSelection(u)}["linkHref",...o,...a].forEach(l=>{s.removeSelectionAttribute(l)})}else{const c=n.schema.getValidRanges(i.getRanges(),"linkHref"),l=[];for(const d of i.getSelectedBlocks())n.schema.checkAttribute(d,"linkHref")&&l.push(s.createRangeOn(d));const u=l.slice();for(const d of c)this._isRangeToUpdate(d,l)&&u.push(d);for(const d of u){let k=d;if(u.length===1){const m=Y(i);i.getAttribute("linkHref")===m&&(k=this._updateLinkContent(n,s,d,e),s.setSelection(s.createSelection(k)))}s.setAttribute("linkHref",e,k),o.forEach(m=>{s.setAttribute(m,!0,k)}),a.forEach(m=>{s.removeAttribute(m,k)})}}})}_getDecoratorStateFromModel(e){const t=this.editor.model,n=t.document.selection,i=n.getSelectedElement();return p(i,t.schema)?i.getAttribute(e):n.getAttribute(e)}_isRangeToUpdate(e,t){for(const n of t)if(n.containsRange(e))return!1;return!0}_updateLinkContent(e,t,n,i){const o=t.createText(i,{linkHref:i});return e.insertContent(o,n)}}function Y(r){if(r.isCollapsed){const e=r.getFirstPosition();return e.textNode&&e.textNode.data}else{const e=Array.from(r.getFirstRange().getItems());if(e.length>1)return null;const t=e[0];return t.is("$text")||t.is("$textProxy")?t.data:null}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class $ extends M{refresh(){const e=this.editor.model,t=e.document.selection,n=t.getSelectedElement();p(n,e.schema)?this.isEnabled=e.schema.checkAttribute(n,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){const e=this.editor,t=this.editor.model,n=t.document.selection,i=e.commands.get("link");t.change(o=>{const a=n.isCollapsed?[I(n.getFirstPosition(),"linkHref",n.getAttribute("linkHref"),t)]:t.schema.getValidRanges(n.getRanges(),"linkHref");for(const s of a)if(o.removeAttribute("linkHref",s),i)for(const c of i.manualDecorators)o.removeAttribute(c.id,s)})}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Me extends de(){constructor({id:e,label:t,attributes:n,classes:i,styles:o,defaultValue:a}){super(),this.id=e,this.set("value",void 0),this.defaultValue=a,this.label=t,this.attributes=n,this.classes=i,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}function _(r,{insertAt:e}={}){if(!r||typeof document>"u")return;const t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",window.litNonce&&n.setAttribute("nonce",window.litNonce),e==="top"&&t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=r:n.appendChild(document.createTextNode(r))}_(".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{border-right:1px solid var(--ck-color-base-text);height:100%;margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}");/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Pe="ck-link_selected",q="automatic",Ne="manual",Be=/^(https?:)?\/\//;class v extends f{static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[P,ne,ce]}constructor(e){super(e),e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const e=this.editor,t=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:T}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(o,a)=>T(E(o,t),a)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:o=>o.getAttribute("href")}}),e.commands.add("link",new K(e)),e.commands.add("unlink",new $(e));const n=O(e.t,z(e.config.get("link.decorators")));this._enableAutomaticDecorators(n.filter(o=>o.mode===q)),this._enableManualDecorators(n.filter(o=>o.mode===Ne)),e.plugins.get(P).registerAttribute("linkHref"),oe(e,"linkHref","a",Pe),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){const t=this.editor,i=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&i.add({id:"linkIsExternal",mode:q,callback:o=>!!o&&Be.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),i.add(e),i.length&&t.conversion.for("downcast").add(i.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;const t=this.editor,i=t.commands.get("link").manualDecorators;e.forEach(o=>{t.model.schema.extend("$text",{allowAttributes:o.id});const a=new Me(o);i.add(a),t.conversion.for("downcast").attributeToElement({model:a.id,view:(s,{writer:c,schema:l},{item:u})=>{if((u.is("selection")||l.isInline(u))&&s){const d=c.createAttributeElement("a",a.attributes,{priority:5});a.classes&&c.addClass(a.classes,d);for(const k in a.styles)c.setStyle(k,a.styles[k],d);return c.setCustomProperty("link",!0,d),d}}}),t.conversion.for("upcast").elementToAttribute({view:{name:"a",...a._createPattern()},model:{key:a.id}})})}_enableLinkOpen(){const e=this.editor,n=e.editing.view.document,i=V(e);function o(a){i.isScrollableToTarget(a)?i.scrollToTarget(a):x(a)}this.listenTo(n,"click",(a,s)=>{if(!(ke.isMac?s.domEvent.metaKey:s.domEvent.ctrlKey))return;let l=s.domTarget;if(l.tagName.toLowerCase()!="a"&&(l=l.closest("a")),!l)return;const u=l.getAttribute("href");u&&(a.stop(),s.preventDefault(),o(u))},{context:"$capture"}),this.listenTo(n,"keydown",(a,s)=>{const l=e.commands.get("link").value;l&&s.keyCode===me.enter&&s.altKey&&(a.stop(),o(l))})}_enableSelectionAttributesFixer(){const t=this.editor.model,n=t.document.selection;this.listenTo(n,"change:attribute",(i,{attributeKeys:o})=>{!o.includes("linkHref")||n.hasAttribute("linkHref")||t.change(a=>{Ue(a,He(t.schema))})})}_enableClipboardIntegration(){const e=this.editor,t=e.model,n=this.editor.config.get("link.defaultProtocol");n&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(i,o)=>{t.change(a=>{const s=a.createRangeIn(o.content);for(const c of s.getItems())if(c.hasAttribute("linkHref")){const l=w(c.getAttribute("linkHref"),n);a.setAttribute("linkHref",l,c)}})})}}function Ue(r,e){r.removeSelectionAttribute("linkHref");for(const t of e)r.removeSelectionAttribute(t)}function He(r){return r.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link")||t==="htmlA")}_('.ck-vertical-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck-vertical-form .ck-button:focus:after{display:none}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{bottom:-1px;content:"";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck.ck-responsive-form .ck-button:focus:after{display:none}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-width)*.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-number,.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){border-radius:0;margin-top:var(--ck-spacing-large);padding:var(--ck-spacing-standard)}.ck.ck-responsive-form>.ck-button:last-child:not(:focus),.ck.ck-responsive-form>.ck-button:nth-last-child(2):not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2),[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}'),_(".ck.ck-link-form{align-items:flex-start;display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{min-width:var(--ck-input-width);padding:0}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical>.ck-button{border-radius:0;margin:0;padding:var(--ck-spacing-standard);width:50%}.ck.ck-link-form_layout-vertical>.ck-button:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form_layout-vertical>.ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:0 var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}");/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class G extends L{constructor(e,t,n){super(e),this.focusTracker=new N,this.keystrokes=new B,this._focusables=new U;const i=e.t;this._validators=n,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(i("Save"),A.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(i("Cancel"),A.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusCycler=new H({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const o=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&o.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:o,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),be({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const e of this._validators){const t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const e=this.locale.t,t=new pe(this.locale,we);return t.fieldView.inputMode="url",t.label=e("Link URL"),t}_createButton(e,t,n,i){const o=new b(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:n}}),i&&o.delegate("execute").to(this,i),o}_createManualDecoratorSwitches(e){const t=this.createCollection();for(const n of e.manualDecorators){const i=new _e(this.locale);i.set({name:n.id,label:n.label,withText:!0}),i.bind("isOn").toMany([n,e],"value",(o,a)=>a===void 0&&o===void 0?!!n.defaultValue:!!o),i.on("execute",()=>{n.set("value",!i.isOn)}),t.add(i)}return t}_createFormChildren(e){const t=this.createCollection();if(t.add(this.urlInputView),e.length){const n=new L;n.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(i=>({tag:"li",children:[i],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(n)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}get url(){const{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}}_(".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{color:var(--ck-color-link-default);cursor:pointer;max-width:var(--ck-input-width);min-width:3em;padding:0 var(--ck-spacing-medium);text-align:center;text-overflow:ellipsis}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{max-width:100%;min-width:0}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview),[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}");var Re='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class W extends L{constructor(e,t={},n){super(e),this.focusTracker=new N,this.keystrokes=new B,this._focusables=new U;const i=e.t;this._options=n,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(i("Unlink"),Re,"unlink"),this.editButtonView=this._createButton(i("Edit link"),A.pencil,"edit"),this.set("href",void 0),this._linkConfig=t,this._focusCycler=new H({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,n){const i=new b(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i.delegate("execute").to(this,n),i}_createPreviewButton(){const e=new b(this.locale),t=this.bindTemplate,n=this.t;return e.set({withText:!0}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",i=>i&&E(i,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"},on:{click:t.to(i=>{this._options&&this._options.isScrollableToTarget(this.href)?(i.preventDefault(),this._options.scrollToTarget(this.href)):x(this.href)})}}),e.bind("tooltip").to(this,"href",i=>this._options&&this._options.isScrollableToTarget(i)?n("Scroll to target"):n("Open link in new tab")),e.bind("label").to(this,"href",i=>i||n("This link has no URL")),e.bind("isEnabled").to(this,"href",i=>!!i),e.template.tag="a",e}}var Q='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const h="link-ui";class C extends f{constructor(){super(...arguments),this.actionsView=null,this.formView=null}static get requires(){return[R]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.editing.view.addObserver(fe),this._balloon=e.plugins.get(R),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:h,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:h,view:(n,{writer:i})=>{if(!n.markerRange.isCollapsed)return null;const o=i.createUIElement("span");return i.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],o),o}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Create link"),keystroke:g},{label:t("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const e=this.editor,t=new W(e.locale,e.config.get("link"),V(e)),n=e.commands.get("link"),i=e.commands.get("unlink");return t.bind("href").to(n,"value"),t.editButtonView.bind("isEnabled").to(n),t.unlinkButtonView.bind("isEnabled").to(i),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(o,a)=>{this._hideUI(),a()}),t.keystrokes.set(g,(o,a)=>{this._addFormView(),a()}),t}_createFormView(){const e=this.editor,t=e.commands.get("link"),n=e.config.get("link.defaultProtocol"),i=new(ve(G))(e.locale,t,Fe(e));return i.urlInputView.fieldView.bind("value").to(t,"value"),i.urlInputView.bind("isEnabled").to(t,"isEnabled"),i.saveButtonView.bind("isEnabled").to(t,"isEnabled"),this.listenTo(i,"submit",()=>{if(i.isValid()){const{value:o}=i.urlInputView.fieldView.element,a=w(o,n);e.execute("link",a,i.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(i.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(i,"cancel",()=>{this._closeFormView()}),i.keystrokes.set("Esc",(o,a)=>{this._closeFormView(),a()}),i}_createToolbarLinkButton(){const e=this.editor;e.ui.componentFactory.add("link",()=>{const t=this._createButton(b);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:link",()=>{const t=this._createButton(Ee);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){const t=this.editor,n=t.locale,i=t.commands.get("link"),o=new e(t.locale),a=n.t;return o.set({label:a("Link"),icon:Q,keystroke:g,isToggleable:!0}),o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",s=>!!s),this.listenTo(o,"execute",()=>this._showUI(!0)),o}_enableBalloonActivators(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(g,(n,i)=>{i(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),Ae({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const e=this.editor,t=e.editing.view.document;let n=this._getSelectedLinkElement(),i=a();const o=()=>{const s=this._getSelectedLinkElement(),c=a();n&&!s||!n&&c!==i?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),n=s,i=c};function a(){return t.selection.focus.getAncestors().reverse().find(s=>s.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){const e=this.editor.editing.view,t=this.editor.model,n=e.document;let i;if(t.markers.has(h)){const o=Array.from(this.editor.editing.mapper.markerNameToElements(h)),a=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));i=e.domConverter.viewRangeToDom(a)}else i=()=>{const o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(n.selection.getFirstRange())};return{target:i}}_getSelectedLinkElement(){const e=this.editor.editing.view,t=e.document.selection,n=t.getSelectedElement();if(t.isCollapsed||n&&Ie(n))return D(t.getFirstPosition());{const i=t.getFirstRange().getTrimmed(),o=D(i.start),a=D(i.end);return!o||o!=a?null:e.createRangeIn(o).getTrimmed().isEqual(i)?o:null}}_showFakeVisualSelection(){const e=this.editor.model;e.change(t=>{const n=e.document.selection.getFirstRange();if(e.markers.has(h))t.updateMarker(h,{range:n});else if(n.start.isAtEnd){const i=n.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:n});t.addMarker(h,{usingOperation:!1,affectsData:!1,range:t.createRange(i,n.end)})}else t.addMarker(h,{usingOperation:!1,affectsData:!1,range:n})})}_hideFakeVisualSelection(){const e=this.editor.model;e.markers.has(h)&&e.change(t=>{t.removeMarker(h)})}}function D(r){return r.getAncestors().find(e=>F(e))||null}function Fe(r){const e=r.t,t=r.config.get("link.allowCreatingEmptyLinks");return[n=>{if(!t&&!n.url.length)return e("Link URL must not be empty.")}]}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Oe=4,Z=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),ze=2;class X extends f{static get requires(){return[se,v]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?I(t,"linkHref",t.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,t){const i=this.editor.model,o=i.document.selection,a=o.getFirstPosition(),s=o.getLastPosition();let c=t.getJoined(this._expandLinkRange(i,a)||t);c&&(c=c.getJoined(this._expandLinkRange(i,s)||t)),c&&(c.start.isBefore(a)||c.end.isAfter(s))&&e.setSelection(c)}_enablePasteLinking(){const e=this.editor,t=e.model,n=t.document.selection,i=e.plugins.get("ClipboardPipeline"),o=e.commands.get("link");i.on("inputTransformation",(a,s)=>{if(!this.isEnabled||!o.isEnabled||n.isCollapsed||s.method!=="paste"||n.rangeCount>1)return;const c=n.getFirstRange(),l=s.dataTransfer.getData("text/plain");if(!l)return;const u=l.match(Z);u&&u[2]===l&&(t.change(d=>{this._selectEntireLinks(d,c),o.execute(l)}),a.stop())},{priority:"high"})}_enableTypingHandling(){const e=this.editor,t=new re(e.model,n=>{if(!je(n))return;const i=J(n.substr(0,n.length-1));if(i)return{url:i}});t.on("matched:data",(n,i)=>{const{batch:o,range:a,url:s}=i;if(!o.isTyping)return;const c=a.end.getShiftedBy(-1),l=c.getShiftedBy(-s.length),u=e.model.createRange(l,c);this._applyAutoLink(s,u)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){const e=this.editor,t=e.model,n=e.commands.get("enter");n&&n.on("execute",()=>{const i=t.document.selection.getFirstPosition();if(!i.parent.previousSibling)return;const o=t.createRangeIn(i.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){const e=this.editor,t=e.model,n=e.commands.get("shiftEnter");n&&n.on("execute",()=>{const i=t.document.selection.getFirstPosition(),o=t.createRange(t.createPositionAt(i.parent,0),i.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(e){const t=this.editor.model,{text:n,range:i}=ae(e,t),o=J(n);if(o){const a=t.createRange(i.end.getShiftedBy(-o.length),i.end);this._applyAutoLink(o,a)}}_applyAutoLink(e,t){const n=this.editor.model,i=this.editor.config.get("link.defaultProtocol"),o=w(e,i);!this.isEnabled||!Ke(t,n)||!S(o)||Ye(t)||this._persistAutoLink(o,t)}_persistAutoLink(e,t){const n=this.editor.model,i=this.editor.plugins.get("Delete");n.enqueueChange(o=>{o.setAttribute("linkHref",e,t),n.enqueueChange(()=>{i.requestUndoOnBackspace()})})}}function je(r){return r.length>Oe&&r[r.length-1]===" "&&r[r.length-2]!==" "}function J(r){const e=Z.exec(r);return e?e[ze]:null}function Ke(r,e){return e.schema.checkAttributeInSelection(e.createSelection(r),"linkHref")}function Ye(r){const e=r.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class $e extends f{static get requires(){return[v,C,X]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class ee extends f{static get requires(){return["ImageEditing","ImageUtils",v]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=e.model.schema;e.plugins.has("ImageBlockEditing")&&t.extend("imageBlock",{allowAttributes:["linkHref"]}),e.conversion.for("upcast").add(qe(e)),e.conversion.for("downcast").add(Ge(e)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const e=this.editor,n=e.commands.get("link").automaticDecorators;n.length&&e.conversion.for("downcast").add(n.getDispatcherForLinkedImage())}_enableManualDecorators(){const e=this.editor,t=e.commands.get("link");for(const n of t.manualDecorators)e.plugins.has("ImageBlockEditing")&&e.model.schema.extend("imageBlock",{allowAttributes:n.id}),e.plugins.has("ImageInlineEditing")&&e.model.schema.extend("imageInline",{allowAttributes:n.id}),e.conversion.for("downcast").add(We(n)),e.conversion.for("upcast").add(Qe(e,n))}}function qe(r){const e=r.plugins.has("ImageInlineEditing"),t=r.plugins.get("ImageUtils");return n=>{n.on("element:a",(i,o,a)=>{const s=o.viewItem,c=t.findViewImgElement(s);if(!c)return;const l=c.findAncestor(m=>t.isBlockImageView(m));if(e&&!l)return;const u={attributes:["href"]};if(!a.consumable.consume(s,u))return;const d=s.getAttribute("href");if(!d)return;let k=o.modelCursor.parent;if(!k.is("element","imageBlock")){const m=a.convertItem(c,o.modelCursor);o.modelRange=m.modelRange,o.modelCursor=m.modelCursor,k=o.modelCursor.nodeBefore}k&&k.is("element","imageBlock")&&a.writer.setAttribute("linkHref",d,k)},{priority:"high"})}}function Ge(r){const e=r.plugins.get("ImageUtils");return t=>{t.on("attribute:linkHref:imageBlock",(n,i,o)=>{if(!o.consumable.consume(i.item,n.name))return;const a=o.mapper.toViewElement(i.item),s=o.writer,c=Array.from(a.getChildren()).find(d=>d.is("element","a")),l=e.findViewImgElement(a),u=l.parent.is("element","picture")?l.parent:l;if(c)i.attributeNewValue?s.setAttribute("href",i.attributeNewValue,c):(s.move(s.createRangeOn(u),s.createPositionAt(a,0)),s.remove(c));else{const d=s.createContainerElement("a",{href:i.attributeNewValue});s.insert(s.createPositionAt(a,0),d),s.move(s.createRangeOn(u),s.createPositionAt(d,0))}},{priority:"high"})}}function We(r){return e=>{e.on(`attribute:${r.id}:imageBlock`,(t,n,i)=>{const o=i.mapper.toViewElement(n.item),a=Array.from(o.getChildren()).find(s=>s.is("element","a"));if(a){for(const[s,c]of y(r.attributes))i.writer.setAttribute(s,c,a);r.classes&&i.writer.addClass(r.classes,a);for(const s in r.styles)i.writer.setStyle(s,r.styles[s],a)}})}}function Qe(r,e){const t=r.plugins.has("ImageInlineEditing"),n=r.plugins.get("ImageUtils");return i=>{i.on("element:a",(o,a,s)=>{const c=a.viewItem,l=n.findViewImgElement(c);if(!l)return;const u=l.findAncestor(ie=>n.isBlockImageView(ie));if(t&&!u)return;const k=new ge(e._createPattern()).match(c);if(!k||!s.consumable.consume(c,k.match))return;const m=a.modelCursor.nodeBefore||a.modelCursor.parent;s.writer.setAttribute(e.id,!0,m)},{priority:"high"})}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class te extends f{static get requires(){return[v,C,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",(n,i)=>{this._isSelectedLinkedImage(e.model.document.selection)&&(i.preventDefault(),n.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const e=this.editor,t=e.t;e.ui.componentFactory.add("linkImage",n=>{const i=new b(n),o=e.plugins.get("LinkUI"),a=e.commands.get("link");return i.set({isEnabled:!0,label:t("Link image"),icon:Q,keystroke:g,tooltip:!0,isToggleable:!0}),i.bind("isEnabled").to(a,"isEnabled"),i.bind("isOn").to(a,"value",s=>!!s),this.listenTo(i,"execute",()=>{this._isSelectedLinkedImage(e.model.document.selection)?o._addActionsView():o._showUI(!0)}),i})}_isSelectedLinkedImage(e){const t=e.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(t)&&t.hasAttribute("linkHref")}}_('.ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{display:block;position:absolute}:root{--ck-link-image-indicator-icon-size:20;--ck-link-image-indicator-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{background-color:rgba(0,0,0,.4);background-image:url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAyMCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTExLjA3NyAxNSAuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzUuNzUgMCAwIDEtLjIxNy4yMDYgNS4yNTEgNS4yNTEgMCAwIDEtOC41MDMtNS45NTUuNy43IDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NHptNS40OTQtNS4zMzVhLjc1Ljc1IDAgMCAxLS4xMi4yNzRsLTEuMTQ3IDEuNjM5YS43NS43NSAwIDEgMS0xLjIyOC0uODZsLjg2LTEuMjNhMy43NSAzLjc1IDAgMCAwLTYuMTQ0LTQuMzAxbC0uODYgMS4yMjlhLjc1Ljc1IDAgMCAxLTEuMjI5LS44NmwxLjE0OC0xLjY0YS43NS43NSAwIDAgMSAuMjE3LS4yMDYgNS4yNTEgNS4yNTEgMCAwIDEgOC41MDMgNS45NTVtLTQuNTYzLTIuNTMyYS43NS43NSAwIDAgMSAuMTg0IDEuMDQ1bC0zLjE1NSA0LjUwNWEuNzUuNzUgMCAxIDEtMS4yMjktLjg2bDMuMTU1LTQuNTA2YS43NS43NSAwIDAgMSAxLjA0NS0uMTg0Ii8+PC9zdmc+");background-position:50%;background-repeat:no-repeat;background-size:14px;border-radius:100%;content:"";height:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size));overflow:hidden;right:min(var(--ck-spacing-medium),6%);top:min(var(--ck-spacing-medium),6%);width:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size))}');/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ze extends f{static get requires(){return[ee,te]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}export{X as AutoLink,$e as Link,W as LinkActionsView,K as LinkCommand,v as LinkEditing,G as LinkFormView,Ze as LinkImage,ee as LinkImageEditing,te as LinkImageUI,C as LinkUI,De as LinkUtils,$ as UnlinkCommand,w as addLinkProtocolIfApplicable,E as ensureSafeUrl,p as isLinkableElement};
