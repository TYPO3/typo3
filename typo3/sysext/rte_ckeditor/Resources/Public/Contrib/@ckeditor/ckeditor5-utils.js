import{isObject as ne,isString as ut,isPlainObject as v,cloneDeepWith as ie,isElement as ft,isFunction as ht,merge as oe}from"lodash-es";/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/let $;try{$={window,document}}catch{/* istanbul ignore next -- @preserve */$={window:{},document:{}}}var w=$;/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function re(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const x=re(),M={isMac:dt(x),isWindows:se(x),isGecko:le(x),isSafari:ce(x),isiOS:ae(x),isAndroid:ue(x),isBlink:fe(x),get isMediaForcedColors(){return de()},get isMotionReduced(){return pe()},features:{isRegExpUnicodePropertySupported:he()}};function dt(e){return e.indexOf("macintosh")>-1}function se(e){return e.indexOf("windows")>-1}function le(e){return!!e.match(/gecko\/\d+/)}function ce(e){return e.indexOf(" applewebkit/")>-1&&e.indexOf("chrome")===-1}function ae(e){return!!e.match(/iphone|ipad/i)||dt(e)&&navigator.maxTouchPoints>0}function ue(e){return e.indexOf("android")>-1}function fe(e){return e.indexOf("chrome/")>-1&&e.indexOf("edge/")<0}function he(){let e=!1;try{e="\u0107".search(new RegExp("[\\p{L}]","u"))===0}catch{}return e}function de(){return w.window.matchMedia?w.window.matchMedia("(forced-colors: active)").matches:!1}function pe(){return w.window.matchMedia?w.window.matchMedia("(prefers-reduced-motion)").matches:!1}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function pt(e,t,n,i){n=n||function(c,a){return c===a};const o=Array.isArray(e)?e:Array.prototype.slice.call(e),r=Array.isArray(t)?t:Array.prototype.slice.call(t),s=ge(o,r,n);return i?be(s,r.length):me(r,s)}function ge(e,t,n){const i=gt(e,t,n);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const o=mt(e,i),r=mt(t,i),s=gt(o,r,n),l=e.length-s,c=t.length-s;return{firstIndex:i,lastIndexOld:l,lastIndexNew:c}}function gt(e,t,n){for(let i=0;i<Math.max(e.length,t.length);i++)if(e[i]===void 0||t[i]===void 0||!n(e[i],t[i]))return i;return-1}function mt(e,t){return e.slice(t).reverse()}function me(e,t){const n=[],{firstIndex:i,lastIndexOld:o,lastIndexNew:r}=t;return r-i>0&&n.push({index:i,type:"insert",values:e.slice(i,r)}),o-i>0&&n.push({index:i+(r-i),type:"delete",howMany:o-i}),n}function be(e,t){const{firstIndex:n,lastIndexOld:i,lastIndexNew:o}=e;if(n===-1)return Array(t).fill("equal");let r=[];return n>0&&(r=r.concat(Array(n).fill("equal"))),o-n>0&&(r=r.concat(Array(o-n).fill("insert"))),i-n>0&&(r=r.concat(Array(i-n).fill("delete"))),o<t&&(r=r.concat(Array(t-o).fill("equal"))),r}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function q(e,t,n){n=n||function(m,C){return m===C};const i=e.length,o=t.length;if(i>200||o>200||i+o>300)return q.fastDiff(e,t,n,!0);let r,s;if(o<i){const m=e;e=t,t=m,r="delete",s="insert"}else r="insert",s="delete";const l=e.length,c=t.length,a=c-l,u={},f={};function _(m){const C=(f[m-1]!==void 0?f[m-1]:-1)+1,G=f[m+1]!==void 0?f[m+1]:-1,at=C>G?-1:1;u[m+at]&&(u[m]=u[m+at].slice(0)),u[m]||(u[m]=[]),u[m].push(C>G?r:s);let S=Math.max(C,G),Y=S-m;for(;Y<l&&S<c&&n(e[Y],t[S]);)Y++,S++,u[m].push("equal");return S}let L=0,y;do{for(y=-L;y<a;y++)f[y]=_(y);for(y=a+L;y>a;y--)f[y]=_(y);f[a]=_(a),L++}while(f[a]!==c);return u[a].slice(1)}q.fastDiff=pt;/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function _e(e,t){const n=[];let i=0,o=null;return e.forEach(s=>{s=="equal"?(r(),i++):s=="insert"?(o&&o.type=="insert"?o.values.push(t[i]):(r(),o={type:"insert",index:i,values:[t[i]]}),i++):o&&o.type=="delete"?o.howMany++:(r(),o={type:"delete",index:i,howMany:1})}),r(),n;function r(){o&&(n.push(o),o=null)}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function we(e,...t){t.forEach(n=>{const i=Object.getOwnPropertyNames(n),o=Object.getOwnPropertySymbols(n);i.concat(o).forEach(r=>{if(r in e.prototype||typeof n=="function"&&(r=="length"||r=="name"||r=="prototype"))return;const s=Object.getOwnPropertyDescriptor(n,r);s.enumerable=!1,Object.defineProperty(e.prototype,r,s)})})}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function bt(){return function e(){e.called=!0}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class R{constructor(t,n){this.source=t,this.name=n,this.path=[],this.stop=bt(),this.off=bt()}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const b=new Array(256).fill("").map((e,t)=>("0"+t.toString(16)).slice(-2));function P(){const[e,t,n,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+b[e>>0&255]+b[e>>8&255]+b[e>>16&255]+b[e>>24&255]+b[t>>0&255]+b[t>>8&255]+b[t>>16&255]+b[t>>24&255]+b[n>>0&255]+b[n>>8&255]+b[n>>16&255]+b[n>>24&255]+b[i>>0&255]+b[i>>8&255]+b[i>>16&255]+b[i>>24&255]}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const N={get(e="normal"){return typeof e!="number"?this[e]||this.normal:e},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function _t(e,t){const n=N.get(t.priority);let i=0,o=e.length;for(;i<o;){const r=i+o>>1;N.get(e[r].priority)<n?o=r:i=r+1}e.splice(i,0,t)}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const ye="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class h extends Error{constructor(t,n,i){super(xe(t,i)),this.name="CKEditorError",this.context=n,this.data=i}is(t){return t==="CKEditorError"}static rethrowUnexpectedError(t,n){if(t.is&&t.is("CKEditorError"))throw t;const i=new h(t.message,n);throw i.stack=t.stack,i}}function Ee(e,t){console.warn(...yt(e,t))}function Te(e,t){console.error(...yt(e,t))}function wt(e){return`
Read more: ${ye}#error-${e}`}function xe(e,t){const n=new WeakSet,o=t?` ${JSON.stringify(t,(s,l)=>{if(typeof l=="object"&&l!==null){if(n.has(l))return`[object ${l.constructor.name}]`;n.add(l)}return l})}`:"",r=wt(e);return e+o+r}function yt(e,t){const n=wt(e);return t?[e,t,n]:[e,n]}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Et="44.1.0",Ie=new Date(2024,11,16);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new h("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=Et;/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const I=Symbol("listeningTo"),X=Symbol("emitterId"),E=Symbol("delegations"),Tt=T(Object);function T(e){if(!e)return Tt;class t extends e{on(i,o,r){this.listenTo(this,i,o,r)}once(i,o,r){let s=!1;const l=(c,...a)=>{s||(s=!0,c.off(),o.call(this,c,...a))};this.listenTo(this,i,l,r)}off(i,o){this.stopListening(this,i,o)}listenTo(i,o,r,s={}){let l,c;this[I]||(this[I]={});const a=this[I];J(i)||xt(i);const u=J(i);(l=a[u])||(l=a[u]={emitter:i,callbacks:{}}),(c=l.callbacks[o])||(c=l.callbacks[o]=[]),c.push(r),ve(this,i,o,r,s)}stopListening(i,o,r){const s=this[I];let l=i&&J(i);const c=s&&l?s[l]:void 0,a=c&&o?c.callbacks[o]:void 0;if(!(!s||i&&!c||o&&!a))if(r)Z(this,i,o,r),a.indexOf(r)!==-1&&(a.length===1?delete c.callbacks[o]:Z(this,i,o,r));else if(a){for(;r=a.pop();)Z(this,i,o,r);delete c.callbacks[o]}else if(c){for(o in c.callbacks)this.stopListening(i,o);delete s[l]}else{for(l in s)this.stopListening(s[l].emitter);delete this[I]}}fire(i,...o){try{const r=i instanceof R?i:new R(this,i),s=r.name;let l=Se(this,s);if(r.path.push(this),l){l=l.slice();for(let a=0;a<l.length;a++){const u=l[a].callback;if(u.call(this,r,...o),r.off.called&&(delete r.off.called,this._removeEventListener(s,u)),r.stop.called)break}}const c=this[E];if(c){const a=c.get(s),u=c.get("*");a&&At(a,r,o),u&&At(u,r,o)}return r.return}catch(r){/* istanbul ignore next -- @preserve */h.rethrowUnexpectedError(r,this)}}delegate(...i){return{to:(o,r)=>{this[E]||(this[E]=new Map),i.forEach(s=>{const l=this[E].get(s);l?l.set(o,r):this[E].set(s,new Map([[o,r]]))})}}}stopDelegating(i,o){if(this[E])if(!i)this[E].clear();else if(!o)this[E].delete(i);else{const r=this[E].get(i);r&&r.delete(o)}}_addEventListener(i,o,r){Ce(this,i);const s=Q(this,i),l=N.get(r.priority),c={callback:o,priority:l};for(const a of s)_t(a,c)}_removeEventListener(i,o){const r=Q(this,i);for(const s of r)for(let l=0;l<s.length;l++)s[l].callback==o&&(s.splice(l,1),l--)}}return t}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(e=>{T[e]=Tt.prototype[e]});function Ae(e,t){const n=e[I];return n&&n[t]?n[t].emitter:null}function xt(e,t){e[X]||(e[X]=t||P())}function J(e){return e[X]}function It(e){return e._events||Object.defineProperty(e,"_events",{value:{}}),e._events}function Le(){return{callbacks:[],childEvents:[]}}function Ce(e,t){const n=It(e);if(n[t])return;let i=t,o=null;const r=[];for(;i!==""&&!n[i];)n[i]=Le(),r.push(n[i]),o&&n[i].childEvents.push(o),o=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(const s of r)s.callbacks=n[i].callbacks.slice();n[i].childEvents.push(o)}}function Q(e,t){const n=It(e)[t];if(!n)return[];let i=[n.callbacks];for(let o=0;o<n.childEvents.length;o++){const r=Q(e,n.childEvents[o]);i=i.concat(r)}return i}function Se(e,t){if(!e._events)return null;let n=t;do{const i=e._events[n];if(i&&i.callbacks&&i.callbacks.length)return i.callbacks;const o=n.lastIndexOf(":");n=o>-1?n.substring(0,o):""}while(n);return null}function At(e,t,n){for(let[i,o]of e){o?typeof o=="function"&&(o=o(t.name)):o=t.name;const r=new R(t.source,o);r.path=[...t.path],i.fire(r,...n)}}function ve(e,t,n,i,o){t._addEventListener?t._addEventListener(n,i,o):e._addEventListener.call(t,n,i,o)}function Z(e,t,n,i){t._removeEventListener?t._removeEventListener(n,i):e._removeEventListener.call(t,n,i)}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const D=Symbol("observableProperties"),B=Symbol("boundObservables"),O=Symbol("boundProperties"),A=Symbol("decoratedMethods"),Lt=Symbol("decoratedOriginal"),Ct=j(T());function j(e){if(!e)return Ct;class t extends e{set(i,o){if(ne(i)){Object.keys(i).forEach(s=>{this.set(s,i[s])},this);return}z(this);const r=this[D];if(i in this&&!r.has(i))throw new h("observable-set-cannot-override",this);Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get(){return r.get(i)},set(s){const l=r.get(i);let c=this.fire(`set:${i}`,i,s,l);c===void 0&&(c=s),(l!==c||!r.has(i))&&(r.set(i,c),this.fire(`change:${i}`,i,c,l))}}),this[i]=o}bind(...i){if(!i.length||!St(i))throw new h("observable-bind-wrong-properties",this);if(new Set(i).size!==i.length)throw new h("observable-bind-duplicate-properties",this);z(this);const o=this[O];i.forEach(s=>{if(o.has(s))throw new h("observable-bind-rebind",this)});const r=new Map;return i.forEach(s=>{const l={property:s,to:[]};o.set(s,l),r.set(s,l)}),{to:Me,toMany:Fe,_observable:this,_bindProperties:i,_to:[],_bindings:r}}unbind(...i){if(!this[D])return;const o=this[O],r=this[B];if(i.length){if(!St(i))throw new h("observable-unbind-wrong-properties",this);i.forEach(s=>{const l=o.get(s);l&&(l.to.forEach(([c,a])=>{const u=r.get(c),f=u[a];f.delete(l),f.size||delete u[a],Object.keys(u).length||(r.delete(c),this.stopListening(c,"change"))}),o.delete(s))})}else r.forEach((s,l)=>{this.stopListening(l,"change")}),r.clear(),o.clear()}decorate(i){z(this);const o=this[i];if(!o)throw new h("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:i});this.on(i,(r,s)=>{r.return=o.apply(this,s)}),this[i]=function(...r){return this.fire(i,r)},this[i][Lt]=o,this[A]||(this[A]=[]),this[A].push(i)}stopListening(i,o,r){if(!i&&this[A]){for(const s of this[A])this[s]=this[s][Lt];delete this[A]}super.stopListening(i,o,r)}}return t}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(e=>{j[e]=Ct.prototype[e]});function z(e){e[D]||(Object.defineProperty(e,D,{value:new Map}),Object.defineProperty(e,B,{value:new Map}),Object.defineProperty(e,O,{value:new Map}))}function Me(...e){const t=Re(...e),n=Array.from(this._bindings.keys()),i=n.length;if(!t.callback&&t.to.length>1)throw new h("observable-bind-to-no-callback",this);if(i>1&&t.callback)throw new h("observable-bind-to-extra-callback",this);t.to.forEach(o=>{if(o.properties.length&&o.properties.length!==i)throw new h("observable-bind-to-properties-length",this);o.properties.length||(o.properties=this._bindProperties)}),this._to=t.to,t.callback&&(this._bindings.get(n[0]).callback=t.callback),De(this._observable,this._to),Ne(this),this._bindProperties.forEach(o=>{vt(this._observable,o)})}function Fe(e,t,n){if(this._bindings.size>1)throw new h("observable-bind-to-many-not-one-binding",this);this.to(...ke(e,t),n)}function ke(e,t){const n=e.map(i=>[i,t]);return Array.prototype.concat.apply([],n)}function St(e){return e.every(t=>typeof t=="string")}function Re(...e){if(!e.length)throw new h("observable-bind-to-parse-error",null);const t={to:[]};let n;return typeof e[e.length-1]=="function"&&(t.callback=e.pop()),e.forEach(i=>{if(typeof i=="string")n.properties.push(i);else if(typeof i=="object")n={observable:i,properties:[]},t.to.push(n);else throw new h("observable-bind-to-parse-error",null)}),t}function Pe(e,t,n,i){const o=e[B],r=o.get(n),s=r||{};s[i]||(s[i]=new Set),s[i].add(t),r||o.set(n,s)}function Ne(e){let t;e._bindings.forEach((n,i)=>{e._to.forEach(o=>{t=o.properties[n.callback?0:e._bindProperties.indexOf(i)],n.to.push([o.observable,t]),Pe(e._observable,n,o.observable,t)})})}function vt(e,t){const i=e[O].get(t);let o;i.callback?o=i.callback.apply(e,i.to.map(r=>r[0][r[1]])):(o=i.to[0],o=o[0][o[1]]),Object.prototype.hasOwnProperty.call(e,t)?e[t]=o:e.set(t,o)}function De(e,t){t.forEach(n=>{const i=e[B];let o;i.get(n.observable)||e.listenTo(n.observable,"change",(r,s)=>{o=i.get(n.observable)[s],o&&o.forEach(l=>{vt(e,l.property)})})})}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Be{constructor(){this._replacedElements=[]}replace(t,n){this._replacedElements.push({element:t,newElement:n}),t.style.display="none",n&&t.parentNode.insertBefore(n,t.nextSibling)}restore(){this._replacedElements.forEach(({element:t,newElement:n})=>{t.style.display="",n&&n.remove()}),this._replacedElements=[]}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Oe(e){let t=new AbortController;function n(...i){return t.abort(),t=new AbortController,e(t.signal,...i)}return n.abort=()=>t.abort(),n}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function je(e){let t=0;for(const n of e)t++;return t}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Ve(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++)if(e[i]!=t[i])return i;return e.length==t.length?"same":e.length<t.length?"prefix":"extension"}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function V(e){return!!(e&&e[Symbol.iterator])}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function We(e,t,n={},i=[]){const o=n&&n.xmlns,r=o?e.createElementNS(o,t):e.createElement(t);for(const s in n)r.setAttribute(s,n[s]);(ut(i)||!V(i))&&(i=[i]);for(let s of i)ut(s)&&(s=e.createTextNode(s)),r.appendChild(s);return r}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ke{constructor(t,n){this._config=Object.create(null),n&&this.define(Mt(n)),t&&this._setObjectToTarget(this._config,t)}set(t,n){this._setToTarget(this._config,t,n)}define(t,n){this._setToTarget(this._config,t,n,!0)}get(t){return this._getFromSource(this._config,t)}*names(){for(const t of Object.keys(this._config))yield t}_setToTarget(t,n,i,o=!1){if(v(n)){this._setObjectToTarget(t,n,o);return}const r=n.split(".");n=r.pop();for(const s of r)v(t[s])||(t[s]=Object.create(null)),t=t[s];if(v(i)){v(t[n])||(t[n]=Object.create(null)),t=t[n],this._setObjectToTarget(t,i,o);return}o&&typeof t[n]<"u"||(t[n]=i)}_getFromSource(t,n){const i=n.split(".");n=i.pop();for(const o of i){if(!v(t[o])){t=null;break}t=t[o]}return t?Mt(t[n]):void 0}_setObjectToTarget(t,n,i){Object.keys(n).forEach(o=>{this._setToTarget(t,o,n[o],i)})}}function Mt(e){return ie(e,He)}function He(e){return ft(e)||typeof e=="function"?e:void 0}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function tt(e){if(e){if(e.defaultView)return e instanceof e.defaultView.Document;if(e.ownerDocument&&e.ownerDocument.defaultView)return e instanceof e.ownerDocument.defaultView.Node}return!1}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function W(e){const t=Object.prototype.toString.apply(e);return t=="[object Window]"||t=="[object global]"}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Ft=F(T());function F(e){if(!e)return Ft;class t extends e{listenTo(i,o,r,s={}){if(tt(i)||W(i)){const l={capture:!!s.useCapture,passive:!!s.usePassive},c=this._getProxyEmitter(i,l)||new Ue(i,l);this.listenTo(c,o,r,s)}else super.listenTo(i,o,r,s)}stopListening(i,o,r){if(tt(i)||W(i)){const s=this._getAllProxyEmitters(i);for(const l of s)this.stopListening(l,o,r)}else super.stopListening(i,o,r)}_getProxyEmitter(i,o){return Ae(this,kt(i,o))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(o=>this._getProxyEmitter(i,o)).filter(o=>!!o)}}return t}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(e=>{F[e]=Ft.prototype[e]});class Ue extends T(){constructor(t,n){super(),xt(this,kt(t,n)),this._domNode=t,this._options=n}attach(t){if(this._domListeners&&this._domListeners[t])return;const n=this._createDomListener(t);this._domNode.addEventListener(t,n,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=n}detach(t){let n;this._domListeners[t]&&(!(n=this._events[t])||!n.callbacks.length)&&this._domListeners[t].removeListener()}_addEventListener(t,n,i){this.attach(t),T().prototype._addEventListener.call(this,t,n,i)}_removeEventListener(t,n){T().prototype._removeEventListener.call(this,t,n),this.detach(t)}_createDomListener(t){const n=i=>{this.fire(t,i)};return n.removeListener=()=>{this._domNode.removeEventListener(t,n,this._options),delete this._domListeners[t]},n}}function Ge(e){return e["data-ck-expando"]||(e["data-ck-expando"]=P())}function kt(e,t){let n=Ge(e);for(const i of Object.keys(t).sort())t[i]&&(n+="-"+i);return n}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Ye(e){let t=e.parentElement;if(!t)return null;for(;t.tagName!="BODY";){const n=t.style.overflowY||w.window.getComputedStyle(t).overflowY;if(n==="auto"||n==="scroll")break;if(t=t.parentElement,!t)return null}return t}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function $e(e){const t=[];let n=e;for(;n&&n.nodeType!=Node.DOCUMENT_NODE;)t.unshift(n),n=n.parentNode;return t}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function qe(e){return e instanceof HTMLTextAreaElement?e.value:e.innerHTML}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function et(e){const t=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Xe(e){if(!e.target)return null;const t=e.target.ownerDocument,n=e.clientX,i=e.clientY;let o=null;return t.caretRangeFromPoint&&t.caretRangeFromPoint(n,i)?o=t.caretRangeFromPoint(n,i):e.rangeParent&&(o=t.createRange(),o.setStart(e.rangeParent,e.rangeOffset),o.collapse(!0)),o}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function K(e){return Object.prototype.toString.call(e)=="[object Text]"}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function H(e){return Object.prototype.toString.apply(e)=="[object Range]"}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Rt(e){return!e||!e.parentNode||e.offsetParent===w.document.body?null:e.offsetParent}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Pt=["top","right","bottom","left","width","height"];class g{constructor(t){const n=H(t);if(Object.defineProperty(this,"_source",{value:t._source||t,writable:!0,enumerable:!1}),nt(t)||n)if(n){const i=g.getDomRangeRects(t);U(this,g.getBoundingRect(i))}else U(this,t.getBoundingClientRect());else if(W(t)){const{innerWidth:i,innerHeight:o}=t;U(this,{top:0,right:i,bottom:o,left:0,width:i,height:o})}else U(this,t)}clone(){return new g(this)}moveTo(t,n){return this.top=n,this.right=t+this.width,this.bottom=n+this.height,this.left=t,this}moveBy(t,n){return this.top+=n,this.right+=t,this.left+=t,this.bottom+=n,this}getIntersection(t){const n={top:Math.max(this.top,t.top),right:Math.min(this.right,t.right),bottom:Math.min(this.bottom,t.bottom),left:Math.max(this.left,t.left),width:0,height:0};if(n.width=n.right-n.left,n.height=n.bottom-n.top,n.width<0||n.height<0)return null;{const i=new g(n);return i._source=this._source,i}}getIntersectionArea(t){const n=this.getIntersection(t);return n?n.getArea():0}getArea(){return this.width*this.height}getVisible(){const t=this._source;let n=this.clone();if(Nt(t))return n;let i=t,o=t.parentNode||t.commonAncestorContainer,r;for(;o&&!Nt(o);){const s=Je(o)==="visible";i instanceof HTMLElement&&Dt(i)==="absolute"&&(r=i);const l=Dt(o);if(s||r&&(l==="relative"&&s||l!=="relative")){i=o,o=o.parentNode;continue}const c=new g(o),a=n.getIntersection(c);if(a)a.getArea()<n.getArea()&&(n=a);else return null;i=o,o=o.parentNode}return n}isEqual(t){for(const n of Pt)if(this[n]!==t[n])return!1;return!0}contains(t){const n=this.getIntersection(t);return!!(n&&n.isEqual(t))}toAbsoluteRect(){const{scrollX:t,scrollY:n}=w.window,i=this.clone().moveBy(t,n);if(nt(i._source)){const o=Rt(i._source);o&&Qe(i,o)}return i}excludeScrollbarsAndBorders(){const t=this._source;let n,i,o;if(W(t))n=t.innerWidth-t.document.documentElement.clientWidth,i=t.innerHeight-t.document.documentElement.clientHeight,o=t.getComputedStyle(t.document.documentElement).direction;else{const r=et(t);n=t.offsetWidth-t.clientWidth-r.left-r.right,i=t.offsetHeight-t.clientHeight-r.top-r.bottom,o=t.ownerDocument.defaultView.getComputedStyle(t).direction,this.left+=r.left,this.top+=r.top,this.right-=r.right,this.bottom-=r.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=n,o==="ltr"?this.right-=n:this.left+=n,this.height-=i,this.bottom-=i,this}static getDomRangeRects(t){const n=[],i=Array.from(t.getClientRects());if(i.length)for(const o of i)n.push(new g(o));else{let o=t.startContainer;K(o)&&(o=o.parentNode);const r=new g(o.getBoundingClientRect());r.right=r.left,r.width=0,n.push(r)}return n}static getBoundingRect(t){const n={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let i=0;for(const o of t)i++,n.left=Math.min(n.left,o.left),n.top=Math.min(n.top,o.top),n.right=Math.max(n.right,o.right),n.bottom=Math.max(n.bottom,o.bottom);return i==0?null:(n.width=n.right-n.left,n.height=n.bottom-n.top,new g(n))}}function U(e,t){for(const n of Pt)e[n]=t[n]}function Nt(e){return nt(e)?e===e.ownerDocument.body:!1}function nt(e){return e!==null&&typeof e=="object"&&e.nodeType===1&&typeof e.getBoundingClientRect=="function"}function Dt(e){return e instanceof HTMLElement?e.ownerDocument.defaultView.getComputedStyle(e).position:"static"}function Je(e){return e instanceof HTMLElement?e.ownerDocument.defaultView.getComputedStyle(e).overflow:"visible"}function Qe(e,t){const n=new g(t),i=et(t);let o=0,r=0;o-=n.left,r-=n.top,o+=t.scrollLeft,r+=t.scrollTop,o-=i.left,r-=i.top,e.moveBy(o,r)}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class d{constructor(t,n){d._observerInstance||d._createObserver(),this._element=t,this._callback=n,d._addElementCallback(t,n),d._observerInstance.observe(t)}get element(){return this._element}destroy(){d._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,n){d._elementCallbacks||(d._elementCallbacks=new Map);let i=d._elementCallbacks.get(t);i||(i=new Set,d._elementCallbacks.set(t,i)),i.add(n)}static _deleteElementCallback(t,n){const i=d._getElementCallbacks(t);i&&(i.delete(n),i.size||(d._elementCallbacks.delete(t),d._observerInstance.unobserve(t))),d._elementCallbacks&&!d._elementCallbacks.size&&(d._observerInstance=null,d._elementCallbacks=null)}static _getElementCallbacks(t){return d._elementCallbacks?d._elementCallbacks.get(t):null}static _createObserver(){d._observerInstance=new w.window.ResizeObserver(t=>{for(const n of t){const i=d._getElementCallbacks(n.target);if(i)for(const o of i)o(n)}})}}d._observerInstance=null,d._elementCallbacks=null;/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Ze(e,t){e instanceof HTMLTextAreaElement&&(e.value=t),e.innerHTML=t}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function ze(e){return t=>t+e}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function tn(e){let t=0;for(;e.previousSibling;)e=e.previousSibling,t++;return t}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function en(e,t,n){e.insertBefore(n,e.childNodes[t]||null)}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function nn(e){return e&&e.nodeType===Node.COMMENT_NODE}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function on(e){try{w.document.createAttribute(e)}catch{return!1}return!0}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Bt(e){return e?K(e)?Bt(e.parentElement):e.getClientRects?!!e.getClientRects().length:!1:!1}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function rn({element:e,target:t,positions:n,limiter:i,fitInViewport:o,viewportOffsetConfig:r}){ht(t)&&(t=t()),ht(i)&&(i=i());const s=Rt(e),l=sn(r),c=new g(e),a=Ot(t,l);let u;if(!a||!l.getIntersection(a))return null;const f={targetRect:a,elementRect:c,positionedElementAncestor:s,viewportRect:l};if(!i&&!o)u=new jt(n[0],f);else{if(i){const _=Ot(i,l);_&&(f.limiterRect=_)}u=ln(n,f)}return u}function Ot(e,t){const n=new g(e).getVisible();return n?n.getIntersection(t):null}function sn(e){e=Object.assign({top:0,bottom:0,left:0,right:0},e);const t=new g(w.window);return t.top+=e.top,t.height-=e.top,t.bottom-=e.bottom,t.height-=e.bottom,t}function ln(e,t){const{elementRect:n}=t,i=n.getArea(),o=e.map(l=>new jt(l,t)).filter(l=>!!l.name);let r=0,s=null;for(const l of o){const{limiterIntersectionArea:c,viewportIntersectionArea:a}=l;if(c===i)return l;const u=a**2+c**2;u>r&&(r=u,s=l)}return s}class jt{constructor(t,n){const i=t(n.targetRect,n.elementRect,n.viewportRect,n.limiterRect);if(!i)return;const{left:o,top:r,name:s,config:l}=i;this.name=s,this.config=l,this._positioningFunctionCoordinates={left:o,top:r},this._options=n}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const t=this._options.limiterRect;return t?t.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function cn(e){const t=e.parentNode;t&&t.removeChild(e)}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function an({target:e,viewportOffset:t=0,ancestorOffset:n=0,alignToTop:i,forceScroll:o}){const r=it(e);let s=r,l=null;for(t=hn(t);s;){let c;s==r?c=ot(e):c=ot(l),Vt({parent:c,getRect:()=>rt(e,s),alignToTop:i,ancestorOffset:n,forceScroll:o});let a=rt(e,s);const u=rt(c,s);if(a.height>u.height){const f=a.getIntersection(u);f&&(a=f)}if(fn({window:s,rect:a,viewportOffset:t,alignToTop:i,forceScroll:o}),s.parent!=s){if(l=s.frameElement,s=s.parent,!l)return}else s=null}}function un(e,t,n){const i=ot(e);Vt({parent:i,getRect:()=>new g(e),ancestorOffset:t,limiterElement:n})}function fn({window:e,rect:t,alignToTop:n,forceScroll:i,viewportOffset:o}){const r=t.clone().moveBy(0,o.bottom),s=t.clone().moveBy(0,-o.top),l=new g(e).excludeScrollbarsAndBorders(),c=[s,r],a=n&&i,u=c.every(m=>l.contains(m));let{scrollX:f,scrollY:_}=e;const L=f,y=_;a?_-=l.top-t.top+o.top:u||(Kt(s,l)?_-=l.top-t.top+o.top:Wt(r,l)&&(n?_+=t.top-l.top-o.top:_+=t.bottom-l.bottom+o.bottom)),u||(Ht(t,l)?f-=l.left-t.left+o.left:Ut(t,l)&&(f+=t.right-l.right+o.right)),(f!=L||_!==y)&&e.scrollTo(f,_)}function Vt({parent:e,getRect:t,alignToTop:n,forceScroll:i,ancestorOffset:o=0,limiterElement:r}){const s=it(e),l=n&&i;let c,a,u;const f=r||s.document.body;for(;e!=f;)a=t(),c=new g(e).excludeScrollbarsAndBorders(),u=c.contains(a),l?e.scrollTop-=c.top-a.top+o:u||(Kt(a,c)?e.scrollTop-=c.top-a.top+o:Wt(a,c)&&(n?e.scrollTop+=a.top-c.top-o:e.scrollTop+=a.bottom-c.bottom+o)),u||(Ht(a,c)?e.scrollLeft-=c.left-a.left+o:Ut(a,c)&&(e.scrollLeft+=a.right-c.right+o)),e=e.parentNode}function Wt(e,t){return e.bottom>t.bottom}function Kt(e,t){return e.top<t.top}function Ht(e,t){return e.left<t.left}function Ut(e,t){return e.right>t.right}function it(e){return H(e)?e.startContainer.ownerDocument.defaultView:e.ownerDocument.defaultView}function ot(e){if(H(e)){let t=e.commonAncestorContainer;return K(t)&&(t=t.parentNode),t}else return e.parentNode}function rt(e,t){const n=it(e),i=new g(e);if(n===t)return i;{let o=n;for(;o!=t;){const r=o.frameElement,s=new g(r).excludeScrollbarsAndBorders();i.moveBy(s.left,s.top),o=o.parent}}return i}function hn(e){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:e}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const dn={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21E7"},pn={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},Gt={37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",9:"\u21E5",33:"Page Up",34:"Page Down"},p=yn(),gn=Object.fromEntries(Object.entries(p).map(([e,t])=>{let n;return t in Gt?n=Gt[t]:n=e.charAt(0).toUpperCase()+e.slice(1),[t,n]}));function k(e){let t;if(typeof e=="string"){if(t=p[e.toLowerCase()],!t)throw new h("keyboard-unknown-key",null,{key:e})}else t=e.keyCode+(e.altKey?p.alt:0)+(e.ctrlKey?p.ctrl:0)+(e.shiftKey?p.shift:0)+(e.metaKey?p.cmd:0);return t}function st(e){return typeof e=="string"&&(e=En(e)),e.map(t=>typeof t=="string"?_n(t):t).reduce((t,n)=>n+t,0)}function mn(e){let t=st(e);return Object.entries(M.isMac||M.isiOS?dn:pn).reduce((o,[r,s])=>((t&p[r])!=0&&(t&=~p[r],o+=s),o),"")+(t?gn[t]:"")}function bn(e){return e==p.arrowright||e==p.arrowleft||e==p.arrowup||e==p.arrowdown}function Yt(e,t){const n=t==="ltr";switch(e){case p.arrowleft:return n?"left":"right";case p.arrowright:return n?"right":"left";case p.arrowup:return"up";case p.arrowdown:return"down"}}function _n(e){if(e.endsWith("!"))return k(e.slice(0,-1));const t=k(e);return(M.isMac||M.isiOS)&&t==p.ctrl?p.cmd:t}function wn(e,t){const n=Yt(e,t);return n==="down"||n==="right"}function yn(){const e={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let t=65;t<=90;t++){const n=String.fromCharCode(t);e[n.toLowerCase()]=t}for(let t=48;t<=57;t++)e[t-48]=t;for(let t=112;t<=123;t++)e["f"+(t-111)]=t;return Object.assign(e,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),e}function En(e){return e.split("+").map(t=>t.trim())}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Tn=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function lt(e){return Tn.includes(e)?"rtl":"ltr"}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function $t(e){return Array.isArray(e)?e:[e]}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*//* istanbul ignore else -- @preserve */w.window.CKEDITOR_TRANSLATIONS||(w.window.CKEDITOR_TRANSLATIONS={});function xn(e,t,n=1,i){if(typeof n!="number")throw new h("translation-service-quantity-not-a-number",null,{quantity:n});const o=i||w.window.CKEDITOR_TRANSLATIONS,r=Ln(o);r===1&&(e=Object.keys(o)[0]);const s=t.id||t.string;if(r===0||!An(e,s,o))return n!==1?t.plural:t.string;const l=o[e].dictionary,c=o[e].getPluralForm||(f=>f===1?0:1),a=l[s];if(typeof a=="string")return a;const u=Number(c(n));return a[u]}function In(e){return Array.isArray(e)?e.reduce((t,n)=>oe(t,n)):e}function An(e,t,n){return!!n[e]&&!!n[e].dictionary[t]}function Ln(e){return Object.keys(e).length}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Cn{constructor({uiLanguage:t="en",contentLanguage:n,translations:i}={}){this.uiLanguage=t,this.contentLanguage=n||this.uiLanguage,this.uiLanguageDirection=lt(this.uiLanguage),this.contentLanguageDirection=lt(this.contentLanguage),this.translations=In(i),this.t=(o,r)=>this._t(o,r)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(t,n=[]){n=$t(n),typeof t=="string"&&(t={string:t});const o=!!t.plural?n[0]:1,r=xn(this.uiLanguage,t,o,this.translations);return Sn(r,n)}}function Sn(e,t){return e.replace(/%(\d+)/g,(n,i)=>i<t.length?t[i]:n)}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class vn extends T(){constructor(t={},n={}){super();const i=V(t);if(i||(n=t),this._items=[],this._itemMap=new Map,this._idProperty=n.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(const o of t)this._items.push(o),this._itemMap.set(this._getItemIdBeforeAdding(o),o)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(t,n){return this.addMany([t],n)}addMany(t,n){if(n===void 0)n=this._items.length;else if(n>this._items.length||n<0)throw new h("collection-add-item-invalid-index",this);let i=0;for(const o of t){const r=this._getItemIdBeforeAdding(o),s=n+i;this._items.splice(s,0,o),this._itemMap.set(r,o),this.fire("add",o,s),i++}return this.fire("change",{added:t,removed:[],index:n}),this}get(t){let n;if(typeof t=="string")n=this._itemMap.get(t);else if(typeof t=="number")n=this._items[t];else throw new h("collection-get-invalid-arg",this);return n||null}has(t){if(typeof t=="string")return this._itemMap.has(t);{const n=this._idProperty,i=t[n];return i&&this._itemMap.has(i)}}getIndex(t){let n;return typeof t=="string"?n=this._itemMap.get(t):n=t,n?this._items.indexOf(n):-1}remove(t){const[n,i]=this._remove(t);return this.fire("change",{added:[],removed:[n],index:i}),n}map(t,n){return this._items.map(t,n)}forEach(t,n){this._items.forEach(t,n)}find(t,n){return this._items.find(t,n)}filter(t,n){return this._items.filter(t,n)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const t=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}bindTo(t){if(this._bindToCollection)throw new h("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:n=>{this._setUpBindToBinding(i=>new n(i))},using:n=>{typeof n=="function"?this._setUpBindToBinding(n):this._setUpBindToBinding(i=>i[n])}}}_setUpBindToBinding(t){const n=this._bindToCollection,i=(o,r,s)=>{const l=n._bindToCollection==this,c=n._bindToInternalToExternalMap.get(r);if(l&&c)this._bindToExternalToInternalMap.set(r,c),this._bindToInternalToExternalMap.set(c,r);else{const a=t(r);if(!a){this._skippedIndexesFromExternal.push(s);return}let u=s;for(const f of this._skippedIndexesFromExternal)s>f&&u--;for(const f of n._skippedIndexesFromExternal)u>=f&&u++;this._bindToExternalToInternalMap.set(r,a),this._bindToInternalToExternalMap.set(a,r),this.add(a,u);for(let f=0;f<n._skippedIndexesFromExternal.length;f++)u<=n._skippedIndexesFromExternal[f]&&n._skippedIndexesFromExternal[f]++}};for(const o of n)i(null,o,n.getIndex(o));this.listenTo(n,"add",i),this.listenTo(n,"remove",(o,r,s)=>{const l=this._bindToExternalToInternalMap.get(r);l&&this.remove(l),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((c,a)=>(s<a&&c.push(a-1),s>a&&c.push(a),c),[])})}_getItemIdBeforeAdding(t){const n=this._idProperty;let i;if(n in t){if(i=t[n],typeof i!="string")throw new h("collection-add-invalid-id",this);if(this.get(i))throw new h("collection-add-item-already-exists",this)}else t[n]=i=P();return i}_remove(t){let n,i,o,r=!1;const s=this._idProperty;if(typeof t=="string"?(i=t,o=this._itemMap.get(i),r=!o,o&&(n=this._items.indexOf(o))):typeof t=="number"?(n=t,o=this._items[n],r=!o,o&&(i=o[s])):(o=t,i=o[s],n=this._items.indexOf(o),r=n==-1||!this._itemMap.get(i)),r)throw new h("collection-remove-404",this);this._items.splice(n,1),this._itemMap.delete(i);const l=this._bindToInternalToExternalMap.get(o);return this._bindToInternalToExternalMap.delete(o),this._bindToExternalToInternalMap.delete(l),this.fire("remove",o,n),[o,n]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Mn(e){const t=e.next();return t.done?null:t.value}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class qt extends F(j()){constructor(){super(),this._elements=new Set,this._externalViews=new Set,this._blurTimeout=null,this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(t){if(Xt(t))this._addElement(t);else if(ct(t))this._addView(t);else{if(!t.element)throw new h("focustracker-add-view-missing-element",{focusTracker:this,view:t});this._addElement(t.element)}}remove(t){Xt(t)?this._removeElement(t):ct(t)?this._removeView(t):this._removeElement(t.element)}_addElement(t){if(this._elements.has(t))throw new h("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",()=>{const n=this.externalViews.find(i=>Fn(t,i));n?this._focus(n.element):this._focus(t)},{useCapture:!0}),this.listenTo(t,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(t)}_removeElement(t){this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t)),t===this.focusedElement&&this._blur()}_addView(t){t.element&&this._addElement(t.element),this.listenTo(t.focusTracker,"change:focusedElement",()=>{t.focusTracker.focusedElement?t.element&&this._focus(t.element):this._blur()}),this._externalViews.add(t)}_removeView(t){t.element&&this._removeElement(t.element),this.stopListening(t.focusTracker),this._externalViews.delete(t)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(t){this._clearBlurTimeout(),this.focusedElement=t,this.isFocused=!0}_blur(){this.elements.find(i=>i.contains(document.activeElement))||this.externalViews.find(i=>i.focusTracker.isFocused&&!i.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function ct(e){return"focusTracker"in e&&e.focusTracker instanceof qt}function Xt(e){return ft(e)}function Fn(e,t){return Jt(e,t)?!0:!!t.focusTracker.externalViews.find(n=>Jt(e,n))}function Jt(e,t){return!!t.element&&t.element.contains(document.activeElement)&&e.contains(t.element)}/**
 * @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class kn{constructor(){this._listener=new(F())}listenTo(t){this._listener.listenTo(t,"keydown",(n,i)=>{this._listener.fire("_keydown:"+k(i),i)})}set(t,n,i={}){const o=st(t),r=i.priority;this._listener.listenTo(this._listener,"_keydown:"+o,(s,l)=>{i.filter&&!i.filter(l)||(n(l,()=>{l.preventDefault(),l.stopPropagation(),s.stop()}),s.return=!0)},{priority:r})}press(t){return!!this._listener.fire("_keydown:"+k(t),t)}stopListening(t){this._listener.stopListening(t)}destroy(){this.stopListening()}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Rn(e){const t=new Map;for(const n in e)t.set(n,e[n]);return t}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Pn(e){return V(e)?new Map(e):Rn(e)}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Qt(e,t={}){return new Promise((n,i)=>{const o=t.signal||new AbortController().signal;o.throwIfAborted();const r=setTimeout(s,e);o.addEventListener("abort",l,{once:!0});function s(){o.removeEventListener("abort",l),n()}function l(){clearTimeout(r),i(o.reason)}})}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/async function Nn(e,t={}){const{maxAttempts:n=4,retryDelay:i=Zt(),signal:o=new AbortController().signal}=t;o.throwIfAborted();for(let r=0;;r++){try{return await e()}catch(s){if(r+1>=n)throw s}await Qt(i(r),{signal:o})}}function Zt(e={}){const{delay:t=1e3,factor:n=2,maxDelay:i=1e4}=e;return o=>Math.min(n**o*t,i)}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Dn(e,t,n){const i=e.length,o=t.length;for(let r=i-1;r>=n;r--)e[r+o]=e[r];for(let r=0;r<o;r++)e[n+r]=t[r]}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Bn(e,t){let n;function i(...o){i.cancel(),n=setTimeout(()=>e(...o),t)}return i.cancel=()=>{clearTimeout(n)},i}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function On(e){try{if(!e.startsWith("ey"))return null;const t=atob(e.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(t)}catch{return null}}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function jn(){const e=[];for(let t=0;t<256;t++){let n=t;for(let i=0;i<8;i++)n&1?n=3988292384^n>>>1:n=n>>>1;e[t]=n}return e}function Vn(e){const t=Array.isArray(e)?e:[e],n=jn();let i=-1;const o=t.map(r=>Array.isArray(r)?r.join(""):String(r)).join("");for(let r=0;r<o.length;r++){const s=o.charCodeAt(r);i=i>>>8^n[(i^s)&255]}return i=(i^-1)>>>0,i.toString(16).padStart(8,"0")}/**
* @license Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function zt(e){return!!e&&e.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(e)}function te(e){return!!e&&e.length==1&&/[\ud800-\udbff]/.test(e)}function ee(e){return!!e&&e.length==1&&/[\udc00-\udfff]/.test(e)}function Wn(e,t){return te(e.charAt(t-1))&&ee(e.charAt(t))}function Kn(e,t){return zt(e.charAt(t))}const Hn=Gn();function Un(e,t){const n=String(e).matchAll(Hn);return Array.from(n).some(i=>i.index<t&&t<i.index+i[0].length)}function Gn(){const e=[/\p{Emoji}[\u{E0020}-\u{E007E}]+\u{E007F}/u,/\p{Emoji}\u{FE0F}?\u{20E3}/u,/\p{Emoji}\u{FE0F}/u,/(?=\p{General_Category=Other_Symbol})\p{Emoji}\p{Emoji_Modifier}*/u],t=/\p{Regional_Indicator}{2}/u.source,n="(?:"+e.map(o=>o.source).join("|")+")",i=`${t}|${n}(?:\u200D${n})*`;return new RegExp(i,"ug")}export{h as CKEditorError,vn as Collection,Ke as Config,F as DomEmitterMixin,Be as ElementReplacer,T as EmitterMixin,R as EventInfo,qt as FocusTracker,kn as KeystrokeHandler,Cn as Locale,j as ObservableMixin,g as Rect,d as ResizeObserver,Oe as abortableDebounce,Ve as compareArrays,je as count,Vn as crc32,We as createElement,Bn as delay,q as diff,_e as diffToChanges,M as env,Zt as exponentialDelay,pt as fastDiff,Ye as findClosestScrollableAncestor,Mn as first,$e as getAncestors,et as getBorderWidths,k as getCode,qe as getDataFromElement,mn as getEnvKeystrokeText,lt as getLanguageDirection,Yt as getLocalizedArrowKeyCodeDirection,rn as getOptimalPosition,Xe as getRangeFromMouseEvent,w as global,tn as indexOf,en as insertAt,_t as insertToPriorityArray,bn as isArrowKeyCode,zt as isCombiningMark,nn as isComment,wn as isForwardArrowKeyCode,te as isHighSurrogateHalf,Kn as isInsideCombinedSymbol,Un as isInsideEmojiSequence,Wn as isInsideSurrogatePair,V as isIterable,ee as isLowSurrogateHalf,tt as isNode,H as isRange,K as isText,on as isValidAttributeName,ct as isViewWithFocusTracker,Bt as isVisible,p as keyCodes,Te as logError,Ee as logWarning,we as mix,On as parseBase64EncodedObject,st as parseKeystroke,N as priorities,Ie as releaseDate,cn as remove,Nn as retry,un as scrollAncestorsToShowTarget,an as scrollViewportToShowTarget,Ze as setDataInElement,Dn as spliceArray,$t as toArray,Pn as toMap,ze as toUnit,P as uid,Et as version,Qt as wait};
