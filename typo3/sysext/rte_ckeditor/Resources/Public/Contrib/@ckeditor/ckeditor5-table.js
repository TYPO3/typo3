import{Command as v,Plugin as _}from"@ckeditor/ckeditor5-core";import{toWidgetEditable as et,toWidget as zo,Widget as Oo,isWidget as Do,WidgetToolbarRepository as tt}from"@ckeditor/ckeditor5-widget";import{first as Te,global as oe,CKEditorError as ot,KeystrokeHandler as ne,FocusTracker as le,Collection as ve,getLocalizedArrowKeyCodeDirection as No,Rect as ie,DomEmitterMixin as Fo,toUnit as Mo}from"@ckeditor/ckeditor5-utils";import{IconTable as nt,IconTableColumn as Ho,IconTableRow as Uo,IconTableMergeCell as jo,IconCheck as lt,IconCancel as it,IconAlignBottom as $o,IconAlignMiddle as Go,IconAlignTop as Ko,IconAlignJustify as qo,IconAlignRight as Xo,IconAlignCenter as Jo,IconAlignLeft as Yo,IconTableCellProperties as Zo,IconTableLayout as rt,IconTableProperties as st,IconObjectInlineRight as Qo,IconObjectCenter as en,IconObjectInlineLeft as tn,IconCaption as on}from"@ckeditor/ckeditor5-icons";import{View as D,addKeyboardHandlingForGrid as nn,ButtonView as E,createDropdown as $,MenuBarMenuView as at,SwitchButtonView as ln,SplitButtonView as ct,addListToDropdown as re,ViewModel as Ae,ViewCollection as xe,FocusCycler as Se,InputTextView as rn,ColorSelectorView as sn,FormHeaderView as dt,FormRowView as x,submitHandler as ut,LabelView as B,LabeledFieldView as S,createLabeledDropdown as bt,createLabeledInputText as N,ToolbarView as Re,BalloonPanelView as F,ContextualBalloon as se,normalizeColorOptions as ae,getLocalizedColorOptions as ce,clickOutsideHandler as mt,DropdownButtonView as an}from"@ckeditor/ckeditor5-ui";import{ClipboardMarkersUtils as Ie,ClipboardPipeline as ht}from"@ckeditor/ckeditor5-clipboard";import{DomEventObserver as cn,isColor as dn,isLength as gt,isPercentage as un,addBorderRules as ft,addPaddingRules as bn,addBackgroundRules as pt,enablePlaceholder as mn,Element as hn}from"@ckeditor/ckeditor5-engine";/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Ve(i,e){const{modelAttribute:t,styleName:o,viewElement:n,defaultValue:l,reduceBoxSides:r=!1,shouldUpcast:s=()=>!0}=e;i.for("upcast").attributeToAttribute({view:{name:n,styles:{[o]:/[\s\S]+/}},model:{key:t,value:(a,c,d)=>{if(!s(a))return;const u=z(l,"",d),b=a.getNormalizedStyle(o),m=r?ue(b):b;if(u!==m)return m}}})}function Pe(i,e,t,o){i.for("upcast").add(n=>n.on("element:"+e,(l,r,s)=>{if(!r.modelRange)return;const a=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(g=>r.viewItem.hasStyle(g));if(!a.length)return;const c={styles:a};if(!s.consumable.test(r.viewItem,c))return;const d=[...r.modelRange.getItems({shallow:!0})].pop(),u=d.findAncestor("table",{includeSelf:!0});let b=o;u&&u.getAttribute("tableType")=="layout"&&(b={style:"none",color:"",width:""}),s.consumable.consume(r.viewItem,c);const m={style:r.viewItem.getNormalizedStyle("border-style"),color:r.viewItem.getNormalizedStyle("border-color"),width:r.viewItem.getNormalizedStyle("border-width")},h={style:ue(m.style),color:ue(m.color),width:ue(m.width)};h.style!==b.style&&s.writer.setAttribute(t.style,h.style,d),h.color!==b.color&&s.writer.setAttribute(t.color,h.color,d),h.width!==b.width&&s.writer.setAttribute(t.width,h.width,d)}))}function X(i,e){const{modelElement:t,modelAttribute:o,styleName:n}=e;i.for("downcast").attributeToAttribute({model:{name:t,key:o},view:l=>({key:"style",value:{[n]:l}})})}function de(i,e){const{modelAttribute:t,styleName:o}=e;i.for("downcast").add(n=>n.on(`attribute:${t}:table`,(l,r,s)=>{const{item:a,attributeNewValue:c}=r,{mapper:d,writer:u}=s;if(!s.consumable.consume(r.item,l.name))return;const b=[...d.toViewElement(a).getChildren()].find(m=>m.is("element","table"));c?u.setStyle(o,c,b):u.removeStyle(o,b)}))}function z(i,e,t){const o=t.modelRange&&Te(t.modelRange.getItems({shallow:!0})),n=o&&o.is("element")&&o.findAncestor("table",{includeSelf:!0});return n&&n.getAttribute("tableType")==="layout"?e:i}function ue(i){if(!i)return;const e=["top","right","bottom","left"];if(!e.every(l=>i[l]))return i;const o=i.top;return e.every(l=>i[l]===o)?o:i}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function y(i,e,t,o,n=1){e!=null&&n!==void 0&&n!==null&&e>n?o.setAttribute(i,e,t):o.removeAttribute(i,t)}function O(i,e,t={}){const o=i.createElement("tableCell",t);return i.insertElement("paragraph",o),i.insert(o,e),o}function Ee(i,e){const t=e.parent.parent,o=parseInt(t.getAttribute("headingColumns")||"0"),{column:n}=i.getCellLocation(e);return!!o&&n<o}function be(i,e,t){const{modelAttribute:o}=t;i.extend("tableCell",{allowAttributes:[o]}),Ve(e,{viewElement:/^(td|th)$/,...t}),X(e,{modelElement:"tableCell",...t})}function P(i){const e=i.getSelectedElement();return e&&e.is("element","table")?e:i.getFirstPosition().findAncestor("table")}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function gn(){return i=>{i.on("element:figure",(e,t,o)=>{if(!o.consumable.test(t.viewItem,{name:!0,classes:"table"}))return;const n=wn(t.viewItem);if(!n||!o.consumable.test(n,{name:!0}))return;o.consumable.consume(t.viewItem,{name:!0,classes:"table"});const l=o.convertItem(n,t.modelCursor),r=Te(l.modelRange.getItems());if(!r){o.consumable.revert(t.viewItem,{name:!0,classes:"table"});return}o.convertChildren(t.viewItem,o.writer.createPositionAt(r,"end")),o.updateConversionResult(r,t)})}}function fn(){return i=>{i.on("element:table",(e,t,o)=>{const n=t.viewItem;if(!o.consumable.test(n,{name:!0}))return;const{rows:l,headingRows:r,headingColumns:s}=Cn(n),a={};s&&(a.headingColumns=s),r&&(a.headingRows=r);const c=o.writer.createElement("table",a);if(o.safeInsert(c,t.modelCursor)){if(o.consumable.consume(n,{name:!0}),l.forEach(d=>o.convertItem(d,o.writer.createPositionAt(c,"end"))),o.convertChildren(n,o.writer.createPositionAt(c,"end")),c.isEmpty){const d=o.writer.createElement("tableRow");o.writer.insert(d,o.writer.createPositionAt(c,"end")),O(o.writer,o.writer.createPositionAt(d,"end"))}o.updateConversionResult(c,t)}})}}function pn(){return i=>{i.on("element:tr",(e,t)=>{t.viewItem.isEmpty&&t.modelCursor.index==0&&e.stop()},{priority:"high"})}}function wt(i){return e=>{e.on(`element:${i}`,(t,o,{writer:n})=>{if(!o.modelRange)return;const l=o.modelRange.start.nodeAfter,r=n.createPositionAt(l,0);if(o.viewItem.isEmpty){n.insertElement("paragraph",r);return}const s=Array.from(l.getChildren());if(s.every(a=>a.is("element","$marker"))){const a=n.createElement("paragraph");n.insert(a,n.createPositionAt(l,0));for(const c of s)n.move(n.createRangeOn(c),n.createPositionAt(a,"end"))}},{priority:"low"})}}function wn(i){for(const e of i.getChildren())if(e.is("element","table"))return e}function Cn(i){let e=0,t;const o=[],n=[];let l;for(const r of Array.from(i.getChildren())){if(r.name!=="tbody"&&r.name!=="thead"&&r.name!=="tfoot")continue;r.name==="thead"&&!l&&(l=r);const s=Array.from(r.getChildren()).filter(c=>c.is("element","tr"));let a=null;for(const c of s){const d=Array.from(c.getChildren()).filter(u=>u.is("element","td")||u.is("element","th"));if(l&&r===l||r.name==="tbody"&&d.length>0&&(a===null||d.length===a)&&d.every(u=>u.is("element","th")))e++,o.push(c);else{n.push(c);const u=_n(c);(!t||u<t)&&(t=u)}a=Math.max(a||0,d.length)}}return{headingRows:e,headingColumns:t||0,rows:[...o,...n]}}function _n(i){let e=0,t=0;const o=Array.from(i.getChildren()).filter(n=>n.name==="th"||n.name==="td");for(;t<o.length&&o[t].name==="th";){const n=o[t],l=parseInt(n.getAttribute("colspan")||"1");e=e+l,t++}return e}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class C{_table;_startRow;_endRow;_startColumn;_endColumn;_includeAllSlots;_skipRows;_row;_rowIndex;_column;_cellIndex;_spannedCells;_nextCellAtColumn;_jumpedToStartRow=!1;constructor(e,t={}){this._table=e,this._startRow=t.row!==void 0?t.row:t.startRow||0,this._endRow=t.row!==void 0?t.row:t.endRow,this._startColumn=t.column!==void 0?t.column:t.startColumn||0,this._endColumn=t.column!==void 0?t.column:t.endColumn,this._includeAllSlots=!!t.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const e=this._table.getChild(this._rowIndex);if(!e||this._isOverEndRow())return{done:!0,value:void 0};if(!e.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let t=null;const o=this._getSpanned();if(o)this._includeAllSlots&&!this._shouldSkipSlot()&&(t=this._formatOutValue(o.cell,o.row,o.column));else{const n=e.getChild(this._cellIndex);if(!n)return this._advanceToNextRow();const l=parseInt(n.getAttribute("colspan")||"1"),r=parseInt(n.getAttribute("rowspan")||"1");(l>1||r>1)&&this._recordSpans(n,r,l),this._shouldSkipSlot()||(t=this._formatOutValue(n)),this._nextCellAtColumn=this._column+l}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,t||this.next()}skipRow(e){this._skipRows.add(e)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(e,t=this._row,o=this._column){return{done:!1,value:new kn(this,e,t,o)}}_shouldSkipSlot(){const e=this._skipRows.has(this._row),t=this._row<this._startRow,o=this._column<this._startColumn,n=this._endColumn!==void 0&&this._column>this._endColumn;return e||t||o||n}_getSpanned(){const e=this._spannedCells.get(this._row);return e&&e.get(this._column)||null}_recordSpans(e,t,o){const n={cell:e,row:this._row,column:this._column};for(let l=this._row;l<this._row+t;l++)for(let r=this._column;r<this._column+o;r++)(l!=this._row||r!=this._column)&&this._markSpannedCell(l,r,n)}_markSpannedCell(e,t,o){this._spannedCells.has(e)||this._spannedCells.set(e,new Map),this._spannedCells.get(e).set(t,o)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const e=this._getRowLength(0);for(let t=this._startRow;!this._jumpedToStartRow;t--)e===this._getRowLength(t)&&(this._row=t,this._rowIndex=t,this._jumpedToStartRow=!0)}_getRowLength(e){return[...this._table.getChild(e).getChildren()].reduce((o,n)=>o+parseInt(n.getAttribute("colspan")||"1"),0)}}class kn{cell;row;column;cellAnchorRow;cellAnchorColumn;_cellIndex;_rowIndex;_table;constructor(e,t,o,n){this.cell=t,this.row=e._row,this.column=e._column,this.cellAnchorRow=o,this.cellAnchorColumn=n,this._cellIndex=e._cellIndex,this._rowIndex=e._rowIndex,this._table=e._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function Ct(i,e){return(t,{writer:o})=>{const n=t.getAttribute("headingRows")||0,l=o.createContainerElement("table",null,[]),r=o.createContainerElement("figure",{class:"table"},l);n>0&&o.insert(o.createPositionAt(l,"end"),o.createContainerElement("thead",null,o.createSlot(s=>s.is("element","tableRow")&&s.index<n))),n<i.getRows(t)&&o.insert(o.createPositionAt(l,"end"),o.createContainerElement("tbody",null,o.createSlot(s=>s.is("element","tableRow")&&s.index>=n)));for(const{positionOffset:s,filter:a}of e.additionalSlots)o.insert(o.createPositionAt(l,s),o.createSlot(a));return o.insert(o.createPositionAt(l,"after"),o.createSlot(s=>s.is("element","tableRow")?!1:!e.additionalSlots.some(({filter:a})=>a(s)))),e.asWidget?Tn(r,o):r}}function yn(){return(i,{writer:e})=>i.isEmpty?e.createEmptyElement("tr"):e.createContainerElement("tr")}function _t(i={}){return(e,{writer:t})=>{const o=e.parent,n=o.parent,l=n.getChildIndex(o),r=new C(n,{row:l}),s=n.getAttribute("headingRows")||0,a=n.getAttribute("headingColumns")||0;let c=null;for(const d of r)if(d.cell==e){const b=d.row<s||d.column<a?"th":"td";c=i.asWidget?et(t.createEditableElement(b),t,{withAriaRole:!1}):t.createContainerElement(b);break}return c}}function kt(i={}){return(e,{writer:t})=>{if(!e.parent.is("element","tableCell")||!yt(e))return null;if(i.asWidget)return t.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const o=t.createContainerElement("p");return t.setCustomProperty("dataPipeline:transparentRendering",!0,o),o}}}function yt(i){return i.parent.childCount==1&&!vn(i)}function Tn(i,e){return e.setCustomProperty("table",!0,i),zo(i,e,{hasSelectionHandle:!0})}function vn(i){for(const e of i.getAttributeKeys())if(!(e.startsWith("selection:")||e=="htmlEmptyBlock"))return!0;return!1}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class An extends v{refresh(){const e=this.editor.model,t=e.document.selection,o=e.schema;this.isEnabled=xn(t,o)}execute(e={}){const t=this.editor,o=t.model,n=t.plugins.get("TableUtils"),l=t.config.get("table.defaultHeadings.rows"),r=t.config.get("table.defaultHeadings.columns");e.headingRows===void 0&&l&&(e.headingRows=l),e.headingColumns===void 0&&r&&(e.headingColumns=r),o.change(s=>{const a=n.createTable(s,e);o.insertObject(a,null,null,{findOptimalPosition:"auto"}),s.setSelection(s.createPositionAt(a.getNodeByPath([0,0,0]),0))})}}function xn(i,e){const t=i.getFirstPosition().parent,o=t===t.root?t:t.parent;return e.checkChild(o,"table")}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Tt extends v{order;constructor(e,t={}){super(e),this.order=t.order||"below"}refresh(){const e=this.editor.model.document.selection,o=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=o}execute(){const e=this.editor,t=e.model.document.selection,o=e.plugins.get("TableUtils"),n=this.order==="above",l=o.getSelectionAffectedTableCells(t),r=o.getRowIndexes(l),s=n?r.first:r.last,a=l[0].findAncestor("table");o.insertRows(a,{at:n?s:s+1,copyStructureFromAbove:!n})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class vt extends v{order;constructor(e,t={}){super(e),this.order=t.order||"right"}refresh(){const e=this.editor.model.document.selection,o=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(e).length;this.isEnabled=o}execute(){const e=this.editor,t=e.model.document.selection,o=e.plugins.get("TableUtils"),n=this.order==="left",l=o.getSelectionAffectedTableCells(t),r=o.getColumnIndexes(l),s=n?r.first:r.last,a=l[0].findAncestor("table");o.insertColumns(a,{columns:1,at:n?s:s+1})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class At extends v{direction;constructor(e,t={}){super(e),this.direction=t.direction||"horizontally"}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length===1}execute(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?e.splitCellHorizontally(t,2):e.splitCellVertically(t,2)}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function xt(i,e,t){const{startRow:o,startColumn:n,endRow:l,endColumn:r}=e,s=t.createElement("table"),a=i.getAttribute("tableType");a&&t.setAttribute("tableType",a,s);const c=l-o+1;for(let u=0;u<c;u++)t.insertElement("tableRow",s,"end");const d=[...new C(i,{startRow:o,endRow:l,startColumn:n,endColumn:r,includeAllSlots:!0})];for(const{row:u,column:b,cell:m,isAnchor:h,cellAnchorRow:g,cellAnchorColumn:f}of d){const p=u-o,w=s.getChild(p);if(!h)(g<o||f<n)&&O(t,t.createPositionAt(w,"end"));else{const k=t.cloneElement(m);t.append(k,w),Pt(k,u,b,l,r,t)}}return Sn(s,i,o,n,t),s}function St(i,e,t=0){const o=[],n=new C(i,{startRow:t,endRow:e-1});for(const l of n){const{row:r,cellHeight:s}=l,a=r+s-1;r<e&&e<=a&&o.push(l)}return o}function Rt(i,e,t){const o=i.parent,n=o.parent,l=o.index,r=parseInt(i.getAttribute("rowspan")),s=e-l,a={},c=r-s;c>1&&(a.rowspan=c);const d=parseInt(i.getAttribute("colspan")||"1");d>1&&(a.colspan=d);const u=l,b=u+s,m=[...new C(n,{startRow:u,endRow:b,includeAllSlots:!0})];let h=null,g;for(const f of m){const{row:p,column:w,cell:k}=f;k===i&&g===void 0&&(g=w),g!==void 0&&g===w&&p===b&&(h=O(t,f.getPositionBefore(),a))}return y("rowspan",s,i,t),h}function It(i,e){const t=[],o=new C(i);for(const n of o){const{column:l,cellWidth:r}=n,s=l+r-1;l<e&&e<=s&&t.push(n)}return t}function Vt(i,e,t,o){const n=parseInt(i.getAttribute("colspan")),l=t-e,r={},s=n-l;s>1&&(r.colspan=s);const a=parseInt(i.getAttribute("rowspan")||"1");a>1&&(r.rowspan=a);const c=O(o,o.createPositionAfter(i),r);return y("colspan",l,i,o),c}function Pt(i,e,t,o,n,l){const r=parseInt(i.getAttribute("colspan")||"1"),s=parseInt(i.getAttribute("rowspan")||"1");if(t+r-1>n){const d=n-t+1;y("colspan",d,i,l,1)}if(e+s-1>o){const d=o-e+1;y("rowspan",d,i,l,1)}}function Sn(i,e,t,o,n){const l=parseInt(e.getAttribute("headingRows")||"0");if(l>0){const s=l-t;y("headingRows",s,i,n,0)}const r=parseInt(e.getAttribute("headingColumns")||"0");if(r>0){const s=r-o;y("headingColumns",s,i,n,0)}}function Le(i,e){const t=e.getColumns(i),o=new Array(t).fill(0);for(const{column:l}of new C(i))o[l]++;const n=o.reduce((l,r,s)=>r?l:[...l,s],[]);if(n.length>0){const l=n[n.length-1];return e.removeColumns(i,{at:l}),!0}return!1}function We(i,e){const t=[],o=e.getRows(i);for(let n=0;n<o;n++)i.getChild(n).isEmpty&&t.push(n);if(t.length>0){const n=t[t.length-1];return e.removeRows(i,{at:n}),!0}return!1}function Be(i,e){Le(i,e)||We(i,e)}function Et(i,e){const t=Array.from(new C(i,{startColumn:e.firstColumn,endColumn:e.lastColumn,row:e.lastRow}));if(t.every(({cellHeight:l})=>l===1))return e.lastRow;const n=t[0].cellHeight-1;return e.lastRow+n}function Lt(i,e){const t=Array.from(new C(i,{startRow:e.firstRow,endRow:e.lastRow,column:e.lastColumn}));if(t.every(({cellWidth:l})=>l===1))return e.lastColumn;const n=t[0].cellWidth-1;return e.lastColumn+n}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class me extends v{direction;isHorizontal;constructor(e,t){super(e),this.direction=t.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const e=this._getMergeableCell();this.value=e,this.isEnabled=!!e}execute(){const e=this.editor.model,t=e.document,n=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(t.selection)[0],l=this.value,r=this.direction;e.change(s=>{const a=r=="right"||r=="down",c=a?n:l,d=a?l:n,u=d.parent;Vn(d,c,s);const b=this.isHorizontal?"colspan":"rowspan",m=parseInt(n.getAttribute(b)||"1"),h=parseInt(l.getAttribute(b)||"1");s.setAttribute(b,m+h,c),s.setSelection(s.createRangeIn(c));const g=this.editor.plugins.get("TableUtils"),f=u.findAncestor("table");Be(f,g)})}_getMergeableCell(){const t=this.editor.model.document,o=this.editor.plugins.get("TableUtils"),n=o.getTableCellsContainingSelection(t.selection)[0];if(!n)return;const l=this.isHorizontal?Rn(n,this.direction,o):In(n,this.direction,o);if(!l)return;const r=this.isHorizontal?"rowspan":"colspan",s=parseInt(n.getAttribute(r)||"1");if(parseInt(l.getAttribute(r)||"1")===s)return l}}function Rn(i,e,t){const n=i.parent.parent,l=e=="right"?i.nextSibling:i.previousSibling,r=(n.getAttribute("headingColumns")||0)>0;if(!l)return;const s=e=="right"?i:l,a=e=="right"?l:i,{column:c}=t.getCellLocation(s),{column:d}=t.getCellLocation(a),u=parseInt(s.getAttribute("colspan")||"1"),b=Ee(t,s),m=Ee(t,a);return r&&b!=m?void 0:c+u===d?l:void 0}function In(i,e,t){const o=i.parent,n=o.parent,l=n.getChildIndex(o);if(e=="down"&&l===t.getRows(n)-1||e=="up"&&l===0)return null;const r=parseInt(i.getAttribute("rowspan")||"1"),s=n.getAttribute("headingRows")||0,a=e=="down"&&l+r===s,c=e=="up"&&l===s;if(s&&(a||c))return null;const d=parseInt(i.getAttribute("rowspan")||"1"),u=e=="down"?l+d:l,b=[...new C(n,{endRow:u})],h=b.find(f=>f.cell===i).column,g=b.find(({row:f,cellHeight:p,column:w})=>w!==h?!1:e=="down"?f===u:u===f+p);return g&&g.cell?g.cell:null}function Vn(i,e,t){Wt(i)||(Wt(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(i),t.createPositionAt(e,"end"))),t.remove(i)}function Wt(i){const e=i.getChild(0);return i.childCount==1&&e.is("element","paragraph")&&e.isEmpty}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Pn extends v{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),o=t[0];if(o){const n=o.findAncestor("table"),r=e.getRows(n)-1,s=e.getRowIndexes(t),a=s.first===0&&s.last===r;this.isEnabled=!a}else this.isEnabled=!1}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),o=t.getSelectionAffectedTableCells(e.document.selection),n=t.getRowIndexes(o),l=o[0],r=l.findAncestor("table"),s=t.getCellLocation(l).column;e.change(a=>{const c=n.last-n.first+1;t.removeRows(r,{at:n.first,rows:c});const d=En(r,n.first,s,t.getRows(r));a.setSelection(a.createPositionAt(d,0))})}}function En(i,e,t,o){const n=i.getChild(Math.min(e,o-1));let l=n.getChild(0),r=0;for(const s of n.getChildren()){if(r>t)return l;l=s,r+=parseInt(s.getAttribute("colspan")||"1")}return l}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ln extends v{refresh(){const e=this.editor.plugins.get("TableUtils"),t=e.getSelectionAffectedTableCells(this.editor.model.document.selection),o=t[0];if(o){const n=o.findAncestor("table"),l=e.getColumns(n),{first:r,last:s}=e.getColumnIndexes(t);this.isEnabled=s-r<l-1}else this.isEnabled=!1}execute(){const e=this.editor.plugins.get("TableUtils"),[t,o]=Bn(this.editor.model.document.selection,e),n=t.parent.parent,l=[...new C(n)],r={first:l.find(a=>a.cell===t).column,last:l.find(a=>a.cell===o).column},s=Wn(l,t,o,r);this.editor.model.change(a=>{const c=r.last-r.first+1;e.removeColumns(n,{at:r.first,columns:c}),a.setSelection(a.createPositionAt(s,0))})}}function Wn(i,e,t,o){return parseInt(t.getAttribute("colspan")||"1")>1?t:e.previousSibling||t.nextSibling?t.nextSibling||e.previousSibling:o.first?i.reverse().find(({column:l})=>l<o.first).cell:i.reverse().find(({column:l})=>l>o.last).cell}function Bn(i,e){const t=e.getSelectionAffectedTableCells(i),o=t[0],n=t.pop(),l=[o,n];return o.isBefore(n)?l:l.reverse()}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class zn extends v{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,o=e.getSelectionAffectedTableCells(t.document.selection);if(o.length===0){this.isEnabled=!1,this.value=!1;return}const n=o[0].findAncestor("table");this.isEnabled=t.schema.checkAttribute(n,"headingRows"),this.value=o.every(l=>this._isInHeading(l,l.parent.parent))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),o=this.editor.model,n=t.getSelectionAffectedTableCells(o.document.selection),l=n[0].findAncestor("table"),{first:r,last:s}=t.getRowIndexes(n),a=this.value?r:s+1,c=l.getAttribute("headingRows")||0;o.change(d=>{if(a){const u=a>c?c:0,b=St(l,a,u);for(const{cell:m}of b)Rt(m,a,d)}y("headingRows",a,l,d,0)})}_isInHeading(e,t){const o=parseInt(t.getAttribute("headingRows")||"0");return!!o&&e.parent.index<o}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class On extends v{refresh(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,o=e.getSelectionAffectedTableCells(t.document.selection);if(o.length===0){this.isEnabled=!1,this.value=!1;return}const n=o[0].findAncestor("table");this.isEnabled=t.schema.checkAttribute(n,"headingColumns"),this.value=o.every(l=>Ee(e,l))}execute(e={}){if(e.forceValue===this.value)return;const t=this.editor.plugins.get("TableUtils"),o=this.editor.model,n=t.getSelectionAffectedTableCells(o.document.selection),l=n[0].findAncestor("table"),{first:r,last:s}=t.getColumnIndexes(n),a=this.value?r:s+1;o.change(c=>{if(a){const d=It(l,a);for(const{cell:u,column:b}of d)Vt(u,b,a,c)}y("headingColumns",a,l,c,0)})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Dn=5,ze=40,Nn=2,Fn=3;/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Mn(i){const e=new Set;for(const t of i.document.differ.getChanges()){let o=null;switch(t.type){case"insert":o=["table","tableRow","tableCell"].includes(t.name)?t.position:null;break;case"remove":o=["tableRow","tableCell"].includes(t.name)?t.position:null;break;case"attribute":t.range.start.nodeAfter&&(o=["table","tableRow","tableCell"].includes(t.range.start.nodeAfter.name)?t.range.start:null);break}if(!o)continue;const n=o.nodeAfter&&o.nodeAfter.is("element","table")?o.nodeAfter:o.findAncestor("table");for(const l of i.createRangeOn(n).getItems())l.is("element","table")&&Y(l)&&e.add(l)}return e}function Hn(i,e){return ze*100/Bt(i,e)}function Bt(i,e){const t=zt(i,"tbody",e)||zt(i,"thead",e),o=e.editing.view.domConverter.mapViewToDom(t);return Oe(o)}function zt(i,e,t){return[...[...t.editing.mapper.toViewElement(i).getChildren()].find(l=>l.is("element","table")).getChildren()].find(l=>l.is("element",e))}function Oe(i){const e=oe.window.getComputedStyle(i);return e.boxSizing==="border-box"?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth):parseFloat(e.width)}function Un(i,e){const t=e.getCellLocation(i).column,o=i.getAttribute("colspan")||1;return{leftEdge:t,rightEdge:t+o-1}}function A(i){const e=Math.pow(10,Nn),t=typeof i=="number"?i:parseFloat(i);return Math.round(t*e)/e}function jn(i,e,t){return i<=e?A(e):i>=t?A(t):A(i)}function $n(i,e){return Array(i).fill(e)}function J(i){return i.map(e=>typeof e=="number"?e:parseFloat(e)).filter(e=>!Number.isNaN(e)).reduce((e,t)=>e+t,0)}function De(i){const e=i.map(n=>n==="auto"?n:parseFloat(n.replace("%","")));let t=Gn(e);const o=J(t);return o!==100&&(t=t.map(n=>A(n*100/o)).map((n,l,r)=>{if(!(l===r.length-1))return n;const a=J(r);return A(n+100-a)})),t.map(n=>n+"%")}function Gn(i){const e=i.filter(n=>n==="auto").length;if(e===0)return i.map(n=>A(n));const t=J(i),o=Math.max((100-t)/e,Dn);return i.map(n=>n==="auto"?o:n).map(n=>A(n))}function Kn(i){const e=oe.window.getComputedStyle(i);return e.boxSizing==="border-box"?parseInt(e.width):parseFloat(e.width)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderWidth)}function Ot(i,e,t,o){for(let n=0;n<Math.max(t.length,i.length);n++){const l=i[n],r=t[n];r?l?o.setAttribute("columnWidth",r,l):o.appendElement("tableColumn",{columnWidth:r},e):o.remove(l)}}function Y(i){if(i.is("element","tableColumnGroup"))return i;const e=i.getChildren();return Array.from(e).find(t=>t.is("element","tableColumnGroup"))}function Z(i){const e=Y(i);return e?Array.from(e.getChildren()):[]}function qn(i){return Z(i).map(e=>e.getAttribute("columnWidth"))}function Xn(i,e){return Z(i).reduce((o,n)=>{const l=n.getAttribute("columnWidth"),r=n.getAttribute("colSpan");if(!r)return o.push(l),o;for(let s=0;s<r;s++)o.push(l);return e.removeAttribute("colSpan",n),o},[])}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class T extends _{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(e){const t=e.parent,o=t.parent,n=o.getChildIndex(t),l=new C(o,{row:n});for(const{cell:r,row:s,column:a}of l)if(r===e)return{row:s,column:a};/* istanbul ignore next -- @preserve */}createTable(e,t){const o=e.createElement("table"),n=t.rows||2,l=t.columns||2;return Ne(e,o,0,n,l),t.headingRows&&y("headingRows",Math.min(t.headingRows,n),o,e,0),t.headingColumns&&y("headingColumns",Math.min(t.headingColumns,l),o,e,0),o}insertRows(e,t={}){const o=this.editor.model,n=t.at||0,l=t.rows||1,r=t.copyStructureFromAbove!==void 0,s=t.copyStructureFromAbove?n-1:n,a=this.getRows(e),c=this.getColumns(e);if(n>a)throw new ot("tableutils-insertrows-insert-out-of-range",this,{options:t});o.change(d=>{const u=e.getAttribute("headingRows")||0;if(u>n&&y("headingRows",u+l,e,d,0),!r&&(n===0||n===a)){Ne(d,e,n,l,c);return}const b=r?Math.max(n,s):n,m=new C(e,{endRow:b}),h=new Array(c).fill(1);for(const{row:g,column:f,cellHeight:p,cellWidth:w,cell:k}of m){const I=g+p-1,V=g<n&&n<=I,q=g<=s&&s<=I;V?(d.setAttribute("rowspan",p+l,k),h[f]=-w):r&&q&&(h[f]=w)}for(let g=0;g<l;g++){const f=d.createElement("tableRow");d.insert(f,e,n);for(let p=0;p<h.length;p++){const w=h[p],k=d.createPositionAt(f,"end");w>0&&O(d,k,w>1?{colspan:w}:void 0),p+=Math.abs(w)-1}}})}insertColumns(e,t={}){const o=this.editor.model,n=t.at||0,l=t.columns||1;o.change(r=>{const s=e.getAttribute("headingColumns");n<s&&r.setAttribute("headingColumns",s+l,e);const a=this.getColumns(e);if(n===0||a===n){for(const d of e.getChildren())d.is("element","tableRow")&&G(l,r,r.createPositionAt(d,n?"end":0));return}const c=new C(e,{column:n,includeAllSlots:!0});for(const d of c){const{row:u,cell:b,cellAnchorColumn:m,cellAnchorRow:h,cellWidth:g,cellHeight:f}=d;if(m<n){r.setAttribute("colspan",g+l,b);const p=h+f-1;for(let w=u;w<=p;w++)c.skipRow(w)}else G(l,r,d.getPositionBefore())}})}removeRows(e,t){const o=this.editor.model,n=t.rows||1,l=this.getRows(e),r=t.at,s=r+n-1;if(s>l-1)throw new ot("tableutils-removerows-row-index-out-of-range",this,{table:e,options:t});o.change(a=>{const c={first:r,last:s},{cellsToMove:d,cellsToTrim:u}=Zn(e,c);if(d.size){const b=s+1;Qn(e,b,d,a)}for(let b=s;b>=r;b--)a.remove(e.getChild(b));for(const{rowspan:b,cell:m}of u)y("rowspan",b,m,a);Yn(e,c,a),Le(e,this)||We(e,this)})}removeColumns(e,t){const o=this.editor.model,n=t.at,l=t.columns||1,r=t.at+l-1;o.change(s=>{Jn(e,{first:n,last:r},s);const a=Z(e);for(let c=r;c>=n;c--){for(const{cell:d,column:u,cellWidth:b}of[...new C(e)])u<=c&&b>1&&u+b>c?y("colspan",b-1,d,s):u===c&&s.remove(d);if(a[c]){const d=c===0?a[1]:a[c-1],u=parseFloat(a[c].getAttribute("columnWidth")),b=parseFloat(d.getAttribute("columnWidth"));s.remove(a[c]),s.setAttribute("columnWidth",u+b+"%",d)}}We(e,this)||Le(e,this)})}splitCellVertically(e,t=2){const o=this.editor.model,l=e.parent.parent,r=parseInt(e.getAttribute("rowspan")||"1"),s=parseInt(e.getAttribute("colspan")||"1");o.change(a=>{if(s>1){const{newCellsSpan:c,updatedSpan:d}=Dt(s,t);y("colspan",d,e,a);const u={};c>1&&(u.colspan=c),r>1&&(u.rowspan=r);const b=s>t?t-1:s-1;G(b,a,a.createPositionAfter(e),u)}if(s<t){const c=t-s,d=[...new C(l)],{column:u}=d.find(({cell:g})=>g===e),b=d.filter(({cell:g,cellWidth:f,column:p})=>{const w=g!==e&&p===u,k=p<u&&p+f>u;return w||k});for(const{cell:g,cellWidth:f}of b)a.setAttribute("colspan",f+c,g);const m={};r>1&&(m.rowspan=r),G(c,a,a.createPositionAfter(e),m);const h=l.getAttribute("headingColumns")||0;h>u&&y("headingColumns",h+c,l,a)}})}splitCellHorizontally(e,t=2){const o=this.editor.model,n=e.parent,l=n.parent,r=l.getChildIndex(n),s=parseInt(e.getAttribute("rowspan")||"1"),a=parseInt(e.getAttribute("colspan")||"1");o.change(c=>{if(s>1){const d=[...new C(l,{startRow:r,endRow:r+s-1,includeAllSlots:!0})],{newCellsSpan:u,updatedSpan:b}=Dt(s,t);y("rowspan",b,e,c);const{column:m}=d.find(({cell:f})=>f===e),h={};u>1&&(h.rowspan=u),a>1&&(h.colspan=a);let g=0;for(const f of d){const{column:p,row:w}=f,k=w>=r+b,I=p===m;g>=u&&I&&(g=0),k&&I&&(g||G(1,c,f.getPositionBefore(),h),g++)}}if(s<t){const d=t-s,u=[...new C(l,{startRow:0,endRow:r})];for(const{cell:h,cellHeight:g,row:f}of u)if(h!==e&&f+g>r){const p=g+d;c.setAttribute("rowspan",p,h)}const b={};a>1&&(b.colspan=a),Ne(c,l,r+1,d,1,b);const m=l.getAttribute("headingRows")||0;m>r&&y("headingRows",m+d,l,c)}})}getColumns(e){return[...e.getChild(0).getChildren()].filter(o=>o.is("element","tableCell")).reduce((o,n)=>{const l=parseInt(n.getAttribute("colspan")||"1");return o+l},0)}getRows(e){return Array.from(e.getChildren()).reduce((t,o)=>o.is("element","tableRow")?t+1:t,0)}createTableWalker(e,t={}){return new C(e,t)}getSelectedTableCells(e){const t=[];for(const o of this.sortRanges(e.getRanges())){const n=o.getContainedElement();n&&n.is("element","tableCell")&&t.push(n)}return t}getTableCellsContainingSelection(e){const t=[];for(const o of e.getRanges()){const n=o.start.findAncestor("tableCell");n&&t.push(n)}return t}getSelectionAffectedTableCells(e){const t=this.getSelectedTableCells(e);return t.length?t:this.getTableCellsContainingSelection(e)}getRowIndexes(e){const t=e.map(o=>o.parent.index);return this._getFirstLastIndexesObject(t)}getColumnIndexes(e){const t=e[0].findAncestor("table"),n=[...new C(t)].filter(l=>e.includes(l.cell)).map(l=>l.column);return this._getFirstLastIndexesObject(n)}isSelectionRectangular(e){if(e.length<2||!this._areCellInTheSameTableSection(e))return!1;const t=new Set,o=new Set;let n=0;for(const r of e){const{row:s,column:a}=this.getCellLocation(r),c=parseInt(r.getAttribute("rowspan"))||1,d=parseInt(r.getAttribute("colspan"))||1;t.add(s),o.add(a),c>1&&t.add(s+c-1),d>1&&o.add(a+d-1),n+=c*d}return tl(t,o)==n}sortRanges(e){return Array.from(e).sort(el)}_getFirstLastIndexesObject(e){const t=e.sort((l,r)=>l-r),o=t[0],n=t[t.length-1];return{first:o,last:n}}_areCellInTheSameTableSection(e){const t=e[0].findAncestor("table"),o=this.getRowIndexes(e),n=parseInt(t.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(o,n))return!1;const l=this.getColumnIndexes(e),r=parseInt(t.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(l,r)}_areIndexesInSameSection({first:e,last:t},o){const n=e<o,l=t<o;return n===l}}function Ne(i,e,t,o,n,l={}){for(let r=0;r<o;r++){const s=i.createElement("tableRow");i.insert(s,e,t),G(n,i,i.createPositionAt(s,"end"),l)}}function G(i,e,t,o={}){for(let n=0;n<i;n++)O(e,t,o)}function Dt(i,e){if(i<e)return{newCellsSpan:1,updatedSpan:1};const t=Math.floor(i/e),o=i-t*e+t;return{newCellsSpan:t,updatedSpan:o}}function Jn(i,e,t){const o=i.getAttribute("headingColumns")||0;if(o&&e.first<o){const n=Math.min(o-1,e.last)-e.first+1;t.setAttribute("headingColumns",o-n,i)}}function Yn(i,{first:e,last:t},o){const n=i.getAttribute("headingRows")||0;if(e<n){const l=t<n?n-(t-e+1):e;y("headingRows",l,i,o,0)}}function Zn(i,{first:e,last:t}){const o=new Map,n=[];for(const{row:l,column:r,cellHeight:s,cell:a}of new C(i,{endRow:t})){const c=l+s-1;if(l>=e&&l<=t&&c>t){const b=t-l+1,m=s-b;o.set(r,{cell:a,rowspan:m})}if(l<e&&c>=e){let b;c>=t?b=t-e+1:b=c-e+1,n.push({cell:a,rowspan:s-b})}}return{cellsToMove:o,cellsToTrim:n}}function Qn(i,e,t,o){const l=[...new C(i,{includeAllSlots:!0,row:e})],r=i.getChild(e);let s;for(const{column:a,cell:c,isAnchor:d}of l)if(t.has(a)){const{cell:u,rowspan:b}=t.get(a),m=s?o.createPositionAfter(s):o.createPositionAt(r,0);o.move(o.createRangeOn(u),m),y("rowspan",b,u,o),s=u}else d&&(s=c)}function el(i,e){const t=i.start,o=e.start;return t.isBefore(o)?-1:1}function tl(i,e){const t=Array.from(i.values()),o=Array.from(e.values()),n=Math.max(...t),l=Math.min(...t),r=Math.max(...o),s=Math.min(...o);return(n-l+1)*(r-s+1)}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class ol extends v{refresh(){const e=this.editor.plugins.get(T),t=e.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=e.isSelectionRectangular(t)}execute(){const e=this.editor.model,t=this.editor.plugins.get(T);e.change(o=>{const n=t.getSelectedTableCells(e.document.selection),l=n.shift(),{mergeWidth:r,mergeHeight:s}=ll(l,n,t);y("colspan",r,l,o),y("rowspan",s,l,o);for(const c of n)nl(c,l,o);const a=l.findAncestor("table");Be(a,t),o.setSelection(l,"in")})}}function nl(i,e,t){Nt(i)||(Nt(e)&&t.remove(t.createRangeIn(e)),t.move(t.createRangeIn(i),t.createPositionAt(e,"end"))),t.remove(i)}function Nt(i){const e=i.getChild(0);return i.childCount==1&&e.is("element","paragraph")&&e.isEmpty}function ll(i,e,t){let o=0,n=0;for(const c of e){const{row:d,column:u}=t.getCellLocation(c);o=Ft(c,u,o,"colspan"),n=Ft(c,d,n,"rowspan")}const{row:l,column:r}=t.getCellLocation(i),s=o-r,a=n-l;return{mergeWidth:s,mergeHeight:a}}function Ft(i,e,t,o){const n=parseInt(i.getAttribute(o)||"1");return Math.max(t,e+n)}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class il extends v{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.model,t=this.editor.plugins.get("TableUtils"),o=t.getSelectionAffectedTableCells(e.document.selection),n=t.getRowIndexes(o),l=o[0].findAncestor("table"),r=[];for(let s=n.first;s<=n.last;s++)for(const a of l.getChild(s).getChildren())r.push(e.createRangeOn(a));e.change(s=>{s.setSelection(r)})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class rl extends v{constructor(e){super(e),this.affectsData=!1}refresh(){const t=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=t.length>0}execute(){const e=this.editor.plugins.get("TableUtils"),t=this.editor.model,o=e.getSelectionAffectedTableCells(t.document.selection),n=o[0],l=o.pop(),r=n.findAncestor("table"),s=e.getCellLocation(n),a=e.getCellLocation(l),c=Math.min(s.column,a.column),d=Math.max(s.column,a.column),u=[];for(const b of new C(r,{startColumn:c,endColumn:d}))u.push(t.createRangeOn(b.cell));t.change(b=>{b.setSelection(u)})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function sl(i){i.document.registerPostFixer(e=>al(e,i))}function al(i,e){const t=e.document.differ.getChanges();let o=!1;const n=new Set;for(const l of t){let r=null;l.type=="insert"&&l.name=="table"&&(r=l.position.nodeAfter),(l.type=="insert"||l.type=="remove")&&(l.name=="tableRow"||l.name=="tableCell")&&(r=l.position.findAncestor("table")),ml(l)&&(r=l.range.start.findAncestor("table")),r&&!n.has(r)&&(o=cl(r,i)||o,o=dl(r,i)||o,n.add(r))}return o}function cl(i,e){let t=!1;const o=ul(i);if(o.length){t=!0;for(const n of o)y("rowspan",n.rowspan,n.cell,e,1)}return t}function dl(i,e){let t=!1;const o=bl(i),n=[];for(const[a,c]of o.entries())!c&&i.getChild(a).is("element","tableRow")&&n.push(a);if(n.length){t=!0;for(const a of n.reverse())e.remove(i.getChild(a)),o.splice(a,1)}const l=o.filter((a,c)=>i.getChild(c).is("element","tableRow")),r=l[0];if(!l.every(a=>a===r)){const a=l.reduce((c,d)=>d>c?d:c,0);for(const[c,d]of l.entries()){const u=a-d;if(u){for(let b=0;b<u;b++)O(e,e.createPositionAt(i.getChild(c),"end"));t=!0}}}return t}function ul(i){const e=parseInt(i.getAttribute("headingRows")||"0"),t=Array.from(i.getChildren()).reduce((n,l)=>l.is("element","tableRow")?n+1:n,0),o=[];for(const{row:n,cell:l,cellHeight:r}of new C(i)){if(r<2)continue;const a=n<e?e:t;if(n+r>a){const c=a-n;o.push({cell:l,rowspan:c})}}return o}function bl(i){const e=new Array(i.childCount).fill(0);for(const{rowIndex:t}of new C(i,{includeAllSlots:!0}))e[t]++;return e}function ml(i){if(i.type!=="attribute")return!1;const e=i.attributeKey;return e==="headingRows"||e==="colspan"||e==="rowspan"}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function hl(i){i.document.registerPostFixer(e=>gl(e,i))}function gl(i,e){const t=e.document.differ.getChanges();let o=!1;for(const n of t)n.type=="insert"&&n.name=="table"&&(o=fl(n.position.nodeAfter,i)||o),n.type=="insert"&&n.name=="tableRow"&&(o=Mt(n.position.nodeAfter,i)||o),n.type=="insert"&&n.name=="tableCell"&&(o=Fe(n.position.nodeAfter,i)||o),(n.type=="remove"||n.type=="insert")&&pl(n)&&(o=Fe(n.position.parent,i)||o);return o}function fl(i,e){let t=!1;for(const o of i.getChildren())o.is("element","tableRow")&&(t=Mt(o,e)||t);return t}function Mt(i,e){let t=!1;for(const o of i.getChildren())t=Fe(o,e)||t;return t}function Fe(i,e){if(i.childCount==0)return e.insertElement("paragraph",i),!0;const t=Array.from(i.getChildren()).filter(o=>o.is("$text"));for(const o of t)e.wrap(e.createRangeOn(o),"paragraph");return!!t.length}function pl(i){return i.position.parent.is("element","tableCell")?i.type=="insert"&&i.name=="$text"||i.type=="remove":!1}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function wl(i,e){const t=i.document.differ;for(const o of t.getChanges()){let n,l=!1;if(o.type=="attribute"){const c=o.range.start.nodeAfter;if(!c||!c.is("element","table")||o.attributeKey!="headingRows"&&o.attributeKey!="headingColumns")continue;n=c,l=o.attributeKey=="headingRows"}else(o.name=="tableRow"||o.name=="tableCell")&&(n=o.position.findAncestor("table"),l=o.name=="tableRow");if(!n)continue;const r=n.getAttribute("headingRows")||0,s=n.getAttribute("headingColumns")||0,a=new C(n);for(const c of a){const u=c.row<r||c.column<s?"th":"td",b=e.mapper.toViewElement(c.cell);b&&b.is("element")&&b.name!=u&&e.reconvertItem(l?c.cell.parent:c.cell)}}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Cl(i,e){const t=i.document.differ,o=new Set;for(const n of t.getChanges()){const l=n.type=="attribute"?n.range.start.parent:n.position.parent;l.is("element","tableCell")&&o.add(l)}for(const n of o.values()){const l=Array.from(n.getChildren()).filter(r=>_l(r,e.mapper));for(const r of l)e.reconvertItem(r)}}function _l(i,e){if(!i.is("element","paragraph"))return!1;const t=e.toViewElement(i);return t?yt(i)!==t.is("element","span"):!1}function R(i,{insertAt:e}={}){if(!i||typeof document>"u")return;const t=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",window.litNonce&&o.setAttribute("nonce",window.litNonce),e==="top"&&t.firstChild?t.insertBefore(o,t.firstChild):t.appendChild(o),o.styleSheet?o.styleSheet.cssText=i:o.appendChild(document.createTextNode(i))}R(':root{--ck-color-selector-focused-cell-background:rgba(158,201,250,.3);--ck-table-content-default-border-color:#d4d4d4}.ck-widget.table table[style*="border-style:none"],.ck-widget.table table[style*="border:none"]{outline:var(--ck-table-content-default-border-color) 1px dashed}.ck-widget.table td.ck-editor__nested-editable,.ck-widget.table th.ck-editor__nested-editable{outline:unset}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused:not(.ck-editor__editable_selected),.ck-widget.table td.ck-editor__nested-editable:not(.ck-editor__editable_selected):focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused:not(.ck-editor__editable_selected),.ck-widget.table th.ck-editor__nested-editable:not(.ck-editor__editable_selected):focus{background:var(--ck-color-selector-focused-cell-background);outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}');/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class K extends _{_additionalSlots;static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[T]}constructor(e){super(e),this._additionalSlots=[]}init(){const e=this.editor,t=e.model,o=t.schema,n=e.conversion,l=e.plugins.get(T);o.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),o.register("tableRow",{allowIn:"table",isLimit:!0}),o.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),n.for("upcast").add(gn()),n.for("upcast").add(fn()),n.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Ct(l,{asWidget:!0,additionalSlots:this._additionalSlots})}),n.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:Ct(l,{additionalSlots:this._additionalSlots})}),n.for("upcast").elementToElement({model:"tableRow",view:"tr"}),n.for("upcast").add(pn()),n.for("downcast").elementToElement({model:"tableRow",view:yn()}),n.for("upcast").elementToElement({model:"tableCell",view:"td"}),n.for("upcast").elementToElement({model:"tableCell",view:"th"}),n.for("upcast").add(wt("td")),n.for("upcast").add(wt("th")),n.for("editingDowncast").elementToElement({model:"tableCell",view:_t({asWidget:!0})}),n.for("dataDowncast").elementToElement({model:"tableCell",view:_t()}),n.for("editingDowncast").elementToElement({model:"paragraph",view:kt({asWidget:!0}),converterPriority:"high"}),n.for("dataDowncast").elementToElement({model:"paragraph",view:kt(),converterPriority:"high"}),n.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),n.for("upcast").attributeToAttribute({model:{key:"colspan",value:Ht("colspan")},view:"colspan"}),n.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),n.for("upcast").attributeToAttribute({model:{key:"rowspan",value:Ht("rowspan")},view:"rowspan"}),e.config.define("table.defaultHeadings.rows",0),e.config.define("table.defaultHeadings.columns",0),e.commands.add("insertTable",new An(e)),e.commands.add("insertTableRowAbove",new Tt(e,{order:"above"})),e.commands.add("insertTableRowBelow",new Tt(e,{order:"below"})),e.commands.add("insertTableColumnLeft",new vt(e,{order:"left"})),e.commands.add("insertTableColumnRight",new vt(e,{order:"right"})),e.commands.add("removeTableRow",new Pn(e)),e.commands.add("removeTableColumn",new Ln(e)),e.commands.add("splitTableCellVertically",new At(e,{direction:"vertically"})),e.commands.add("splitTableCellHorizontally",new At(e,{direction:"horizontally"})),e.commands.add("mergeTableCells",new ol(e)),e.commands.add("mergeTableCellRight",new me(e,{direction:"right"})),e.commands.add("mergeTableCellLeft",new me(e,{direction:"left"})),e.commands.add("mergeTableCellDown",new me(e,{direction:"down"})),e.commands.add("mergeTableCellUp",new me(e,{direction:"up"})),e.commands.add("setTableColumnHeader",new On(e)),e.commands.add("setTableRowHeader",new zn(e)),e.commands.add("selectTableRow",new il(e)),e.commands.add("selectTableColumn",new rl(e)),sl(t),hl(t),this.listenTo(t.document,"change:data",()=>{wl(t,e.editing),Cl(t,e.editing)})}registerAdditionalSlot(e){this._additionalSlots.push(e)}}function Ht(i){return e=>{const t=parseInt(e.getAttribute(i));return Number.isNaN(t)||t<=0?null:t}}R(".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0;width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2)}.ck .ck-insert-table-dropdown__label,.ck[dir=rtl] .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{border:1px solid var(--ck-color-base-border);border-radius:1px;margin:var(--ck-insert-table-dropdown-box-margin);min-height:var(--ck-insert-table-dropdown-box-height);min-width:var(--ck-insert-table-dropdown-box-width);outline:none;transition:none}@media (prefers-reduced-motion:reduce){.ck .ck-insert-table-dropdown-grid-box{transition:none}}.ck .ck-insert-table-dropdown-grid-box:focus{box-shadow:none}.ck .ck-insert-table-dropdown-grid-box.ck-on{background:var(--ck-color-focus-outer-shadow);border-color:var(--ck-color-focus-border)}");/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class he extends D{items;keystrokes;focusTracker;constructor(e){super(e);const t=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new ne,this.focusTracker=new le,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(o,n)=>`${n} \xD7 ${o}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":t.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:t.to("label")}]}],on:{mousedown:t.to(o=>{o.preventDefault()}),click:t.to(()=>{this.fire("execute")})}}),this.on("boxover",(o,n)=>{const{row:l,column:r}=n.target.dataset;this.items.get((parseInt(l,10)-1)*10+(parseInt(r,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(o,n,l)=>{if(!l)return;const{row:r,column:s}=l.dataset;this.set({rows:parseInt(r),columns:parseInt(s)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),nn({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const e of this.items)this.focusTracker.add(e.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const e=this.rows,t=this.columns;this.items.map((o,n)=>{const l=Math.floor(n/10),r=n%10,s=l<e&&r<t;o.set("isOn",s)})}_createGridButton(e,t,o,n){const l=new E(e);return l.set({label:n,class:"ck-insert-table-dropdown-grid-box"}),l.extendTemplate({attributes:{"data-row":t,"data-column":o}}),l}_createGridCollection(){const e=[];for(let t=0;t<100;t++){const o=Math.floor(t/10),n=t%10,l=`${o+1} \xD7 ${n+1}`;e.push(this._createGridButton(this.locale,o+1,n+1,l))}return this.createCollection(e)}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ut extends _{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t,n=e.locale.contentLanguageDirection==="ltr";e.ui.componentFactory.add("insertTable",l=>{const r=e.commands.get("insertTable"),s=$(l);s.bind("isEnabled").to(r),s.buttonView.set({icon:nt,label:t("Insert table"),tooltip:!0});let a;return s.on("change:isOpen",()=>{a||(a=new he(l),s.panelView.children.add(a),a.delegate("execute").to(s),s.on("execute",()=>{e.execute("insertTable",{rows:a.rows,columns:a.columns}),e.editing.view.focus()}))}),s}),e.ui.componentFactory.add("menuBar:insertTable",l=>{const r=e.commands.get("insertTable"),s=new at(l),a=new he(l);return a.delegate("execute").to(s),s.on("change:isOpen",(c,d,u)=>{u||a.reset()}),a.on("execute",()=>{e.execute("insertTable",{rows:a.rows,columns:a.columns}),e.editing.view.focus()}),s.buttonView.set({label:t("Table"),icon:nt}),s.panelView.children.add(a),s.bind("isEnabled").to(r),s}),e.ui.componentFactory.add("tableColumn",l=>{const r=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:n?"insertTableColumnLeft":"insertTableColumnRight",label:t("Insert column left")}},{type:"button",model:{commandName:n?"insertTableColumnRight":"insertTableColumnLeft",label:t("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:t("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:t("Select column")}}];return this._prepareDropdown(t("Column"),Ho,r,l)}),e.ui.componentFactory.add("tableRow",l=>{const r=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:t("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:t("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:t("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:t("Select row")}}];return this._prepareDropdown(t("Row"),Uo,r,l)}),e.ui.componentFactory.add("mergeTableCells",l=>{const r=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("Merge cell up")}},{type:"button",model:{commandName:n?"mergeTableCellRight":"mergeTableCellLeft",label:t("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("Merge cell down")}},{type:"button",model:{commandName:n?"mergeTableCellLeft":"mergeTableCellRight",label:t("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(t("Merge cells"),jo,r,l)})}_prepareDropdown(e,t,o,n){const l=this.editor,r=$(n),s=this._fillDropdownWithListOptions(r,o);return r.buttonView.set({label:e,icon:t,tooltip:!0}),r.bind("isEnabled").toMany(s,"isEnabled",(...a)=>a.some(c=>c)),this.listenTo(r,"execute",a=>{l.execute(a.source.commandName),a.source instanceof ln||l.editing.view.focus()}),r}_prepareMergeSplitButtonDropdown(e,t,o,n){const l=this.editor,r=$(n,ct),s="mergeTableCells",a=l.commands.get(s),c=this._fillDropdownWithListOptions(r,o);return r.buttonView.set({label:e,icon:t,tooltip:!0,isEnabled:!0}),r.bind("isEnabled").toMany([a,...c],"isEnabled",(...d)=>d.some(u=>u)),this.listenTo(r.buttonView,"execute",()=>{l.execute(s),l.editing.view.focus()}),this.listenTo(r,"execute",d=>{l.execute(d.source.commandName),l.editing.view.focus()}),r}_fillDropdownWithListOptions(e,t){const o=this.editor,n=[],l=new ve;for(const r of t)kl(r,o,n,l);return re(e,l),n}}function kl(i,e,t,o){if(i.type==="button"||i.type==="switchbutton"){const n=i.model=new Ae(i.model),{commandName:l,bindIsOn:r}=i.model,s=e.commands.get(l);t.push(s),n.set({commandName:l}),n.bind("isEnabled").to(s),r&&n.bind("isOn").to(s,"value"),n.set({withText:!0})}o.add(i)}R(':root{--ck-table-selected-cell-background:rgba(158,207,250,.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{box-shadow:unset;caret-color:transparent;position:relative}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{background-color:var(--ck-table-selected-cell-background);bottom:0;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget{outline:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle{display:none}');/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class L extends _{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[T,T]}init(){const e=this.editor,t=e.model,o=e.editing.view;this.listenTo(t,"deleteContent",(n,l)=>this._handleDeleteContent(n,l),{priority:"high"}),this.listenTo(o.document,"insertText",(n,l)=>this._handleInsertTextEvent(n,l),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const e=this.editor.plugins.get(T),t=this.editor.model.document.selection,o=e.getSelectedTableCells(t);return o.length==0?null:o}getSelectionAsFragment(){const e=this.editor.plugins.get(T),t=this.getSelectedTableCells();return t?this.editor.model.change(o=>{const n=o.createDocumentFragment(),{first:l,last:r}=e.getColumnIndexes(t),{first:s,last:a}=e.getRowIndexes(t),c=t[0].findAncestor("table");let d=a,u=r;if(e.isSelectionRectangular(t)){const h={firstColumn:l,lastColumn:r,firstRow:s,lastRow:a};d=Et(c,h),u=Lt(c,h)}const m=xt(c,{startRow:s,startColumn:l,endRow:d,endColumn:u},o);return o.insert(m,n,0),n}):null}setCellSelection(e,t){const o=this._getCellsToSelect(e,t);this.editor.model.change(n=>{n.setSelection(o.cells.map(l=>n.createRangeOn(l)),{backward:o.backward})})}getFocusCell(){const o=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return o&&o.is("element","tableCell")?o:null}getAnchorCell(){const e=this.editor.model.document.selection,o=Te(e.getRanges()).getContainedElement();return o&&o.is("element","tableCell")?o:null}_defineSelectionConverter(){const e=this.editor,t=new Set;e.conversion.for("editingDowncast").add(n=>n.on("selection",(l,r,s)=>{const a=s.writer;o(a);const c=this.getSelectedTableCells();if(!c)return;for(const u of c){const b=s.mapper.toViewElement(u);a.addClass("ck-editor__editable_selected",b),t.add(b)}const d=s.mapper.toViewElement(c[c.length-1]);a.setSelection(d,0)},{priority:"lowest"}));function o(n){for(const l of t)n.removeClass("ck-editor__editable_selected",l);t.clear()}}_enablePluginDisabling(){const e=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const t=this.getSelectedTableCells();if(!t)return;e.model.change(o=>{const n=o.createPositionAt(t[0],0),l=e.model.schema.getNearestSelectionRange(n);o.setSelection(l)})}})}_handleDeleteContent(e,t){const o=this.editor.plugins.get(T),n=t[0],l=t[1],r=this.editor.model,s=!l||l.direction=="backward",a=o.getSelectedTableCells(n);a.length&&(e.stop(),r.change(c=>{const d=a[s?a.length-1:0];r.change(b=>{for(const m of a)r.deleteContent(b.createSelection(m,"in"))});const u=r.schema.getNearestSelectionRange(c.createPositionAt(d,0));n.is("documentSelection")?c.setSelection(u):n.setTo(u)}))}_handleInsertTextEvent(e,t){const o=this.editor,n=this.getSelectedTableCells();if(!n)return;const l=o.editing.view,r=o.editing.mapper,s=n.map(a=>l.createRangeOn(r.toViewElement(a)));t.selection=l.createSelection(s),t.preventDefault()}_getCellsToSelect(e,t){const o=this.editor.plugins.get("TableUtils"),n=o.getCellLocation(e),l=o.getCellLocation(t),r=Math.min(n.row,l.row),s=Math.max(n.row,l.row),a=Math.min(n.column,l.column),c=parseInt(t.getAttribute("colspan")||"1")-1,d=Math.max(n.column,l.column+c),u=new Array(s-r+1).fill(null).map(()=>[]),b={startRow:r,endRow:s,startColumn:a,endColumn:d};for(const{row:g,cell:f}of new C(e.findAncestor("table"),b))u[g-r].push(f);const m=l.row<n.row,h=l.column<n.column;return m&&u.reverse(),h&&u.forEach(g=>g.reverse()),{cells:u.flat(),backward:m||h}}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class jt extends _{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[Ie,ht,L,T]}init(){const t=this.editor.editing.view.document;this.listenTo(t,"copy",(o,n)=>this._onCopyCut(o,n)),this.listenTo(t,"cut",(o,n)=>this._onCopyCut(o,n)),this._listenToContentInsertion(),this.decorate("_replaceTableSlotCell")}_listenToContentInsertion(){const{editor:e}=this,t=e.plugins.get(ht),o=e.plugins.get(L);let n=!1;t.on("contentInsertion",(l,r)=>{n=r.method==="paste"}),this.listenTo(e.model,"insertContent",(l,[r,s])=>{(n||o.getSelectedTableCells()!==null)&&this._onInsertContent(l,r,s)},{priority:"high"}),t.on("contentInsertion",()=>{n=!1},{priority:"lowest"})}_onCopyCut(e,t){const o=this.editor.editing.view,n=this.editor.plugins.get(L),l=this.editor.plugins.get(Ie);n.getSelectedTableCells()&&(e.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(t.preventDefault(),e.stop(),this.editor.model.enqueueChange({isUndoable:e.name==="cut"},()=>{const r=l._copySelectedFragmentWithMarkers(e.name,this.editor.model.document.selection,()=>n.getSelectionAsFragment());o.document.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:this.editor.data.toView(r),method:e.name})})))}_onInsertContent(e,t,o){if(o&&!o.is("documentSelection"))return;const n=this.editor.model,l=this.editor.plugins.get(T),r=this.editor.plugins.get(Ie),s=this.getTableIfOnlyTableInContent(t,n);if(!s)return;const a=l.getSelectionAffectedTableCells(n.document.selection);if(!a.length){Be(s,l);return}e.stop(),t.is("documentFragment")?r._pasteMarkersIntoTransformedElement(t.markers,c=>this._replaceSelectedCells(s,a,c)):this.editor.model.change(c=>{this._replaceSelectedCells(s,a,c)})}_replaceSelectedCells(e,t,o){const n=this.editor.plugins.get(T),l={width:n.getColumns(e),height:n.getRows(e)},r=yl(t,l,o,n),s=r.lastRow-r.firstRow+1,a=r.lastColumn-r.firstColumn+1,c={startRow:0,startColumn:0,endRow:Math.min(s,l.height)-1,endColumn:Math.min(a,l.width)-1};e=xt(e,c,o);const d=t[0].findAncestor("table"),u=this._replaceSelectedCellsWithPasted(e,l,d,r,o);if(this.editor.plugins.get("TableSelection").isEnabled){const b=n.sortRanges(u.map(m=>o.createRangeOn(m)));o.setSelection(b)}else o.setSelection(u[0],0);return d}_replaceSelectedCellsWithPasted(e,t,o,n,l){const{width:r,height:s}=t,a=vl(e,r,s),c=[...new C(o,{startRow:n.firstRow,endRow:n.lastRow,startColumn:n.firstColumn,endColumn:n.lastColumn,includeAllSlots:!0})],d=[];let u;for(const f of c){const{row:p,column:w}=f;w===n.firstColumn&&(u=f.getPositionBefore());const k=p-n.firstRow,I=w-n.firstColumn,V=a[k%s][I%r],q=V?l.cloneElement(V):null,j=this._replaceTableSlotCell(f,q,u,l);j&&(Pt(j,p,w,n.lastRow,n.lastColumn,l),d.push(j),u=l.createPositionAfter(j))}const b=parseInt(o.getAttribute("headingRows")||"0"),m=parseInt(o.getAttribute("headingColumns")||"0"),h=n.firstRow<b&&b<=n.lastRow,g=n.firstColumn<m&&m<=n.lastColumn;if(h){const f={first:n.firstColumn,last:n.lastColumn},p=Me(o,b,f,l,n.firstRow);d.push(...p)}if(g){const f={first:n.firstRow,last:n.lastRow},p=He(o,m,f,l);d.push(...p)}return d}_replaceTableSlotCell(e,t,o,n){const{cell:l,isAnchor:r}=e;return r&&n.remove(l),t?(n.insert(t,o),t):null}getTableIfOnlyTableInContent(e,t){if(!e.is("documentFragment")&&!e.is("element"))return null;if(e.is("element","table"))return e;if(e.childCount==1&&e.getChild(0).is("element","table"))return e.getChild(0);const o=t.createRangeIn(e);for(const n of o.getItems())if(n.is("element","table")){const l=t.createRange(o.start,t.createPositionBefore(n));if(t.hasContent(l,{ignoreWhitespaces:!0}))return null;const r=t.createRange(t.createPositionAfter(n),o.end);return t.hasContent(r,{ignoreWhitespaces:!0})?null:n}return null}}function yl(i,e,t,o){const n=i[0].findAncestor("table"),l=o.getColumnIndexes(i),r=o.getRowIndexes(i),s={firstColumn:l.first,lastColumn:l.last,firstRow:r.first,lastRow:r.last},a=i.length===1;return a&&(s.lastRow+=e.height-1,s.lastColumn+=e.width-1,Tl(n,s.lastRow+1,s.lastColumn+1,o)),a||!o.isSelectionRectangular(i)?Al(n,s,t):(s.lastRow=Et(n,s),s.lastColumn=Lt(n,s)),s}function Tl(i,e,t,o){const n=o.getColumns(i),l=o.getRows(i);t>n&&o.insertColumns(i,{at:n,columns:t-n}),e>l&&o.insertRows(i,{at:l,rows:e-l})}function vl(i,e,t){const o=new Array(t).fill(null).map(()=>new Array(e).fill(null));for(const{column:n,row:l,cell:r}of new C(i))o[l][n]=r;return o}function Al(i,e,t){const{firstRow:o,lastRow:n,firstColumn:l,lastColumn:r}=e,s={first:o,last:n},a={first:l,last:r};He(i,l,s,t),He(i,r+1,s,t),Me(i,o,a,t),Me(i,n+1,a,t,o)}function Me(i,e,t,o,n=0){return e<1?void 0:St(i,e,n).filter(({column:s,cellWidth:a})=>$t(s,a,t)).map(({cell:s})=>Rt(s,e,o))}function He(i,e,t,o){return e<1?void 0:It(i,e).filter(({row:r,cellHeight:s})=>$t(r,s,t)).map(({cell:r,column:s})=>Vt(r,s,e,o))}function $t(i,e,t){const o=i+e-1,{first:n,last:l}=t,r=i>=n&&i<=l,s=i<n&&o>=n;return r||s}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Gt extends _{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[L,T]}init(){const e=this.editor,o=e.editing.view.document,n=e.t;this.listenTo(o,"arrowKey",(...l)=>this._onArrowKey(...l),{context:"table"}),this.listenTo(o,"tab",(...l)=>this._handleTabOnSelectedTable(...l),{context:"figure"}),this.listenTo(o,"tab",(...l)=>this._handleTab(...l),{context:["th","td"]}),e.accessibility.addKeystrokeInfoGroup({id:"table",label:n("Keystrokes that can be used in a table cell"),keystrokes:[{label:n("Move the selection to the next cell"),keystroke:"Tab"},{label:n("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:n("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:n("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(e,t){const o=this.editor,l=o.model.document.selection.getSelectedElement();!l||!l.is("element","table")||(t.preventDefault(),t.stopPropagation(),e.stop(),o.model.change(r=>{r.setSelection(r.createRangeIn(l.getChild(0).getChild(0)))}))}_handleTab(e,t){const o=this.editor,n=this.editor.plugins.get(T),l=this.editor.plugins.get("TableSelection"),r=o.model.document.selection,s=!t.shiftKey;let a=n.getTableCellsContainingSelection(r)[0];if(a||(a=l.getFocusCell()),!a)return;t.preventDefault(),t.stopPropagation(),e.stop();const c=a.parent,d=c.parent,u=d.getChildIndex(c),b=c.getChildIndex(a),m=b===0;if(!s&&m&&u===0){o.model.change(p=>{p.setSelection(p.createRangeOn(d))});return}const h=b===c.childCount-1,g=u===n.getRows(d)-1;if(s&&g&&h&&(o.execute("insertTableRowBelow"),u===n.getRows(d)-1)){o.model.change(p=>{p.setSelection(p.createRangeOn(d))});return}let f;if(s&&h)f=d.getChild(u+1).getChild(0);else if(!s&&m){const p=d.getChild(u-1);f=p.getChild(p.childCount-1)}else f=c.getChild(b+(s?1:-1));o.model.change(p=>{p.setSelection(p.createRangeIn(f))})}_onArrowKey(e,t){const o=this.editor,n=t.keyCode,l=No(n,o.locale.contentLanguageDirection);this._handleArrowKeys(l,t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),e.stop())}_handleArrowKeys(e,t){const o=this.editor.plugins.get(T),n=this.editor.plugins.get("TableSelection"),l=this.editor.model,r=l.document.selection,s=["right","down"].includes(e),a=o.getSelectedTableCells(r);if(a.length){let d;return t?d=n.getFocusCell():d=s?a[a.length-1]:a[0],this._navigateFromCellInDirection(d,e,t),!0}const c=r.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!c)return!1;if(!r.isCollapsed)if(t){if(r.isBackward==s&&!r.containsEntireContent(c))return!1}else{const d=r.getSelectedElement();if(!d||!l.schema.isObject(d))return!1}return this._isSelectionAtCellEdge(r,c,s)?(this._navigateFromCellInDirection(c,e,t),!0):!1}_isSelectionAtCellEdge(e,t,o){const n=this.editor.model,l=this.editor.model.schema,r=o?e.getLastPosition():e.getFirstPosition();if(!l.getLimitElement(r).is("element","tableCell"))return n.createPositionAt(t,o?"end":0).isTouching(r);const s=n.createSelection(r);return n.modifySelection(s,{direction:o?"forward":"backward"}),r.isEqual(s.focus)}_navigateFromCellInDirection(e,t,o=!1){const n=this.editor.model,l=e.findAncestor("table"),r=[...new C(l,{includeAllSlots:!0})],{row:s,column:a}=r[r.length-1],c=r.find(({cell:w})=>w==e);let{row:d,column:u}=c;switch(t){case"left":u--;break;case"up":d--;break;case"right":u+=c.cellWidth;break;case"down":d+=c.cellHeight;break}const b=d<0||d>s,m=u<0&&d<=0,h=u>a&&d>=s;if(b||m||h){n.change(w=>{w.setSelection(w.createRangeOn(l))});return}u<0?(u=o?0:a,d--):u>a&&(u=o?a:0,d++);const g=r.find(w=>w.row==d&&w.column==u).cell,f=["right","down"].includes(t),p=this.editor.plugins.get("TableSelection");if(o&&p.isEnabled){const w=p.getAnchorCell()||e;p.setCellSelection(w,g)}else{const w=n.createPositionAt(g,f?0:"end");n.change(k=>{k.setSelection(w)})}}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Kt extends cn{domEventType=["mousemove","mouseleave"];onDomEvent(e){this.fire(e.type,e)}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class qt extends _{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[L,T]}init(){this.editor.editing.view.addObserver(Kt),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const e=this.editor,t=e.plugins.get(T);let o=!1;const n=e.plugins.get(L);this.listenTo(e.editing.view.document,"mousedown",(l,r)=>{const s=e.model.document.selection;if(!this.isEnabled||!n.isEnabled||!r.domEvent.shiftKey)return;const a=n.getAnchorCell()||t.getTableCellsContainingSelection(s)[0];if(!a)return;const c=this._getModelTableCellFromDomEvent(r);c&&Xt(a,c)&&(o=!0,n.setCellSelection(a,c),r.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{o=!1}),this.listenTo(e.editing.view.document,"selectionChange",l=>{o&&l.stop()},{priority:"highest"})}_enableMouseDragSelection(){const e=this.editor;let t,o,n=!1,l=!1;const r=e.plugins.get(L);this.listenTo(e.editing.view.document,"mousedown",(s,a)=>{!this.isEnabled||!r.isEnabled||a.domEvent.shiftKey||a.domEvent.ctrlKey||a.domEvent.altKey||(t=this._getModelTableCellFromDomEvent(a))}),this.listenTo(e.editing.view.document,"mousemove",(s,a)=>{if(!a.domEvent.buttons||!t)return;const c=this._getModelTableCellFromDomEvent(a);c&&Xt(t,c)&&(o=c,!n&&o!=t&&(n=!0)),n&&(l=!0,r.setCellSelection(t,o),a.preventDefault())}),this.listenTo(e.editing.view.document,"mouseup",()=>{n=!1,l=!1,t=null,o=null}),this.listenTo(e.editing.view.document,"selectionChange",s=>{l&&s.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(e){const t=e.target,o=this.editor.editing.view.createPositionAt(t,0);return this.editor.editing.mapper.toModelPosition(o).parent.findAncestor("tableCell",{includeSelf:!0})}}function Xt(i,e){return i.parent.parent==e.parent.parent}R(".ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-content figure.table:not(.layout-table){display:table}.ck-content figure.table:not(.layout-table)>table{height:100%;width:100%}.ck-content .table:not(.layout-table){margin:.9em auto}.ck-content figure.table:not(.layout-table)>table,.ck-content table.table:not(.layout-table){border:1px double #b3b3b3;border-collapse:collapse;border-spacing:0}.ck-content figure.table:not(.layout-table)>table>tbody>tr>th,.ck-content figure.table:not(.layout-table)>table>thead>tr>th,.ck-content table.table:not(.layout-table)>tbody>tr>th,.ck-content table.table:not(.layout-table)>thead>tr>th{background:rgba(0,0,0,.05);font-weight:700}.ck-content figure.table:not(.layout-table)>table>tbody>tr>td,.ck-content figure.table:not(.layout-table)>table>tbody>tr>th,.ck-content figure.table:not(.layout-table)>table>thead>tr>td,.ck-content figure.table:not(.layout-table)>table>thead>tr>th,.ck-content table.table:not(.layout-table)>tbody>tr>td,.ck-content table.table:not(.layout-table)>tbody>tr>th,.ck-content table.table:not(.layout-table)>thead>tr>td,.ck-content table.table:not(.layout-table)>thead>tr>th{border:1px solid #bfbfbf;min-width:2em;padding:.4em}@media print{.ck-content figure.table:not(.layout-table):has(>table){display:block}.ck-content figure.table:not(.layout-table)>table{height:auto}}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}");/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Jt extends _{static get requires(){return[K,Ut,L,qt,Gt,jt,Oo]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Yt extends _{static get pluginName(){return"PlainTableOutput"}static get isOfficialPlugin(){return!0}static get requires(){return[Jt]}init(){const e=this.editor;e.conversion.for("dataDowncast").elementToStructure({model:"table",view:xl,converterPriority:"high"}),e.plugins.has("TableCaption")&&e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(t,{writer:o})=>{if(t.parent.name==="table")return o.createContainerElement("caption")},converterPriority:"high"}),e.plugins.has("TableProperties")&&Sl(e),e.conversion.for("upcast").add(t=>{t.on("element:table",(o,n,l)=>{l.consumable.consume(n.viewItem,{classes:"table"})})})}}function xl(i,{writer:e}){const t=i.getAttribute("headingRows")||0,o=e.createSlot(c=>c.is("element","tableRow")&&c.index<t),n=e.createSlot(c=>c.is("element","tableRow")&&c.index>=t),l=e.createSlot(c=>!c.is("element","tableRow")),r=e.createContainerElement("thead",null,o),s=e.createContainerElement("tbody",null,n),a=[];return t&&a.push(r),t<i.childCount&&a.push(s),e.createContainerElement("table",{class:"table"},[l,...a])}function Sl(i){const e={"border-width":"tableBorderWidth","border-color":"tableBorderColor","border-style":"tableBorderStyle","background-color":"tableBackgroundColor"};for(const[t,o]of Object.entries(e))i.conversion.for("dataDowncast").add(n=>n.on(`attribute:${o}:table`,(l,r,s)=>{const{item:a,attributeNewValue:c}=r,{mapper:d,writer:u}=s;if(!s.consumable.consume(a,l.name))return;const b=d.toViewElement(a);c?u.setStyle(t,c,b):u.removeStyle(t,b)},{priority:"high"}))}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function ge(i){const e=Zt(i);return e||fe(i)}function Zt(i){const e=i.getSelectedElement();return e&&Qt(e)?e:null}function fe(i){const e=i.getFirstPosition();if(!e)return null;let t=e.parent;for(;t;){if(t.is("element")&&Qt(t))return t;t=t.parent}return null}function Qt(i){return!!i.getCustomProperty("table")&&Do(i)}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Rl extends _{static get requires(){return[tt]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const e=this.editor,t=e.t,o=e.plugins.get(tt),n=e.config.get("table.contentToolbar"),l=e.config.get("table.tableToolbar");n&&o.register("tableContent",{ariaLabel:t("Table toolbar"),items:n,getRelatedElement:fe}),l&&o.register("table",{ariaLabel:t("Table toolbar"),items:l,getRelatedElement:Zt})}}R(".ck.ck-input-color{display:flex;flex-direction:row-reverse;width:100%}.ck.ck-input-color>input.ck.ck-input-text{flex-grow:1;min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown{min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown>.ck-input-color__button .ck-dropdown__arrow{display:none}.ck.ck-input-color .ck.ck-input-color__button{display:flex}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview{overflow:hidden;position:relative}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{display:block;position:absolute}[dir=ltr] .ck.ck-input-color>.ck.ck-input-text{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-input-text{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-input-color>.ck.ck-input-text:focus{z-index:0}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{padding:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-left-radius:0;border-top-left-radius:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-left:1px solid transparent}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-right:1px solid transparent}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button.ck-disabled{background:var(--ck-color-input-disabled-background)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview{border:1px solid var(--ck-color-input-border);border-radius:0;height:20px;width:20px}.ck-rounded-corners .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview,.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{background:red;border-radius:2px;height:150%;left:50%;top:-30%;transform:rotate(45deg);transform-origin:50%;width:8%}.ck.ck-input-color .ck.ck-input-color__remove-color{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);width:100%}.ck.ck-input-color .ck.ck-input-color__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-input-border)}[dir=ltr] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-right-radius:0}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-left-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard);margin-right:0}");/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Il extends D{options;focusTracker;focusCycler;_focusables;dropdownView;inputView;keystrokes;_stillTyping;constructor(e,t){super(e),this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=t,this.focusTracker=new le,this._focusables=new xe,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new ne,this._stillTyping=!1,this.focusCycler=new Se({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(o,n,l)=>this._setInputValue(l))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(e=>{this.focusTracker.add(e.element),this._focusables.add(e)}),this.keystrokes.listenTo(this.element)}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const e=this.locale,t=e.t,o=this.bindTemplate,n=this._createColorSelector(e),l=$(e),r=new D;return r.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:o.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",o.if("value","ck-hidden",s=>s!="")]}}]}),l.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),l.buttonView.children.add(r),l.buttonView.label=t("Color picker"),l.buttonView.tooltip=!0,l.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw",l.panelView.children.add(n),l.bind("isEnabled").to(this,"isReadOnly",s=>!s),l.on("change:isOpen",(s,a,c)=>{c&&(n.updateSelectedColors(),n.showColorGridsFragment())}),l}_createInputTextView(){const e=this.locale,t=new rn(e);return t.extendTemplate({on:{blur:t.bindTemplate.to("blur")}}),t.value=this.value,t.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(t),t.on("input",()=>{const o=t.element.value,n=this.options.colorDefinitions.find(l=>o===l.label);this._stillTyping=!0,this.value=n&&n.color||o}),t.on("blur",()=>{this._stillTyping=!1,this._setInputValue(t.element.value)}),t.delegate("input").to(this),t}_createColorSelector(e){const t=e.t,o=this.options.defaultColorValue||"",n=t(o?"Restore default":"Remove color"),l=new sn(e,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:n,colorPickerLabel:t("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});l.appendUI(),l.on("execute",(s,a)=>{if(a.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=a.value||o,this.fire("input"),a.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let r=this.value;return l.on("colorPicker:cancel",()=>{this.value=r,this.fire("input"),this.dropdownView.isOpen=!1}),l.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{r=this.value}),l.bind("selectedColor").to(this,"value"),l}_setInputValue(e){if(!this._stillTyping){const t=eo(e),o=this.options.colorDefinitions.find(n=>t===eo(n.color));o?this.inputView.value=o.label:this.inputView.value=e||""}}}function eo(i){return i.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Ue=i=>i==="";function je(i){return{none:i("None"),solid:i("Solid"),dotted:i("Dotted"),dashed:i("Dashed"),double:i("Double"),groove:i("Groove"),ridge:i("Ridge"),inset:i("Inset"),outset:i("Outset")}}function to(i){return i('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function oo(i){return i('The value is invalid. Try "10px" or "2em" or simply "2".')}function pe(i){return i=i.trim().toLowerCase(),Ue(i)||dn(i)}function Q(i){return i=i.trim(),Ue(i)||io(i)||gt(i)||un(i)}function no(i){return i=i.trim(),Ue(i)||io(i)||gt(i)}function lo(i,e){const t=new ve,o=je(i.t);for(const n in o){const l={type:"button",model:new Ae({_borderStyleValue:n,label:o[n],role:"menuitemradio",withText:!0})};n==="none"?l.model.bind("isOn").to(i,"borderStyle",r=>e==="none"?!r:r===n):l.model.bind("isOn").to(i,"borderStyle",r=>r===n),t.add(l)}return t}function $e(i){const{view:e,icons:t,toolbar:o,labels:n,propertyName:l,nameToValue:r,defaultValue:s}=i;for(const a in n){const c=new E(e.locale);c.set({role:"radio",isToggleable:!0,label:n[a],icon:t[a],tooltip:n[a]});const d=r?r(a):a;c.bind("isOn").to(e,l,u=>{let b=u;return u===""&&s&&(b=s),d===b}),c.on("execute",()=>{!s&&d&&e[l]===d?e[l]=void 0:e[l]=d}),o.items.add(c)}}const we=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function Ce(i){return(e,t,o)=>{const n=new Il(e.locale,{colorDefinitions:Vl(i.colorConfig),columns:i.columns,defaultColorValue:i.defaultColorValue,colorPickerConfig:i.colorPickerConfig});return n.inputView.set({id:t,ariaDescribedById:o}),n.bind("isReadOnly").to(e,"isEnabled",l=>!l),n.bind("hasError").to(e,"errorText",l=>!!l),n.on("input",()=>{e.errorText=null}),e.bind("isEmpty","isFocused").to(n),n}}function io(i){const e=parseFloat(i);return!Number.isNaN(e)&&i===String(e)}function Vl(i){return i.map(e=>({color:e.model,label:e.label,options:{hasBorder:e.hasBorder}}))}R(":root{--ck-form-default-width:340px}.ck.ck-form{padding:0 0 var(--ck-spacing-large)}.ck.ck-form.ck-form_default-width{width:var(--ck-form-default-width)}.ck.ck-form:focus{outline:none}.ck.ck-form .ck.ck-input-number,.ck.ck-form .ck.ck-input-text{min-width:100%;width:0}.ck.ck-form .ck.ck-dropdown{min-width:100%}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button .ck-button__label{width:100%}@media screen and (max-width:600px){.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit{align-items:stretch;flex-direction:column;padding:0}.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit>.ck{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_with-submit .ck-button_with-text{justify-content:center}.ck.ck-form.ck-responsive-form .ck.ck-form__row.ck-form__row_large-bottom-padding{padding-bottom:var(--ck-spacing-large)}}[dir=ltr] .ck.ck-form.ck-responsive-form>:not(:first-child),[dir=rtl] .ck.ck-form.ck-responsive-form>:not(:last-child){margin-left:0}"),R(".ck.ck-form__row.ck-table-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-table-form__action-row .ck-button-save{justify-content:center}.ck.ck-form__row>:not(.ck-label)+*{margin-inline-start:var(--ck-spacing-large)}.ck.ck-form__row>.ck-label{min-width:100%;width:100%}.ck.ck-form__row.ck-table-form__action-row{margin-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-table-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}"),R('.ck.ck-table-form .ck-form__row.ck-table-form__background-row,.ck.ck-table-form .ck-form__row.ck-table-form__border-row{flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{align-items:center;flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view{align-items:center;display:flex;flex-direction:column-reverse}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{flex-grow:0}.ck.ck-table-form .ck-form__row>:not(.ck-label,.ck-table-form__dimension-operator){flex-grow:1}.ck.ck-table-form .ck.ck-labeled-field-view{position:relative}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{bottom:calc(var(--ck-table-properties-error-arrow-size)*-1);left:50%;position:absolute;transform:translate(-50%,100%);z-index:1}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{content:"";left:50%;position:absolute;top:calc(var(--ck-table-properties-error-arrow-size)*-1);transform:translateX(-50%)}:root{--ck-table-properties-error-arrow-size:6px;--ck-table-properties-min-error-width:150px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{max-width:80px;min-width:80px;width:80px}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{padding:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__height,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__width{margin:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{align-self:flex-end;display:inline-block;height:var(--ck-ui-component-min-height);line-height:var(--ck-ui-component-min-height);margin:0 var(--ck-spacing-small)}.ck.ck-table-form .ck.ck-labeled-field-view{padding-top:var(--ck-spacing-standard)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:ck-table-form-labeled-view-status-appear .15s ease both;background:var(--ck-color-base-error);border-radius:0;color:var(--ck-color-base-background);min-width:var(--ck-table-properties-min-error-width);padding:var(--ck-spacing-small) var(--ck-spacing-medium);text-align:center}.ck-rounded-corners .ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status,.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-style:solid;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size)}@media (prefers-reduced-motion:reduce){.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:none}}.ck.ck-table-form .ck.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}@keyframes ck-table-form-labeled-view-status-appear{0%{opacity:0}to{opacity:1}}'),R(".ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row{flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:first-of-type{flex-grow:0.57}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:last-of-type{flex-grow:0.43}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar .ck-button{flex-grow:1}.ck.ck-table-cell-properties-form{width:320px}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__padding-row{align-self:flex-end;padding:0;width:25%}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}");/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Pl extends D{options;focusTracker;keystrokes;children;borderStyleDropdown;borderWidthInput;borderColorInput;backgroundInput;paddingInput;widthInput;heightInput;horizontalAlignmentToolbar;verticalAlignmentToolbar;saveButtonView;cancelButtonView;_focusables;_focusCycler;constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=t;const{borderStyleDropdown:o,borderWidthInput:n,borderColorInput:l,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:s,backgroundInput:a}=this._createBackgroundFields(),{widthInput:c,operatorLabel:d,heightInput:u,dimensionsLabel:b}=this._createDimensionFields(),{horizontalAlignmentToolbar:m,verticalAlignmentToolbar:h,alignmentLabel:g}=this._createAlignmentFields();this.focusTracker=new le,this.keystrokes=new ne,this.children=this.createCollection(),this.borderStyleDropdown=o,this.borderWidthInput=n,this.borderColorInput=l,this.backgroundInput=a,this.paddingInput=this._createPaddingField(),this.widthInput=c,this.heightInput=u,this.horizontalAlignmentToolbar=m,this.verticalAlignmentToolbar=h;const{saveButtonView:f,cancelButtonView:p}=this._createActionButtons();this.saveButtonView=f,this.cancelButtonView=p,this._focusables=new xe,this._focusCycler=new Se({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new dt(e,{label:this.t("Cell properties")})),this.children.add(new x(e,{labelView:r,children:[r,o,l,n],class:"ck-table-form__border-row"})),this.children.add(new x(e,{labelView:s,children:[s,a],class:"ck-table-form__background-row"})),this.children.add(new x(e,{children:[new x(e,{labelView:b,children:[b,c,d,u],class:"ck-table-form__dimensions-row"}),new x(e,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new x(e,{labelView:g,children:[g,m,h],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new x(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),ut({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableCellProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},o=Ce({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color,colorPickerConfig:this.options.colorPickerConfig}),n=this.locale,l=this.t,r=l("Style"),s=new B(n);s.text=l("Border");const a=je(l),c=new S(n,bt);c.set({label:r,class:"ck-table-form__border-style"}),c.fieldView.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),c.fieldView.buttonView.bind("label").to(this,"borderStyle",b=>a[b||"none"]),c.fieldView.on("execute",b=>{this.borderStyle=b.source._borderStyleValue}),c.bind("isEmpty").to(this,"borderStyle",b=>!b),re(c.fieldView,lo(this,t.style),{role:"menu",ariaLabel:r});const d=new S(n,N);d.set({label:l("Width"),class:"ck-table-form__border-width"}),d.fieldView.bind("value").to(this,"borderWidth"),d.bind("isEnabled").to(this,"borderStyle",_e),d.fieldView.on("input",()=>{this.borderWidth=d.fieldView.element.value});const u=new S(n,o);return u.set({label:l("Color"),class:"ck-table-form__border-color"}),u.fieldView.bind("value").to(this,"borderColor"),u.bind("isEnabled").to(this,"borderStyle",_e),u.fieldView.on("input",()=>{this.borderColor=u.fieldView.value}),this.on("change:borderStyle",(b,m,h,g)=>{_e(h)||(this.borderColor="",this.borderWidth=""),_e(g)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:s,borderStyleDropdown:c,borderColorInput:u,borderWidthInput:d}}_createBackgroundFields(){const e=this.locale,t=this.t,o=new B(e);o.text=t("Background");const n=Ce({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),l=new S(e,n);return l.set({label:t("Color"),class:"ck-table-cell-properties-form__background"}),l.fieldView.bind("value").to(this,"backgroundColor"),l.fieldView.on("input",()=>{this.backgroundColor=l.fieldView.value}),{backgroundRowLabel:o,backgroundInput:l}}_createDimensionFields(){const e=this.locale,t=this.t,o=new B(e);o.text=t("Dimensions");const n=new S(e,N);n.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),n.fieldView.bind("value").to(this,"width"),n.fieldView.on("input",()=>{this.width=n.fieldView.element.value});const l=new D(e);l.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"\xD7"}]});const r=new S(e,N);return r.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:o,widthInput:n,operatorLabel:l,heightInput:r}}_createPaddingField(){const e=this.locale,t=this.t,o=new S(e,N);return o.set({label:t("Padding"),class:"ck-table-cell-properties-form__padding"}),o.fieldView.bind("value").to(this,"padding"),o.fieldView.on("input",()=>{this.padding=o.fieldView.element.value}),o}_createAlignmentFields(){const e=this.locale,t=this.t,o=new B(e),n={left:Yo,center:Jo,right:Xo,justify:qo,top:Ko,middle:Go,bottom:$o};o.text=t("Table cell text alignment");const l=new Re(e),r=e.contentLanguageDirection==="rtl";l.set({isCompact:!0,role:"radiogroup",ariaLabel:t("Horizontal text alignment toolbar")}),$e({view:this,icons:n,toolbar:l,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:a=>{if(r){if(a==="left")return"right";if(a==="right")return"left"}return a},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const s=new Re(e);return s.set({isCompact:!0,role:"radiogroup",ariaLabel:t("Vertical text alignment toolbar")}),$e({view:this,icons:n,toolbar:s,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:l,verticalAlignmentToolbar:s,alignmentLabel:o}}_createActionButtons(){const e=this.locale,t=this.t,o=new E(e),n=new E(e),l=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return o.set({label:t("Save"),icon:lt,class:"ck-button-save",type:"submit",withText:!0}),o.bind("isEnabled").toMany(l,"errorText",(...r)=>r.every(s=>!s)),n.set({label:t("Cancel"),icon:it,class:"ck-button-cancel",withText:!0}),n.delegate("execute").to(this,"cancel"),{saveButtonView:o,cancelButtonView:n}}get _horizontalAlignmentLabels(){const e=this.locale,t=this.t,o=t("Align cell text to the left"),n=t("Align cell text to the center"),l=t("Align cell text to the right"),r=t("Justify cell text");return e.uiLanguageDirection==="rtl"?{right:l,center:n,left:o,justify:r}:{left:o,center:n,right:l,justify:r}}get _verticalAlignmentLabels(){const e=this.t;return{top:e("Align cell text to the top"),middle:e("Align cell text to the middle"),bottom:e("Align cell text to the bottom")}}}function _e(i){return i!=="none"}function El(){}function ro(i){if(!i||typeof i!="object")return!1;const e=Object.getPrototypeOf(i);return e===null||e===Object.prototype||Object.getPrototypeOf(e)===null?Object.prototype.toString.call(i)==="[object Object]":!1}function so(i){return Object.getOwnPropertySymbols(i).filter(e=>Object.prototype.propertyIsEnumerable.call(i,e))}function ao(i){return i==null?i===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(i)}const Ll="[object RegExp]",Wl="[object String]",Bl="[object Number]",zl="[object Boolean]",co="[object Arguments]",Ol="[object Symbol]",Dl="[object Date]",Nl="[object Map]",Fl="[object Set]",Ml="[object Array]",Hl="[object Function]",Ul="[object ArrayBuffer]",Ge="[object Object]",jl="[object Error]",$l="[object DataView]",Gl="[object Uint8Array]",Kl="[object Uint8ClampedArray]",ql="[object Uint16Array]",Xl="[object Uint32Array]",Jl="[object BigUint64Array]",Yl="[object Int8Array]",Zl="[object Int16Array]",Ql="[object Int32Array]",ei="[object BigInt64Array]",ti="[object Float32Array]",oi="[object Float64Array]";function ni(i,e){return i===e||Number.isNaN(i)&&Number.isNaN(e)}function li(i,e,t){return ee(i,e,void 0,void 0,void 0,void 0,t)}function ee(i,e,t,o,n,l,r){const s=r(i,e,t,o,n,l);if(s!==void 0)return s;if(typeof i==typeof e)switch(typeof i){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return i===e;case"number":return i===e||Object.is(i,e);case"function":return i===e;case"object":return te(i,e,l,r)}return te(i,e,l,r)}function te(i,e,t,o){if(Object.is(i,e))return!0;let n=ao(i),l=ao(e);if(n===co&&(n=Ge),l===co&&(l=Ge),n!==l)return!1;switch(n){case Wl:return i.toString()===e.toString();case Bl:{const a=i.valueOf(),c=e.valueOf();return ni(a,c)}case zl:case Dl:case Ol:return Object.is(i.valueOf(),e.valueOf());case Ll:return i.source===e.source&&i.flags===e.flags;case Hl:return i===e}t=t??new Map;const r=t.get(i),s=t.get(e);if(r!=null&&s!=null)return r===e;t.set(i,e),t.set(e,i);try{switch(n){case Nl:{if(i.size!==e.size)return!1;for(const[a,c]of i.entries())if(!e.has(a)||!ee(c,e.get(a),a,i,e,t,o))return!1;return!0}case Fl:{if(i.size!==e.size)return!1;const a=Array.from(i.values()),c=Array.from(e.values());for(let d=0;d<a.length;d++){const u=a[d],b=c.findIndex(m=>ee(u,m,void 0,i,e,t,o));if(b===-1)return!1;c.splice(b,1)}return!0}case Ml:case Gl:case Kl:case ql:case Xl:case Jl:case Yl:case Zl:case Ql:case ei:case ti:case oi:{if(typeof Buffer<"u"&&Buffer.isBuffer(i)!==Buffer.isBuffer(e)||i.length!==e.length)return!1;for(let a=0;a<i.length;a++)if(!ee(i[a],e[a],a,i,e,t,o))return!1;return!0}case Ul:return i.byteLength!==e.byteLength?!1:te(new Uint8Array(i),new Uint8Array(e),t,o);case $l:return i.byteLength!==e.byteLength||i.byteOffset!==e.byteOffset?!1:te(new Uint8Array(i),new Uint8Array(e),t,o);case jl:return i.name===e.name&&i.message===e.message;case Ge:{if(!(te(i.constructor,e.constructor,t,o)||ro(i)&&ro(e)))return!1;const c=[...Object.keys(i),...so(i)],d=[...Object.keys(e),...so(e)];if(c.length!==d.length)return!1;for(let u=0;u<c.length;u++){const b=c[u],m=i[b];if(!Object.hasOwn(e,b))return!1;const h=e[b];if(!ee(m,h,b,i,e,t,o))return!1}return!0}default:return!1}}finally{t.delete(i),t.delete(e)}}function uo(i,e){return li(i,e,El)}function ii(i){return i!==null&&(typeof i=="object"||typeof i=="function")}function ri(i,e,{signal:t,edges:o}={}){let n,l=null;const r=o!=null&&o.includes("leading"),s=o==null||o.includes("trailing"),a=()=>{l!==null&&(i.apply(n,l),n=void 0,l=null)},c=()=>{s&&a(),m()};let d=null;const u=()=>{d!=null&&clearTimeout(d),d=setTimeout(()=>{d=null,c()},e)},b=()=>{d!==null&&(clearTimeout(d),d=null)},m=()=>{b(),n=void 0,l=null},h=()=>{b(),a()},g=function(...f){if(t?.aborted)return;n=this,l=f;const p=d==null;u(),r&&p&&a()};return g.schedule=u,g.cancel=m,g.flush=h,t?.addEventListener("abort",m,{once:!0}),g}function Ke(i,e=0,t={}){typeof t!="object"&&(t={});const{signal:o,leading:n=!1,trailing:l=!0,maxWait:r}=t,s=Array(2);n&&(s[0]="leading"),l&&(s[1]="trailing");let a,c=null;const d=ri(function(...m){a=i.apply(this,m),c=null},e,{signal:o,edges:s}),u=function(...m){if(r!=null){if(c===null)c=Date.now();else if(Date.now()-c>=r)return a=i.apply(this,m),c=Date.now(),d.cancel(),d.schedule(),a}return d.apply(this,m),a},b=()=>(d.flush(),a);return u.cancel=d.cancel,u.flush=b,u}function si(i,e=0,t={}){typeof t!="object"&&(t={});const{leading:o=!0,trailing:n=!0,signal:l}=t;return Ke(i,e,{leading:o,trailing:n,signal:l,maxWait:e})}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const qe=[F.defaultPositions.northArrowSouth,F.defaultPositions.northArrowSouthWest,F.defaultPositions.northArrowSouthEast,F.defaultPositions.southArrowNorth,F.defaultPositions.southArrowNorthWest,F.defaultPositions.southArrowNorthEast,F.defaultPositions.viewportStickyNorth];function bo(i,e){const t=i.plugins.get("ContextualBalloon"),o=i.editing.view.document.selection;let n;e==="cell"?fe(o)&&(n=ho(i)):ge(o)&&(n=mo(i)),n&&t.updatePosition(n)}function mo(i){const e=i.model.document.selection,t=P(e),o=i.editing.mapper.toViewElement(t);return{target:i.editing.view.domConverter.mapViewToDom(o),positions:qe}}function ho(i){const e=i.editing.mapper,t=i.editing.view.domConverter,o=i.model.document.selection;if(o.rangeCount>1)return{target:()=>ai(o.getRanges(),i),positions:qe};const n=go(o.getFirstPosition()),l=e.toViewElement(n);return{target:t.mapViewToDom(l),positions:qe}}function go(i){return i.nodeAfter&&i.nodeAfter.is("element","tableCell")?i.nodeAfter:i.findAncestor("tableCell")}function ai(i,e){const t=e.editing.mapper,o=e.editing.view.domConverter,n=Array.from(i).map(l=>{const r=go(l.start),s=t.toViewElement(r);return new ie(o.mapViewToDom(s))});return ie.getBoundingRect(n)}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function M(i){if(!i||!ii(i))return i;const{top:e,right:t,bottom:o,left:n}=i;if(e==t&&t==o&&o==n)return e}function H(i,e){const t=parseFloat(i);return Number.isNaN(t)||String(t)!==String(i)?i:`${t}${e}`}function ke(i,e={}){const t={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...i};return e.includeAlignmentProperty&&!t.alignment&&(t.alignment="center"),e.includePaddingProperty&&!t.padding&&(t.padding=""),e.includeVerticalAlignmentProperty&&!t.verticalAlignment&&(t.verticalAlignment="middle"),e.includeHorizontalAlignmentProperty&&!t.horizontalAlignment&&(t.horizontalAlignment=e.isRightToLeftContent?"right":"left"),t}function fo(i,e){return ke({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...i},e)}function Xe(i,e){return ke({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...i},e)}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const ci=500,po={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class wo extends _{_defaultContentTableCellProperties;_defaultLayoutTableCellProperties;_balloon;view;_viewWithContentTableDefaults;_viewWithLayoutTableDefaults;_undoStepBatch;_isReady;static get requires(){return[se]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("table.tableCellProperties",{borderColors:we,backgroundColors:we})}init(){const e=this.editor,t=e.t;this._defaultContentTableCellProperties=Xe(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._defaultLayoutTableCellProperties=ke(void 0,{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"}),this._balloon=e.plugins.get(se),this.view=null,this._isReady=!1,e.ui.componentFactory.add("tableCellProperties",o=>{const n=new E(o);n.set({label:t("Cell properties"),icon:Zo,tooltip:!0}),this.listenTo(n,"execute",()=>this._showView());const l=Object.values(po).map(r=>e.commands.get(r));return n.bind("isEnabled").toMany(l,"isEnabled",(...r)=>r.some(s=>s)),n})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const t=this.editor,o=t.config.get("table.tableCellProperties"),n=ae(o.borderColors),l=ce(t.locale,n),r=ae(o.backgroundColors),s=ce(t.locale,r),a=o.colorPicker!==!1,c=new Pl(t.locale,{borderColors:l,backgroundColors:s,defaultTableCellProperties:e,colorPickerConfig:a?o.colorPicker||{}:!1}),d=t.t;c.render(),this.listenTo(c,"submit",()=>{this._hideView()}),this.listenTo(c,"cancel",()=>{this._undoStepBatch.operations.length&&t.execute("undo",this._undoStepBatch),this._hideView()}),c.keystrokes.set("Esc",(m,h)=>{this._hideView(),h()}),mt({emitter:c,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const u=to(d),b=oo(d);return c.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),c.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:c.borderColorInput,commandName:"tableCellBorderColor",errorText:u,validator:pe})),c.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:c.borderWidthInput,commandName:"tableCellBorderWidth",errorText:b,validator:no})),c.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:c.paddingInput,commandName:"tableCellPadding",errorText:b,validator:Q})),c.on("change:width",this._getValidatedPropertyChangeCallback({viewField:c.widthInput,commandName:"tableCellWidth",errorText:b,validator:Q})),c.on("change:height",this._getValidatedPropertyChangeCallback({viewField:c.heightInput,commandName:"tableCellHeight",errorText:b,validator:Q})),c.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:c.backgroundInput,commandName:"tableCellBackgroundColor",errorText:u,validator:pe})),c.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),c.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),c}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableCellBorderStyle");Object.entries(po).map(([o,n])=>{const l=o,r=this.view===this._viewWithContentTableDefaults?this._defaultContentTableCellProperties[l]||"":this._defaultLayoutTableCellProperties[l]||"";return[o,e.get(n).value||r]}).forEach(([o,n])=>{(o==="borderColor"||o==="borderWidth")&&t.value==="none"||this.view.set(o,n)}),this._isReady=!0}_showView(){const e=this.editor,t=ge(e.editing.view.document.selection),o=t&&e.editing.mapper.toModelElement(t),n=!o||o.getAttribute("tableType")!=="layout";n&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableCellProperties):!n&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableCellProperties)),this.view=n?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:ho(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;fe(t.selection)?this._isViewVisible&&bo(e,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,o,n)=>{this._isReady&&this.editor.execute(e,{value:n,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:o,validator:n,errorText:l}=e,r=Ke(()=>{o.errorText=l},ci);return(s,a,c)=>{r.cancel(),this._isReady&&(n(c)?(this.editor.execute(t,{value:c,batch:this._undoStepBatch}),o.errorText=null):r())}}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class W extends v{attributeName;_defaultValue;_defaultContentTableValue;_defaultLayoutTableValue;constructor(e,t,o){switch(super(e),this.attributeName=t,this._defaultContentTableValue=o,t){case"tableCellBorderStyle":this._defaultLayoutTableValue="none";break;case"tableCellHorizontalAlignment":this._defaultLayoutTableValue="left";break;case"tableCellVerticalAlignment":this._defaultLayoutTableValue="middle";break;default:this._defaultLayoutTableValue=void 0}}refresh(){const t=this.editor.model.document.selection,n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(t),l=P(t);this._defaultValue=!l||l.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!n.length,this.value=this._getSingleValue(n)}execute(e={}){const{value:t,batch:o}=e,n=this.editor.model,r=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(n.document.selection),s=this._getValueToSet(t);n.enqueueChange(o,a=>{s?r.forEach(c=>a.setAttribute(this.attributeName,s,c)):r.forEach(c=>a.removeAttribute(this.attributeName,c))})}_getAttribute(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}_getSingleValue(e){const t=this._getAttribute(e[0]);return e.every(n=>this._getAttribute(n)===t)?t:void 0}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class di extends W{constructor(e,t){super(e,"tableCellWidth",t)}_getValueToSet(e){if(e=H(e,"px"),e!==this._defaultValue)return e}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Je extends _{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[K]}init(){const e=this.editor,t=Xe(e.config.get("table.tableCellProperties.defaultProperties"));be(e.model.schema,e.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:t.width}),e.commands.add("tableCellWidth",new di(e,t.width))}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class ui extends W{constructor(e,t){super(e,"tableCellPadding",t)}_getAttribute(e){if(!e)return;const t=M(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=H(e,"px");if(t!==this._defaultValue)return t}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class bi extends W{constructor(e,t){super(e,"tableCellHeight",t)}_getValueToSet(e){const t=H(e,"px");if(t!==this._defaultValue)return t}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class mi extends W{constructor(e,t){super(e,"tableCellBackgroundColor",t)}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class hi extends W{constructor(e,t){super(e,"tableCellVerticalAlignment",t)}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class gi extends W{constructor(e,t){super(e,"tableCellHorizontalAlignment",t)}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class fi extends W{constructor(e,t){super(e,"tableCellBorderStyle",t)}_getAttribute(e){if(!e)return;const t=M(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class pi extends W{constructor(e,t){super(e,"tableCellBorderColor",t)}_getAttribute(e){if(!e)return;const t=M(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class wi extends W{constructor(e,t){super(e,"tableCellBorderWidth",t)}_getAttribute(e){if(!e)return;const t=M(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=H(e,"px");if(t!==this._defaultValue)return t}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Co=/^(top|middle|bottom)$/,_o=/^(left|center|right|justify)$/;class ko extends _{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[K,Je]}init(){const e=this.editor,t=e.model.schema,o=e.conversion;e.config.define("table.tableCellProperties.defaultProperties",{});const n=Xe(e.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:e.locale.contentLanguageDirection==="rtl"});e.data.addStyleProcessorRules(ft),Ci(t,o,{color:n.borderColor,style:n.borderStyle,width:n.borderWidth}),e.commands.add("tableCellBorderStyle",new fi(e,n.borderStyle)),e.commands.add("tableCellBorderColor",new pi(e,n.borderColor)),e.commands.add("tableCellBorderWidth",new wi(e,n.borderWidth)),be(t,o,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:n.height}),e.commands.add("tableCellHeight",new bi(e,n.height)),e.data.addStyleProcessorRules(bn),be(t,o,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:n.padding}),e.commands.add("tableCellPadding",new ui(e,n.padding)),e.data.addStyleProcessorRules(pt),be(t,o,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:n.backgroundColor}),e.commands.add("tableCellBackgroundColor",new mi(e,n.backgroundColor)),_i(t,o,n.horizontalAlignment),e.commands.add("tableCellHorizontalAlignment",new gi(e,n.horizontalAlignment)),ki(t,o,n.verticalAlignment),e.commands.add("tableCellVerticalAlignment",new hi(e,n.verticalAlignment))}}function Ci(i,e,t){const o={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};i.extend("tableCell",{allowAttributes:Object.values(o)}),Pe(e,"td",o,t),Pe(e,"th",o,t),X(e,{modelElement:"tableCell",modelAttribute:o.style,styleName:"border-style"}),X(e,{modelElement:"tableCell",modelAttribute:o.color,styleName:"border-color"}),X(e,{modelElement:"tableCell",modelAttribute:o.width,styleName:"border-width"})}function _i(i,e,t){i.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:o=>({key:"style",value:{"text-align":o}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":_o}},model:{key:"tableCellHorizontalAlignment",value:(o,n,l)=>{const r=z(t,"left",l),s=o.getStyle("text-align");return s===r?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:_o}},model:{key:"tableCellHorizontalAlignment",value:(o,n,l)=>{const r=z(t,"left",l),s=o.getAttribute("align");return s===r?null:s}}})}function ki(i,e,t){i.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:o=>({key:"style",value:{"vertical-align":o}})}),e.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":Co}},model:{key:"tableCellVerticalAlignment",value:(o,n,l)=>{const r=z(t,"middle",l),s=o.getStyle("vertical-align");return s===r?null:s}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:Co}},model:{key:"tableCellVerticalAlignment",value:(o,n,l)=>{const r=z(t,"middle",l),s=o.getAttribute("valign");return s===r?null:s}}})}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class yi extends _{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[ko,wo]}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ti extends _{static get pluginName(){return"TableLayoutUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=this.editor.t;e.ui.componentFactory.add("insertTableLayout",o=>{const n=e.commands.get("insertTableLayout"),l=$(o);l.bind("isEnabled").to(n),l.buttonView.set({icon:rt,label:t("Insert table layout"),tooltip:!0});let r;return l.on("change:isOpen",()=>{r||(r=new he(o),l.panelView.children.add(r),r.delegate("execute").to(l),l.on("execute",()=>{e.execute("insertTableLayout",{rows:r.rows,columns:r.columns}),e.editing.view.focus()}))}),l}),e.ui.componentFactory.add("menuBar:insertTableLayout",o=>{const n=e.commands.get("insertTableLayout"),l=new at(o),r=new he(o);return r.delegate("execute").to(l),l.on("change:isOpen",(s,a,c)=>{c||r.reset()}),r.on("execute",()=>{e.execute("insertTableLayout",{rows:r.rows,columns:r.columns}),e.editing.view.focus()}),l.buttonView.set({label:t("Table layout"),icon:rt}),l.panelView.children.add(r),l.bind("isEnabled").to(n),l}),e.ui.componentFactory.add("tableType",()=>{const o=this.editor,n=o.t,l=new an(o.locale);return l.set({label:n("Table type"),icon:st,tooltip:!0}),yo(o,l)})}afterInit(){const e=this.editor;if(!e.plugins.has("TablePropertiesUI"))return;const t=e.plugins.get("TablePropertiesUI");e.ui.componentFactory.add("tableProperties",o=>{const n=t._createTablePropertiesButton(),l=new ct(o,n);return yo(e,l)})}}function yo(i,e){const t=i.t,o=i.locale,n=i.commands.get("tableType"),l=$(o,e),r=vi(i);return re(l,r,{ariaLabel:t("Table type options"),role:"menu"}),e.tooltip=t("Choose table type"),l.on("execute",s=>{const a=s.source.tableType;a&&n.execute(a)}),l}function vi(i){const e=i.t,t=i.commands.get("tableType"),o=new ve;return o.add(To(t,"layout",e("Layout table"))),o.add(To(t,"content",e("Content table"))),o}function To(i,e,t){const o=new Ae({label:t,role:"menuitemradio",withText:!0,tableType:e});return o.bind("isEnabled").to(i,"isEnabled"),o.bind("isOn").to(i,"value",n=>n===e),{type:"button",model:o}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ai extends v{refresh(){const e=this.editor.model,t=e.document.selection,o=e.schema;this.isEnabled=xi(t,o)}execute(e={}){const t=this.editor,o=t.model,n=t.plugins.get("TableUtils");o.change(l=>{const r={rows:e.rows||2,columns:e.columns||2},s=n.createTable(l,r);l.setAttribute("tableType","layout",s),o.insertObject(s,null,null,{findOptimalPosition:"auto"});const a=`${100/r.columns}%`,c=Array(r.columns).fill(a);t.commands.get("resizeColumnWidths").execute({tableWidth:"100%",columnWidths:c,table:s}),l.setSelection(l.createPositionAt(s.getNodeByPath([0,0,0]),0))})}}function xi(i,e){const t=i.getFirstPosition().parent,o=t===t.root?t:t.parent;return e.checkChild(o,"table")}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Si extends v{refresh(){this.isEnabled=!0}execute(e={}){const{model:t,plugins:o}=this.editor;let{table:n=t.document.selection.getSelectedElement(),columnWidths:l,tableWidth:r}=e;l&&(l=Array.isArray(l)?l:l.split(",")),t.change(s=>{r?s.setAttribute("tableWidth",r,n):s.removeAttribute("tableWidth",n);const a=o.get("TableColumnResizeEditing").getColumnGroupElement(n);if(!l&&!a)return;if(!l)return s.remove(a);const c=De(l);if(a)Array.from(a.getChildren()).forEach((d,u)=>s.setAttribute("columnWidth",c[u],d));else{const d=s.createElement("tableColumnGroup");c.forEach(u=>s.appendElement("tableColumn",{columnWidth:u},d)),s.append(d,n)}})}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Ri(i){return e=>e.on("element:colgroup",(t,o,n)=>{const l=o.modelCursor.findAncestor("table"),r=Y(l);if(!r)return;const s=Z(r),a=i.getColumns(l);let c=Xn(r,n.writer);c=Array.from({length:a},(d,u)=>c[u]||"auto"),(c.length!=s.length||c.includes("auto"))&&Ot(s,r,De(c),n.writer)},{priority:"low"})}function Ii(){return i=>i.on("insert:table",(e,t,o)=>{const n=o.writer,l=t.item,r=o.mapper.toViewElement(l),s=r.is("element","table")?r:Array.from(r.getChildren()).find(c=>c.is("element","table"));Y(l)?n.addClass("ck-table-resized",s):n.removeClass("ck-table-resized",s)},{priority:"low"})}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const vo=Mo("px");class Ao extends _{_isResizingActive;_resizingData;_domEmitter;_tableUtilsPlugin;_initialMouseEventData=null;static get requires(){return[K,T]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(Fo()),this._tableUtilsPlugin=e.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(t,o,n)=>{const l=n?"removeClass":"addClass";e.editing.view.change(r=>{for(const s of e.editing.view.document.roots)r[l]("ck-column-resize_disabled",e.editing.view.document.getRoot(s.rootName))})})}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const e=this.editor,t=e.plugins.get("TableColumnResize");e.plugins.get("TableEditing").registerAdditionalSlot({filter:l=>l.is("element","tableColumnGroup"),positionOffset:0});const n=new Si(e);e.commands.add("resizeTableWidth",n),e.commands.add("resizeColumnWidths",n),this.bind("_isResizingAllowed").to(e,"isReadOnly",t,"isEnabled",n,"isEnabled",(l,r,s)=>!l&&r&&s)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(e){return Y(e)}getTableColumnElements(e){return Z(e)}getTableColumnsWidths(e){return qn(e)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const t=this.editor.model;t.document.registerPostFixer(l=>{let r=!1;for(const s of Mn(t)){const a=this.getColumnGroupElement(s),c=this.getTableColumnElements(a),d=this.getTableColumnsWidths(a);let u=De(d);u=o(u,s,this),!uo(d,u)&&(Ot(c,a,u,l),r=!0)}return r});function o(l,r,s){const a=s._tableUtilsPlugin.getColumns(r);if(a-l.length===0)return l;const d=l.map(b=>Number(b.replace("%",""))),u=n(s.editor.model.document.differ,r);for(const b of u){const m=a-d.length;if(m===0)continue;const h=m>0,g=s._tableUtilsPlugin.getCellLocation(b).column;if(h){const f=Hn(r,s.editor),p=$n(m,f);d.splice(g,0,...p)}else{const f=d.splice(g,Math.abs(m));d[g]+=J(f)}}return d.map(b=>b+"%")}function n(l,r){const s=new Set;for(const a of l.getChanges())if(a.type=="insert"&&a.position.nodeAfter&&a.position.nodeAfter.name=="tableCell"&&a.position.nodeAfter.getAncestors().includes(r))s.add(a.position.nodeAfter);else if(a.type=="remove"){const c=a.position.nodeBefore||a.position.nodeAfter;c.name=="tableCell"&&c.getAncestors().includes(r)&&s.add(c)}return s}}_registerConverters(){const t=this.editor.conversion;t.for("upcast").attributeToAttribute({view:{name:/^(figure|table)$/,styles:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:o=>{if(!o.parent.is("element","figure"))return o.getStyle("width")}}}),t.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:o=>({name:"figure",key:"style",value:{width:o}})}),t.elementToElement({model:"tableColumnGroup",view:"colgroup"}),t.elementToElement({model:"tableColumn",view:"col"}),t.for("downcast").add(Ii()),t.for("upcast").add(Ri(this._tableUtilsPlugin)),t.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:o=>{const n=o.getStyle("width");return!n||!n.endsWith("%")&&!n.endsWith("pt")?"auto":n}}}),t.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),t.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:o=>({key:"style",value:{width:o}})})}_registerResizingListeners(){const e=this.editor.editing.view;e.addObserver(Kt),e.document.on("mouseover",this._onMouseOverHandler.bind(this),{priority:"high"}),e.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),e.document.on("mouseout",this._onMouseOutHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(oe.window.document,"mousemove",si(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(oe.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_recalculateResizerElement(e){const t=this.editor,o=t.editing.view.domConverter,n=o.mapViewToDom(e.findAncestor("table")),l=o.mapViewToDom(e.findAncestor(d=>["td","th"].includes(d.name))),r=new ie(n),s=new ie(l),a=vo(Number((r.top-s.top).toFixed(4))),c=vo(Number((s.bottom-r.bottom).toFixed(4)));t.editing.view.change(d=>{d.setStyle("top",a,e),d.setStyle("bottom",c,e)})}_resetResizerStyles(e){this.editor.editing.view.change(t=>{t.removeStyle("top",e),t.removeStyle("bottom",e)})}_onMouseOverHandler(e,t){const o=t.target;o.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&this._recalculateResizerElement(o)}_onMouseOutHandler(e,t){const o=t.target;o.hasClass("ck-table-column-resizer")&&this._isResizingAllowed&&(this._isResizingActive||this._resetResizerStyles(o))}_onMouseDownHandler(e,t){const o=t.target;if(!o.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const n=this.editor,l=n.editing.mapper.toModelElement(o.findAncestor("figure"));n.model.canEditAt(l)&&(t.preventDefault(),e.stop(),this._initialMouseEventData=t)}_startResizingAfterThreshold(){const e=this._initialMouseEventData,{target:t}=e,o=this.editor.editing.mapper.toModelElement(t.findAncestor("figure")),n=t.findAncestor("table"),l=r(o,this._tableUtilsPlugin,this.editor);Array.from(n.getChildren()).find(c=>c.is("element","colgroup"))||this.editor.editing.view.change(c=>{s(c,l,n)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(e,l),this.editor.editing.view.change(c=>a(c,n,this._resizingData));function r(c,d,u){const b=Array(d.getColumns(c)),m=new C(c);for(const h of m){const g=u.editing.mapper.toViewElement(h.cell),f=u.editing.view.domConverter.mapViewToDom(g),p=Kn(f);(!b[h.column]||p<b[h.column])&&(b[h.column]=A(p))}return b}function s(c,d,u){const b=c.createContainerElement("colgroup");for(let m=0;m<d.length;m++){const h=c.createEmptyElement("col"),g=`${A(d[m]/J(d)*100)}%`;c.setStyle("width",g,h),c.insert(c.createPositionAt(b,"end"),h)}c.insert(c.createPositionAt(u,0),b)}function a(c,d,u){const b=u.widths.viewFigureWidth/u.widths.viewFigureParentWidth;c.addClass("ck-table-resized",d),c.addClass("ck-table-column-resizer__active",u.elements.viewResizer),c.setStyle("width",`${A(b*100)}%`,d.findAncestor("figure"))}}_onMouseMoveHandler(e,t){if(this._initialMouseEventData){const k=this._initialMouseEventData.domEvent;if(Math.abs(t.clientX-k.clientX)>=Fn)this._startResizingAfterThreshold(),this._initialMouseEventData=null;else return}if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:o,flags:{isRightEdge:n,isTableCentered:l,isLtrContent:r},elements:{viewFigure:s,viewLeftColumn:a,viewRightColumn:c,viewResizer:d},widths:{viewFigureParentWidth:u,tableWidth:b,leftColumnWidth:m,rightColumnWidth:h}}=this._resizingData,g=-m+ze,f=n?u-b:h-ze,p=(r?1:-1)*(n&&l?2:1),w=jn((t.clientX-o)*p,Math.min(g,0),Math.max(f,0));w!==0&&(this.editor.editing.view.change(k=>{const I=A((m+w)*100/b);if(k.setStyle("width",`${I}%`,a),n){const V=A((b+w)*100/u);k.setStyle("width",`${V}%`,s)}else{const V=A((h-w)*100/b);k.setStyle("width",`${V}%`,c)}}),this._recalculateResizerElement(d))}_onMouseUpHandler(){if(this._initialMouseEventData=null,!this._isResizingActive)return;const{viewResizer:e,modelTable:t,viewFigure:o,viewColgroup:n}=this._resizingData.elements,l=this.editor,r=l.editing.view,s=this.getColumnGroupElement(t),a=Array.from(n.getChildren()).filter(f=>f.is("view:element")),c=s?this.getTableColumnsWidths(s):null,d=a.map(f=>f.getStyle("width")),u=!uo(c,d),b=t.getAttribute("tableWidth"),m=o.getStyle("width"),h=b!==m;(u||h)&&(this._isResizingAllowed?l.execute("resizeTableWidth",{table:t,tableWidth:`${A(m)}%`,columnWidths:d}):r.change(f=>{if(c)for(const p of a)f.setStyle("width",c.shift(),p);else f.remove(n);h&&(b?f.setStyle("width",b,o):f.removeStyle("width",o)),!c&&!b&&f.removeClass("ck-table-resized",[...o.getChildren()].find(p=>p.name==="table"))})),r.change(f=>{f.removeClass("ck-table-column-resizer__active",e)}),r.domConverter.mapViewToDom(e).matches(":hover")||this._resetResizerStyles(e),this._isResizingActive=!1,this._resizingData=null}_getResizingData(e,t){const o=this.editor,n=e.domEvent.clientX,l=e.target,r=l.findAncestor("td")||l.findAncestor("th"),s=o.editing.mapper.toModelElement(r),a=s.findAncestor("table"),c=Un(s,this._tableUtilsPlugin).rightEdge,d=this._tableUtilsPlugin.getColumns(a)-1,u=c===d,b=!a.hasAttribute("tableAlignment"),m=o.locale.contentLanguageDirection!=="rtl",h=r.findAncestor("table"),g=h.findAncestor("figure"),f=[...h.getChildren()].find(Bo=>Bo.is("element","colgroup")),p=f.getChild(c),w=u?void 0:f.getChild(c+1),k=Oe(o.editing.view.domConverter.mapViewToDom(g.parent)),I=Oe(o.editing.view.domConverter.mapViewToDom(g)),V=Bt(a,o),q=t[c],j=u?void 0:t[c+1];return{columnPosition:n,flags:{isRightEdge:u,isTableCentered:b,isLtrContent:m},elements:{viewResizer:l,modelTable:a,viewFigure:g,viewColgroup:f,viewLeftColumn:p,viewRightColumn:w},widths:{viewFigureParentWidth:k,viewFigureWidth:I,tableWidth:V,leftColumnWidth:q,rightColumnWidth:j}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(e=>{e.on("insert:tableCell",(t,o,n)=>{const l=o.item,r=n.mapper.toViewElement(l),s=n.writer;s.insert(s.createPositionAt(r,"end"),s.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}R(":root{--ck-color-selector-column-resizer-hover:var(--ck-color-base-active);--ck-table-column-resizer-width:7px;--ck-table-column-resizer-position-offset:calc(var(--ck-table-column-resizer-width)*-0.5 - 0.5px)}.ck-content .table .ck-table-resized{table-layout:fixed}.ck-content .table td,.ck-content .table th{overflow-wrap:break-word}.ck.ck-editor__editable .table td,.ck.ck-editor__editable .table th{position:relative}.ck.ck-editor__editable .table .ck-table-column-resizer{bottom:0;cursor:col-resize;position:absolute;right:var(--ck-table-column-resizer-position-offset);top:0;user-select:none;width:var(--ck-table-column-resizer-width);z-index:var(--ck-z-default)}.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer,.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer{display:none}.ck.ck-editor__editable .table .ck-table-column-resizer:hover,.ck.ck-editor__editable .table .ck-table-column-resizer__active{background-color:var(--ck-color-selector-column-resizer-hover);opacity:.25}.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer{left:var(--ck-table-column-resizer-position-offset);right:unset}");/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ye extends _{static get requires(){return[Ao,Je]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Vi extends v{refresh(){const t=this.editor.model.document.selection,o=P(t);o?(this.isEnabled=!0,this.value=o.getAttribute("tableType")):(this.isEnabled=!1,this.value=null)}execute(e){const o=this.editor.model,n=o.document.selection,l=P(n);l.getAttribute("tableType")!==e&&o.change(s=>{s.setAttribute("tableType",e,l),o.schema.removeDisallowedAttributes([l],s);const a=l.getChildren();for(const c of a)o.schema.checkChild(l,c)||s.remove(c)})}}R(`.ck-editor__editable.ck-editor__editable_inline>.ck-widget.ck-widget_with-selection-handle.layout-table:first-child{margin-top:var(--ck-spacing-large)}.ck-editor__editable.ck-editor__editable_inline>.ck-widget.ck-widget_with-selection-handle.layout-table:last-child,.ck-editor__editable.ck-editor__editable_inline>.ck-widget.ck-widget_with-selection-handle.layout-table:nth-last-child(2):has(+.ck-fake-selection-container){margin-bottom:var(--ck-spacing-large)}.ck-editor__editable .table.layout-table{display:table;margin:0}.ck-editor__editable .table.layout-table.ck-widget:hover{z-index:var(--ck-z-default)}.ck-editor__editable .table.layout-table.ck-widget:hover>.ck-widget__selection-handle{opacity:.75;visibility:visible}.ck-editor__editable .table.layout-table.ck-widget:hover>.ck-widget__selection-handle:hover{opacity:1}.ck-editor__editable .table.layout-table.ck-widget:has(.ck-widget.table:hover)>.ck-widget__selection-handle{opacity:0;visibility:hidden}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_selected{z-index:var(--ck-z-default)}.ck-content figure.table.layout-table,.ck-content table.table.layout-table{margin-bottom:0;margin-top:0}.ck-content figure.table.layout-table>table,.ck-content table.table.layout-table{border-spacing:0}:root{--ck-table-layout-widget-type-around-button-size:16px;--ck-table-layout-widget-type-around-icon-width:10px;--ck-table-layout-widget-type-around-icon-height:8px;--ck-table-layout-widget-handler-icon-size:10px;--ck-table-layout-default-border-color:#d4d4d4}.ck-editor__editable .table.layout-table>table{border-collapse:revert;height:100%;width:100%}.ck-editor__editable .table.layout-table>table:not([style*="border:"],[style*=border-top],[style*=border-bottom],[style*=border-left],[style*=border-right],[style*=border-width],[style*=border-style],[style*=border-color]){border-color:transparent;border-width:0;outline:none}.ck-editor__editable .table.layout-table>table>tbody>tr>td{box-shadow:revert;min-width:2em;padding:revert;text-indent:1px}.ck-editor__editable .table.layout-table>table>tbody>tr>td[style*=" width:"],.ck-editor__editable .table.layout-table>table>tbody>tr>td[style*="'width:"],.ck-editor__editable .table.layout-table>table>tbody>tr>td[style*=";width:"],.ck-editor__editable .table.layout-table>table>tbody>tr>td[style^="width:"]{min-width:auto}.ck-editor__editable .table.layout-table>table>tbody>tr>td:focus{background-color:transparent}.ck-editor__editable .table.layout-table>table>tbody>tr>td:not([style*="border:"],[style*=border-top],[style*=border-bottom],[style*=border-left],[style*=border-right],[style*=border-width],[style*=border-style],[style*=border-color]){border-color:transparent;border-width:0;outline:var(--ck-table-layout-default-border-color) 1px dashed;outline-offset:-1px}.ck-editor__editable .table.layout-table>table>tbody>tr>td:not([style*="border:"],[style*=border-top],[style*=border-bottom],[style*=border-left],[style*=border-right],[style*=border-width],[style*=border-style],[style*=border-color]):focus{outline:var(--ck-color-focus-border) 1px solid}.ck-editor__editable .table.layout-table>table>tbody>tr>td>.ck-table-bogus-paragraph{text-indent:0;width:calc(100% - 1px)}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around{--ck-widget-type-around-button-size:var(--ck-table-layout-widget-type-around-button-size)}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_after,.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_before{transform:translateY(0);z-index:2}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_before{border-radius:0 0 100px 100px;left:min(10%,30px);margin-left:var(--ck-table-layout-widget-type-around-button-size)}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_before:after{border-radius:0 0 100px 100px}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_after,.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button.ck-widget__type-around__button_after:after{border-radius:100px 100px 0 0}.ck-editor__editable .table.layout-table.ck-widget>.ck-widget__type-around>.ck-widget__type-around__button svg{height:var(--ck-table-layout-widget-type-around-icon-height);width:var(--ck-table-layout-widget-type-around-icon-width)}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_with-selection-handle>.ck-widget__selection-handle{--ck-widget-handler-icon-size:var(--ck-table-layout-widget-handler-icon-size);transform:translateY(calc(0px - var(--ck-widget-outline-thickness)));z-index:3}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:0}.ck-editor__editable .table.layout-table.ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:0}`);/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Pi=["content","layout"];class xo extends _{static get pluginName(){return"TableLayoutEditing"}static get requires(){return[Ye]}static get isOfficialPlugin(){return!0}init(){this._defineSchema(),this._defineConverters(),this._defineClipboardPasteHandlers(),this._registerTableTypeAttributePostfixer(),this.editor.commands.add("insertTableLayout",new Ai(this.editor)),this.editor.commands.add("tableType",new Vi(this.editor))}_defineSchema(){const{schema:e}=this.editor.model;e.extend("table",{allowAttributes:"tableType"}),e.addChildCheck(Ze,"caption"),e.addAttributeCheck(Ze,"headingRows"),e.addAttributeCheck(Ze,"headingColumns")}_defineConverters(){const{editor:e}=this,{conversion:t}=e,o=e.config.get("table.tableLayout.preferredExternalTableType");t.for("upcast").add(Ei(o)),t.for("dataDowncast").add(Li()),t.for("editingDowncast").attributeToAttribute({model:{key:"tableType",values:["layout","content"]},view:{layout:{key:"class",value:["layout-table"]},content:{key:"class",value:["content-table"]}}})}_defineClipboardPasteHandlers(){const{plugins:e}=this.editor;if(!e.has("ClipboardPipeline"))return;const t=e.get("ClipboardPipeline");this.listenTo(t,"contentInsertion",(o,n)=>{n.sourceEditorId||this.editor.model.change(l=>{for(const{item:r}of l.createRangeIn(n.content))r.is("element","table")&&l.setAttribute("tableType","content",r)})})}_registerTableTypeAttributePostfixer(){const e=this.editor;e.model.document.registerPostFixer(t=>{const o=e.model.document.differ.getChanges();let n=!1;for(const l of o){if(l.type=="insert"&&l.name!="$text"){const r=l.position.nodeAfter,s=t.createRangeOn(r);for(const a of s.getItems())a.is("element","table")&&!a.hasAttribute("tableType")&&(t.setAttribute("tableType","content",a),n=!0)}if(l.type=="attribute"&&l.attributeKey=="tableType"){for(const r of l.range.getItems())if(r.is("element","table")){e.model.schema.removeDisallowedAttributes([r],t);const s=r.getChildren();for(const a of s)e.model.schema.checkChild(r,a)||(t.remove(a),n=!0)}}}return n})}}function Ei(i){return e=>{e.on("element:table",(t,o,n)=>{const l=o.viewItem;if(!n.consumable.test(l,{name:!0})||So(l,i)=="content")return;const s=n.writer.createElement("table",{tableType:"layout"});if(n.safeInsert(s,o.modelCursor)){n.consumable.consume(l,{name:!0}),n.consumable.consume(l,{attributes:["role"]}),n.consumable.consume(l,{classes:["layout-table"]});for(const a of l.getChildren())if(a.is("element"))for(const c of a.getChildren())c.is("element","tr")&&n.convertItem(c,n.writer.createPositionAt(s,"end"));if(n.convertChildren(l,n.writer.createPositionAt(s,"end")),s.isEmpty){const a=n.writer.createElement("tableRow");n.writer.insert(a,n.writer.createPositionAt(s,"end")),O(n.writer,n.writer.createPositionAt(a,"end"))}n.updateConversionResult(s,o)}},{priority:"high"}),e.on("element:table",(t,o,n)=>{const{viewItem:l,modelRange:r}=o;r&&(n.writer.setAttribute("tableType",So(l,i),r),n.consumable.consume(l,{classes:["layout-table"]}),n.consumable.consume(l,{classes:["content-table"]}))},{priority:"low"})}}function Li(){return i=>i.on("attribute:tableType:table",(e,t,o)=>{const{item:n,attributeNewValue:l}=t,{mapper:r,writer:s}=o;if(!o.consumable.test(n,e.name))return;const a=r.toViewElement(n);s.addClass(`${l}-table`,a),l=="layout"&&s.setAttribute("role","presentation",a),o.consumable.consume(n,e.name)})}function So(i,e){return i.hasClass("content-table")?"content":i.hasClass("layout-table")?"layout":e&&Pi.includes(e)?e:i.parent.is("element","figure")||Array.from(i.getChildren()).some(o=>o.is("element","caption"))?"content":"layout"}function Ze(i){if(i.endsWith("table")&&i.last.getAttribute("tableType")=="layout")return!1}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Wi extends _{static get pluginName(){return"TableLayout"}static get isOfficialPlugin(){return!0}static get requires(){return[Yt,Ye,xo,Ti]}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class U extends v{attributeName;_defaultValue;_defaultContentTableValue;_defaultLayoutTableValue;constructor(e,t,o){super(e),this.attributeName=t,this._defaultContentTableValue=o,this._defaultLayoutTableValue=t==="tableBorderStyle"?"none":void 0}refresh(){const t=this.editor.model.document.selection,o=P(t);this._defaultValue=!o||o.getAttribute("tableType")!=="layout"?this._defaultContentTableValue:this._defaultLayoutTableValue,this.isEnabled=!!o,this.value=this._getValue(o)}execute(e={}){const t=this.editor.model,o=t.document.selection,{value:n,batch:l}=e,r=P(o),s=this._getValueToSet(n);t.enqueueChange(l,a=>{s?a.setAttribute(this.attributeName,s,r):a.removeAttribute(this.attributeName,r)})}_getValue(e){if(!e)return;const t=e.getAttribute(this.attributeName);if(t!==this._defaultValue)return t}_getValueToSet(e){if(e!==this._defaultValue)return e}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Bi extends U{constructor(e,t){super(e,"tableBackgroundColor",t)}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class zi extends U{constructor(e,t){super(e,"tableBorderColor",t)}_getValue(e){if(!e)return;const t=M(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Oi extends U{constructor(e,t){super(e,"tableBorderStyle",t)}_getValue(e){if(!e)return;const t=M(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Di extends U{constructor(e,t){super(e,"tableBorderWidth",t)}_getValue(e){if(!e)return;const t=M(e.getAttribute(this.attributeName));if(t!==this._defaultValue)return t}_getValueToSet(e){const t=H(e,"px");if(t!==this._defaultValue)return t}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ni extends U{constructor(e,t){super(e,"tableWidth",t)}_getValueToSet(e){if(e=H(e,"px"),e!==this._defaultValue)return e}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Fi extends U{constructor(e,t){super(e,"tableHeight",t)}_getValueToSet(e){if(e=H(e,"px"),e!==this._defaultValue)return e}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Mi extends U{constructor(e,t){super(e,"tableAlignment",t)}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const Hi=/^(left|center|right)$/,Ui=/^(left|none|right)$/;class Ro extends _{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[K]}init(){const e=this.editor,t=e.model.schema,o=e.conversion;e.config.define("table.tableProperties.defaultProperties",{});const n=fo(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});e.data.addStyleProcessorRules(ft),ji(t,o,{color:n.borderColor,style:n.borderStyle,width:n.borderWidth}),e.commands.add("tableBorderColor",new zi(e,n.borderColor)),e.commands.add("tableBorderStyle",new Oi(e,n.borderStyle)),e.commands.add("tableBorderWidth",new Di(e,n.borderWidth)),$i(t,o,n.alignment),e.commands.add("tableAlignment",new Mi(e,n.alignment)),Io(t,o,{modelAttribute:"tableWidth",styleName:"width",defaultValue:n.width}),e.commands.add("tableWidth",new Ni(e,n.width)),Io(t,o,{modelAttribute:"tableHeight",styleName:"height",defaultValue:n.height}),e.commands.add("tableHeight",new Fi(e,n.height)),e.data.addStyleProcessorRules(pt),Gi(t,o,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:n.backgroundColor}),e.commands.add("tableBackgroundColor",new Bi(e,n.backgroundColor))}}function ji(i,e,t){const o={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};i.extend("table",{allowAttributes:Object.values(o)}),Pe(e,"table",o,t),de(e,{modelAttribute:o.color,styleName:"border-color"}),de(e,{modelAttribute:o.style,styleName:"border-style"}),de(e,{modelAttribute:o.width,styleName:"border-width"})}function $i(i,e,t){i.extend("table",{allowAttributes:["tableAlignment"]}),e.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment",values:["left","center","right"]},view:{left:{key:"style",value:{float:"left"}},right:{key:"style",value:{float:"right"}},center:(o,n,l)=>({key:"style",value:l.item.getAttribute("tableType")!=="layout"?{float:"none"}:{"margin-left":"auto","margin-right":"auto"}})},converterPriority:"high"}),e.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:Ui}},model:{key:"tableAlignment",value:(o,n,l)=>{const r=z(t,"",l);let s=o.getStyle("float");return s==="none"&&(s="center"),s===r?null:s}}}).attributeToAttribute({view:{name:/^(table|figure)$/,styles:{"margin-left":"auto","margin-right":"auto"}},model:{key:"tableAlignment",value:(o,n,l)=>{const r=z(t,"",l),s="center";return s===r?null:s}}}).attributeToAttribute({view:{attributes:{align:Hi}},model:{name:"table",key:"tableAlignment",value:(o,n,l)=>{const r=z(t,"",l),s=o.getAttribute("align");return s===r?null:s}}})}function Gi(i,e,t){const{modelAttribute:o}=t;i.extend("table",{allowAttributes:[o]}),Ve(e,{viewElement:"table",...t}),de(e,t)}function Io(i,e,t){const{modelAttribute:o}=t;i.extend("table",{allowAttributes:[o]}),Ve(e,{viewElement:/^(table|figure)$/,shouldUpcast:n=>!(n.name=="table"&&n.parent.name=="figure"),...t}),X(e,{modelElement:"table",...t})}R(".ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-content:baseline;flex-basis:0;flex-wrap:wrap}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items{flex-wrap:nowrap}.ck.ck-table-properties-form{width:320px}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-self:flex-end;padding:0}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items>*{width:40px}");/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Ki extends D{options;focusTracker;keystrokes;children;borderStyleDropdown;borderWidthInput;borderColorInput;backgroundInput;widthInput;heightInput;alignmentToolbar;saveButtonView;cancelButtonView;_focusables;_focusCycler;constructor(e,t){super(e),this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=t;const{borderStyleDropdown:o,borderWidthInput:n,borderColorInput:l,borderRowLabel:r}=this._createBorderFields(),{backgroundRowLabel:s,backgroundInput:a}=this._createBackgroundFields(),{widthInput:c,operatorLabel:d,heightInput:u,dimensionsLabel:b}=this._createDimensionFields(),{alignmentToolbar:m,alignmentLabel:h}=this._createAlignmentFields();this.focusTracker=new le,this.keystrokes=new ne,this.children=this.createCollection(),this.borderStyleDropdown=o,this.borderWidthInput=n,this.borderColorInput=l,this.backgroundInput=a,this.widthInput=c,this.heightInput=u,this.alignmentToolbar=m;const{saveButtonView:g,cancelButtonView:f}=this._createActionButtons();this.saveButtonView=g,this.cancelButtonView=f,this._focusables=new xe,this._focusCycler=new Se({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new dt(e,{label:this.t("Table properties")})),this.children.add(new x(e,{labelView:r,children:[r,o,l,n],class:"ck-table-form__border-row"})),this.children.add(new x(e,{labelView:s,children:[s,a],class:"ck-table-form__background-row"})),this.children.add(new x(e,{children:[new x(e,{labelView:b,children:[b,c,d,u],class:"ck-table-form__dimensions-row"}),new x(e,{labelView:h,children:[h,m],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new x(e,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),ut({view:this}),[this.borderColorInput,this.backgroundInput].forEach(e=>{this._focusCycler.chain(e.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const e=this.options.defaultTableProperties,t={style:e.borderStyle,width:e.borderWidth,color:e.borderColor},o=Ce({colorConfig:this.options.borderColors,columns:5,defaultColorValue:t.color,colorPickerConfig:this.options.colorPickerConfig}),n=this.locale,l=this.t,r=l("Style"),s=new B(n);s.text=l("Border");const a=je(l),c=new S(n,bt);c.set({label:r,class:"ck-table-form__border-style"}),c.fieldView.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),c.fieldView.buttonView.bind("label").to(this,"borderStyle",b=>a[b||"none"]),c.fieldView.on("execute",b=>{this.borderStyle=b.source._borderStyleValue}),c.bind("isEmpty").to(this,"borderStyle",b=>!b),re(c.fieldView,lo(this,t.style),{role:"menu",ariaLabel:r});const d=new S(n,N);d.set({label:l("Width"),class:"ck-table-form__border-width"}),d.fieldView.bind("value").to(this,"borderWidth"),d.bind("isEnabled").to(this,"borderStyle",ye),d.fieldView.on("input",()=>{this.borderWidth=d.fieldView.element.value});const u=new S(n,o);return u.set({label:l("Color"),class:"ck-table-form__border-color"}),u.fieldView.bind("value").to(this,"borderColor"),u.bind("isEnabled").to(this,"borderStyle",ye),u.fieldView.on("input",()=>{this.borderColor=u.fieldView.value}),this.on("change:borderStyle",(b,m,h,g)=>{ye(h)||(this.borderColor="",this.borderWidth=""),ye(g)||(this.borderColor=t.color,this.borderWidth=t.width)}),{borderRowLabel:s,borderStyleDropdown:c,borderColorInput:u,borderWidthInput:d}}_createBackgroundFields(){const e=this.locale,t=this.t,o=new B(e);o.text=t("Background");const n=Ce({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),l=new S(e,n);return l.set({label:t("Color"),class:"ck-table-properties-form__background"}),l.fieldView.bind("value").to(this,"backgroundColor"),l.fieldView.on("input",()=>{this.backgroundColor=l.fieldView.value}),{backgroundRowLabel:o,backgroundInput:l}}_createDimensionFields(){const e=this.locale,t=this.t,o=new B(e);o.text=t("Dimensions");const n=new S(e,N);n.set({label:t("Width"),class:"ck-table-form__dimensions-row__width"}),n.fieldView.bind("value").to(this,"width"),n.fieldView.on("input",()=>{this.width=n.fieldView.element.value});const l=new D(e);l.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"\xD7"}]});const r=new S(e,N);return r.set({label:t("Height"),class:"ck-table-form__dimensions-row__height"}),r.fieldView.bind("value").to(this,"height"),r.fieldView.on("input",()=>{this.height=r.fieldView.element.value}),{dimensionsLabel:o,widthInput:n,operatorLabel:l,heightInput:r}}_createAlignmentFields(){const e=this.locale,t=this.t,o=new B(e);o.text=t("Alignment");const n=new Re(e);return n.set({role:"radiogroup",isCompact:!0,ariaLabel:t("Table alignment toolbar")}),$e({view:this,icons:{left:tn,center:en,right:Qo},toolbar:n,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:o,alignmentToolbar:n}}_createActionButtons(){const e=this.locale,t=this.t,o=new E(e),n=new E(e),l=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return o.set({label:t("Save"),icon:lt,class:"ck-button-save",type:"submit",withText:!0}),o.bind("isEnabled").toMany(l,"errorText",(...r)=>r.every(s=>!s)),n.set({label:t("Cancel"),icon:it,class:"ck-button-cancel",withText:!0}),n.delegate("execute").to(this,"cancel"),{saveButtonView:o,cancelButtonView:n}}get _alignmentLabels(){const e=this.locale,t=this.t,o=t("Align table to the left"),n=t("Center table"),l=t("Align table to the right");return e.uiLanguageDirection==="rtl"?{right:l,center:n,left:o}:{left:o,center:n,right:l}}}function ye(i){return i!=="none"}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/const qi=500,Vo={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class Po extends _{_defaultContentTableProperties;_defaultLayoutTableProperties;_balloon;view=null;_viewWithContentTableDefaults=null;_viewWithLayoutTableDefaults=null;_undoStepBatch;_isReady;static get requires(){return[se]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("table.tableProperties",{borderColors:we,backgroundColors:we})}init(){const e=this.editor;this._defaultContentTableProperties=fo(e.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._defaultLayoutTableProperties=ke(),this._balloon=e.plugins.get(se),e.ui.componentFactory.add("tableProperties",()=>this._createTablePropertiesButton())}_createTablePropertiesButton(){const e=this.editor,t=e.t,o=new E(e.locale);o.set({label:t("Table properties"),icon:st,tooltip:!0}),this.listenTo(o,"execute",()=>this._showView());const n=Object.values(Vo).map(l=>e.commands.get(l));return o.bind("isEnabled").toMany(n,"isEnabled",(...l)=>l.some(r=>r)),o}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(e){const t=this.editor,o=t.config.get("table.tableProperties"),n=ae(o.borderColors),l=ce(t.locale,n),r=ae(o.backgroundColors),s=ce(t.locale,r),a=o.colorPicker!==!1,c=new Ki(t.locale,{borderColors:l,backgroundColors:s,defaultTableProperties:e,colorPickerConfig:a?o.colorPicker||{}:!1}),d=t.t;c.render(),this.listenTo(c,"submit",()=>{this._hideView()}),this.listenTo(c,"cancel",()=>{this._undoStepBatch.operations.length&&t.execute("undo",this._undoStepBatch),this._hideView()}),c.keystrokes.set("Esc",(m,h)=>{this._hideView(),h()}),mt({emitter:c,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const u=to(d),b=oo(d);return c.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),c.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:c.borderColorInput,commandName:"tableBorderColor",errorText:u,validator:pe})),c.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:c.borderWidthInput,commandName:"tableBorderWidth",errorText:b,validator:no})),c.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:c.backgroundInput,commandName:"tableBackgroundColor",errorText:u,validator:pe})),c.on("change:width",this._getValidatedPropertyChangeCallback({viewField:c.widthInput,commandName:"tableWidth",errorText:b,validator:Q})),c.on("change:height",this._getValidatedPropertyChangeCallback({viewField:c.heightInput,commandName:"tableHeight",errorText:b,validator:Q})),c.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),c}_fillViewFormFromCommandValues(){const e=this.editor.commands,t=e.get("tableBorderStyle");Object.entries(Vo).map(([o,n])=>{const l=o,r=this.view===this._viewWithContentTableDefaults?this._defaultContentTableProperties[l]||"":this._defaultLayoutTableProperties[l]||"";return[l,e.get(n).value||r]}).forEach(([o,n])=>{(o==="borderColor"||o==="borderWidth")&&t.value==="none"||this.view.set(o,n)}),this._isReady=!0}_showView(){const e=this.editor,t=ge(e.editing.view.document.selection),o=t&&e.editing.mapper.toModelElement(t),n=!o||o.getAttribute("tableType")!=="layout";n&&!this._viewWithContentTableDefaults?this._viewWithContentTableDefaults=this._createPropertiesView(this._defaultContentTableProperties):!n&&!this._viewWithLayoutTableDefaults&&(this._viewWithLayoutTableDefaults=this._createPropertiesView(this._defaultLayoutTableProperties)),this.view=n?this._viewWithContentTableDefaults:this._viewWithLayoutTableDefaults,this.listenTo(e.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:mo(e)}),this._undoStepBatch=e.model.createBatch(),this.view.focus()}_hideView(){const e=this.editor;this.stopListening(e.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const e=this.editor,t=e.editing.view.document;ge(t.selection)?this._isViewVisible&&bo(e,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(e){return(t,o,n)=>{this._isReady&&this.editor.execute(e,{value:n,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(e){const{commandName:t,viewField:o,validator:n,errorText:l}=e,r=Ke(()=>{o.errorText=l},qi);return(s,a,c)=>{r.cancel(),this._isReady&&(n(c)?(this.editor.execute(t,{value:c,batch:this._undoStepBatch}),o.errorText=null):r())}}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Xi extends _{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[Ro,Po]}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Ji(i){i.document.registerPostFixer(e=>Yi(e,i))}function Yi(i,e){const t=e.document.differ.getChanges();let o=!1;for(const n of t){if(n.type!="insert")continue;const l=n.position.parent;if(l.is("element","table")||n.name=="table"){const r=n.name=="table"?n.position.nodeAfter:l,s=Array.from(r.getChildren()).filter(c=>c.is("element","caption")),a=s.shift();if(!a)continue;for(const c of s)i.move(i.createRangeIn(c),a,"end"),i.remove(c);a.nextSibling&&(i.move(i.createRangeOn(a),r,"end"),o=!0),o=!!s.length||o}}return o}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/function Eo(i){return!!i&&i.is("element","table")}function Qe(i){for(const e of i.getChildren())if(e.is("element","caption"))return e;return null}function Zi(i){const e=P(i);return e?Qe(e):null}function Qi(i){const e=i.parent;return i.name=="figcaption"&&e&&e.is("element","figure")&&e.hasClass("table")?{name:!0}:i.name=="caption"&&e&&e.is("element","table")?{name:!0}:null}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class er extends v{refresh(){const e=this.editor,t=P(e.model.document.selection);this.isEnabled=!!t&&e.model.schema.checkChild(t,"caption"),this.isEnabled?this.value=!!Qe(t):this.value=!1}execute({focusCaptionOnShow:e=!1}={}){this.editor.model.change(t=>{this.value?this._hideTableCaption(t):this._showTableCaption(t,e)})}_showTableCaption(e,t){const o=this.editor.model,n=P(o.document.selection),s=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(n)||e.createElement("caption");o.insertContent(s,n,"end"),t&&e.setSelection(s,"in")}_hideTableCaption(e){const t=this.editor.model,o=P(t.document.selection),n=this.editor.plugins.get("TableCaptionEditing"),l=Qe(o);n._saveCaption(o,l),t.deleteContent(e.createSelection(l,"on"))}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Lo extends _{_savedCaptionsMap;static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){const e=this.editor,t=e.model.schema,o=e.editing.view,n=e.t;t.isRegistered("caption")?t.extend("caption",{allowIn:"table"}):t.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleTableCaption",new er(this.editor)),e.conversion.for("upcast").elementToElement({view:Qi,model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(l,{writer:r})=>Eo(l.parent)?r.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(l,{writer:r})=>{if(!Eo(l.parent))return null;const s=r.createEditableElement("figcaption");return r.setCustomProperty("tableCaption",!0,s),s.placeholder=n("Enter table caption"),mn({view:o,element:s,keepOnFocus:!0}),et(s,r)}}),Ji(e.model)}_getSavedCaption(e){const t=this._savedCaptionsMap.get(e);return t?hn.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class Wo extends _{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const e=this.editor,t=e.editing.view,o=e.t;e.ui.componentFactory.add("toggleTableCaption",n=>{const l=e.commands.get("toggleTableCaption"),r=new E(n);return r.set({icon:on,tooltip:!0,isToggleable:!0}),r.bind("isOn","isEnabled").to(l,"value","isEnabled"),r.bind("label").to(l,"value",s=>o(s?"Toggle caption off":"Toggle caption on")),this.listenTo(r,"execute",()=>{if(e.execute("toggleTableCaption",{focusCaptionOnShow:!0}),l.value){const s=Zi(e.model.document.selection),a=e.editing.mapper.toViewElement(s);if(!a)return;t.scrollToTheSelection(),t.change(c=>{c.addClass("table__caption_highlighted",a)})}e.editing.view.focus()}),r})}}R(":root{--ck-color-selector-caption-background:#f7f7f7;--ck-color-selector-caption-text:#333;--ck-color-selector-caption-highlighted-background:#fd0}.ck-content .table>figcaption{background-color:var(--ck-color-selector-caption-background);caption-side:top;color:var(--ck-color-selector-caption-text);display:table-caption;font-size:.75em;outline-offset:-1px;padding:.6em;text-align:center;word-break:break-word}@media (forced-colors:active){.ck-content .table>figcaption{background-color:unset;color:unset}}@media (forced-colors:none){.ck.ck-editor__editable .table>figcaption.table__caption_highlighted{animation:ck-table-caption-highlight .6s ease-out}}.ck.ck-editor__editable .table>figcaption.ck-placeholder:before{overflow:hidden;padding-left:inherit;padding-right:inherit;text-overflow:ellipsis;white-space:nowrap}@keyframes ck-table-caption-highlight{0%{background-color:var(--ck-color-selector-caption-highlighted-background)}to{background-color:var(--ck-color-selector-caption-background)}}");/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/class tr extends _{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[Lo,Wo]}}export{Yt as PlainTableOutput,Jt as Table,tr as TableCaption,Lo as TableCaptionEditing,Wo as TableCaptionUI,yi as TableCellProperties,ko as TableCellPropertiesEditing,wo as TableCellPropertiesUI,Je as TableCellWidthEditing,jt as TableClipboard,Ye as TableColumnResize,Ao as TableColumnResizeEditing,K as TableEditing,Gt as TableKeyboard,Wi as TableLayout,xo as TableLayoutEditing,qt as TableMouse,Xi as TableProperties,Ro as TablePropertiesEditing,Po as TablePropertiesUI,L as TableSelection,Rl as TableToolbar,Ut as TableUI,T as TableUtils};
