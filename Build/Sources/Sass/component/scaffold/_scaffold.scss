//
// Scaffold
// ========
//
* {
    scrollbar-color: color-mix(in srgb, currentColor, transparent 75%) transparent;
}

:root,
body {
    color: var(--typo3-scaffold-color);
    background-color: var(--typo3-scaffold-bg);
}

body {
    min-height: 100%;
    font-size: var(--typo3-font-size);
}

iframe {
    color: var(--typo3-scaffold-color);
    background-color: var(--typo3-scaffold-bg);
}

//
// Component
//
.scaffold {
    display: grid;
    background-color: var(--typo3-scaffold-bg);
    color: var(--typo3-scaffold-color);
    position: relative;
    height: 100dvh;
    width: 100%;
    contain: strict;

    &-modulemenu-expanded {
        --typo3-scaffold-modulemenu-width: var(--typo3-scaffold-modulemenu-expanded-width);
    }
}

.scaffold {
    grid-template-rows: auto 1fr;
    grid-template-columns: clamp(0%, var(--typo3-scaffold-modulemenu-expanded-width), 75%) 1fr;
}

.scaffold-header {
    grid-column: 1 / 3;
}

.scaffold-modulemenu {
    display: none;
    grid-column: 1 / 2;
    grid-row: 2;

    .scaffold-modulemenu-expanded & {
        display: initial;
    }
}

.scaffold-content {
    grid-column: 1 / 3;
    grid-row: 2;
}

@container (min-width: 992px) {
    .scaffold {
        grid-template-columns: var(--typo3-scaffold-modulemenu-width) 1fr;
    }

    .scaffold-modulemenu {
        display: initial;
        grid-column: 1 / 2;
    }

    .scaffold-content {
        grid-column: 2 / 3;
    }
}

.scaffold-header {
    display: flex;
    align-items: center;
    gap: var(--typo3-scaffold-gap);
    padding: var(--typo3-scaffold-header-padding-y) var(--typo3-scaffold-header-padding-x);
    height: var(--typo3-scaffold-header-height);
    color: var(--typo3-scaffold-header-color);
    background-color: var(--typo3-scaffold-header-bg);
    box-shadow: var(--typo3-scaffold-header-box-shadow);
    z-index: var(--typo3-scaffold-header-zindex);
}

//
// Topbar
//
.scaffold-topbar {
    display: flex;
    align-items: center;
    flex-grow: 1;
}

//
// ModuleMenu
//
.scaffold-modulemenu {
    background-color: var(--typo3-scaffold-modulemenu-bg);
    color: var(--typo3-scaffold-modulemenu-color);
    z-index: calc(var(--typo3-scaffold-header-zindex) - 1);
    overflow-y: auto;
    overflow-x: hidden;
    box-shadow: var(--typo3-scaffold-modulemenu-box-shadow);
    border-inline-end: 1px solid color-mix(in srgb, var(--typo3-scaffold-modulemenu-bg), var(--typo3-scaffold-modulemenu-color) var(--typo3-border-mix));
}

//
// Toolbar
//
.scaffold-toolbar {
    z-index: var(--typo3-zindex-dropdown);
    display: none;

    @include media-breakpoint-up('lg') {
        overflow: visible;
        background-color: transparent;
        inset-inline-start: auto;
        bottom: auto;
        display: block;
    }
}

.scaffold-toolbar-expanded {
    .scaffold-toolbar {
        @include media-breakpoint-down('lg') {
            &:before {
                content: "";
                height: 1px;
                position: fixed;
                top: calc(var(--typo3-scaffold-header-height) - 1px);
                inset-inline: 0;
                box-shadow: var(--typo3-scaffold-header-box-shadow);
            }
            position: absolute;
            top: var(--typo3-scaffold-header-height);
            inset-inline: 0;
            height: calc(100dvh - var(--typo3-scaffold-header-height));
            padding: 1rem .5rem;
            display: block;
            overflow: auto;
            background-color: var(--typo3-scaffold-header-foldout-bg);
        }
    }
}

//
// Content
//
.scaffold-content {
    position: relative !important;
    background: var(--typo3-scaffold-bg);
    overflow: auto;
}

.scaffold-content-module {
    height: 100%;
}

.scaffold-content-module-iframe {
    display: block;
    border: none;
    height: 100%;
    width: 100%;
}

.scaffold-content typo3-backend-content-navigation {
    [slot="navigation"] {
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    [slot="content"] {
        flex: 1 0 0;
        height: 100%;
        display: flex;
        flex-direction: row;
    }
}

//
// Content Overlay
//
.scaffold-content-overlay {
    display: none;
    position: absolute;
    z-index: calc(var(--typo3-scaffold-header-zindex) - 2);
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    opacity: var(--typo3-overlay-opacity);
    background-color: var(--typo3-overlay-bg);

    .scaffold-modulemenu-expanded & {
        display: block;

        @include media-breakpoint-up('lg') {
            display: none;
        }
    }
}
