.ck {
    --typo3-rte-base-fg: var(--typo3-surface-container-high);
    --typo3-rte-base-bg: var(--typo3-surface-container-lowest);
    --typo3-rte-base-text: var(--typo3-component-color);
    --typo3-rte-base-border-color: var(--typo3-component-border-color);
    --typo3-rte-accessibility-help-dialog-border-color: light-dark(var(--token-color-neutral-10), var(--token-color-neutral-85));
    --typo3-rte-accessibility-help-dialog-code-background-color: light-dark(var(--token-color-neutral-7), var(--token-color-neutral-90));
    --typo3-rte-accessibility-help-dialog-kbd-shadow-color: light-dark(var(--token-color-neutral-5), var(--token-color-neutral-95));
    --typo3-rte-default-button-hover-bg: var(--typo3-component-hover-bg);
    --typo3-rte-default-button-focus-bg: var(--typo3-component-focus-bg);
    --typo3-rte-default-button-active-bg: var(--typo3-component-active-bg);
    --typo3-rte-split-button-hover-bg: color-mix(in srgb, var(--typo3-rte-default-button-hover-bg), var(--typo3-rte-base-bg));
    --typo3-rte-split-button-hover-border-color: var(--typo3-component-hover-border-color);
    --typo3-rte-on-button-color: var(--typo3-state-default-color);
    --typo3-rte-on-button-bg: var(--typo3-state-default-bg);
    --typo3-rte-on-button-hover-bg: var(--typo3-state-default-hover-bg);
    --typo3-rte-on-button-focus-bg: var(--typo3-state-default-focus-bg);
    --typo3-rte-on-button-active-bg: var(--typo3-state-default-focus-bg);
    --typo3-rte-on-button-disabled-bg: var(--typo3-state-default-disabled-bg);
    --typo3-rte-fullscreen-padding-x: var(--ck-spacing-small);
    --typo3-rte-fullscreen-padding-y: 1.5rem;
    --typo3-rte-powered-by-text-color: var(--typo3-rte-base-text);
    --typo3-rte-powered-by-background: transparent;
    --typo3-rte-powered-by-border-color: transparent;
    --ck-accessibility-help-dialog-border-color: var(--typo3-rte-accessibility-help-dialog-border-color);
    --ck-accessibility-help-dialog-code-background-color: var(--typo3-rte-accessibility-help-dialog-code-background-color);
    --ck-accessibility-help-dialog-kbd-shadow-color: var(--typo3-rte-accessibility-help-dialog-kbd-shadow-color);
    --ck-color-base-foreground: var(--typo3-rte-base-fg);
    --ck-color-base-background: var(--typo3-rte-base-bg);
    --ck-color-base-border: var(--typo3-rte-base-border-color);
    --ck-color-toolbar-background: var(--typo3-rte-base-bg);
    --ck-color-toolbar-border: var(--typo3-rte-base-border-color);
    --ck-color-toolbar-text: var(--typo3-rte-base-text);
    --ck-color-button-default-hover-background: var(--typo3-rte-default-button-hover-bg);
    --ck-color-button-default-focus-background: var(--typo3-rte-default-button-focus-bg);
    --ck-color-button-default-active-background: var(--typo3-rte-default-button-focus-bg);
    --ck-color-split-button-hover-background: var(--typo3-rte-split-button-hover-bg);
    --ck-color-split-button-hover-border: var(--typo3-rte-split-button-hover-border-color);
    --ck-color-button-on-color: var(--typo3-rte-on-button-color);
    --ck-color-button-on-background: var(--typo3-rte-on-button-bg);
    --ck-color-button-on-disabled-background: var(--typo3-rte-on-button-disabled-bg);
    --ck-color-button-on-hover-background: var(--typo3-rte-on-button-hover-bg);
    --ck-color-button-on-focus-background: var(--typo3-rte-on-button-focus-bg);
    --ck-color-button-on-active-background: var(--typo3-rte-on-button-active-bg);
    --ck-color-dropdown-panel-background: var(--typo3-rte-base-bg);
    --ck-color-dropdown-panel-border: var(--typo3-rte-base-border-color);
    --ck-color-panel-background: var(--typo3-rte-base-bg);
    --ck-color-panel-border: var(--typo3-rte-base-border-color);
    --ck-color-dialog-background: var(--typo3-rte-base-bg);
    --ck-color-dialog-form-header-border: var(--typo3-rte-base-border-color);
    --ck-color-labeled-field-label-background: var(--typo3-rte-base-bg);
    --ck-color-list-background: var(--typo3-rte-base-bg);
    --ck-color-list-button-hover-background: var(--typo3-rte-default-button-hover-bg);
    --ck-color-list-button-focus-background: var(--typo3-rte-default-button-focus-bg);
    --ck-color-list-button-active-background: var(--typo3-rte-default-button-active-bg);
    --ck-color-input-background: var(--typo3-rte-base-bg);
    --ck-color-input-border: var(--typo3-rte-base-border-color);
    --ck-color-text: var(--typo3-rte-base-text);
    --ck-focus-outer-shadow: var(--ck-focus-outer-shadow-geometry) color-mix(in srgb, var(--typo3-input-focus-border-color), transparent 25%);
    --ck-powered-by-text-color: var(--typo3-rte-powered-by-text-color);
    --ck-powered-by-background: var(--typo3-rte-powered-by-background);
    --ck-powered-by-border-color: var(--typo3-rte-powered-by-border-color);
    --ck-style-panel-button-label-background: var(--typo3-rte-on-button-bg);
    --ck-style-panel-button-hover-label-background: var(--typo3-rte-default-button-hover-bg);
    --ck-style-panel-button-hover-border-color: color-mix(in srgb, var(--ck-style-panel-button-hover-label-background), currentColor 25%);

    &.ck-toolbar > .ck-toolbar__items > .ck-link-toolbar__preview {
        // @todo: this styling becomes obsolete once the link preview can render <a> tags
        padding: 0 var(--ck-spacing-medium);
    }

    &.ck-fullscreen {
        &__main-wrapper {
            .ck-fullscreen {
                &__menu-bar .ck-menu-bar,
                &__toolbar .ck-toolbar {
                    padding: var(--typo3-rte-fullscreen-padding-x) var(--typo3-rte-fullscreen-padding-y);
                }

                &__editable {
                    .ck.ck-editor__editable:not(.ck-editor__nested-editable) {
                        background: var(--typo3-rte-base-bg);
                        box-shadow: var(--typo3-component-box-shadow);
                    }
                }
            }
        }
    }

    &.ck-powered-by {
        .ck-icon path {
            fill: var(--ck-powered-by-text-color);
        }
    }
}

typo3-rte-ckeditor-ckeditor5 {
    > textarea[slot="textarea"] {
        display: none !important;
    }

    /* Hide inactive styles, see https://forge.typo3.org/issues/99673 */
    .ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled {
        display: none;
    }

    /* Render as an inactive element if used with mode=useOrOverridePlaceholder */
    .t3js-formengine-placeholder-placeholder & {
        opacity: .5;

        .ck.ck-editor__top {
            display: none;
        }
    }
}
