acceptance install mariadb php 7.4 pre-merge:
  stage: main
  except:
    refs:
      - schedules
      - "11.5"
  artifacts:
    when: on_failure
    paths:
      - typo3temp/var/tests/AcceptanceReports
    reports:
      junit:
        - typo3temp/var/tests/AcceptanceReports/reports.xml
  script:
    - Build/Scripts/runTests.sh -s composerInstall -p 7.4
    - Build/Scripts/runTests.sh -s acceptanceInstall -d mariadb -i 10.3 -p 7.4
  # Always retry a failed job, so it has a chance to recover from a faulty machine or timing issue
  retry: 1

acceptance install mysql php 8.1 pre-merge:
  stage: main
  except:
    refs:
      - schedules
      - "11.5"
  artifacts:
    when: on_failure
    paths:
      - typo3temp/var/tests/AcceptanceReports
    reports:
      junit:
        - typo3temp/var/tests/AcceptanceReports/reports.xml
  script:
    - Build/Scripts/runTests.sh -s composerInstall -p 8.1
    - Build/Scripts/runTests.sh -s acceptanceInstall -d mysql -j 5.5 -p 8.1
  # Always retry a failed job, so it has a chance to recover from a faulty machine or timing issue
  retry: 1

acceptance install postgres php 7.4 pre-merge:
  stage: main
  except:
    refs:
      - schedules
      - "11.5"
  artifacts:
    when: on_failure
    paths:
      - typo3temp/var/tests/AcceptanceReports
    reports:
      junit:
        - typo3temp/var/tests/AcceptanceReports/reports.xml
  script:
    - Build/Scripts/runTests.sh -s composerInstall -p 7.4
    - Build/Scripts/runTests.sh -s acceptanceInstall -d postgres -k 10 -p 7.4
  # Always retry a failed job, so it has a chance to recover from a faulty machine or timing issue
  retry: 1

acceptance install sqlite php 8.1 pre-merge:
  stage: main
  except:
    refs:
      - schedules
      - "11.5"
  artifacts:
    when: on_failure
    paths:
      - typo3temp/var/tests/AcceptanceReports
    reports:
      junit:
        - typo3temp/var/tests/AcceptanceReports/reports.xml
  script:
    - Build/Scripts/runTests.sh -s composerInstall -p 8.1
    - Build/Scripts/runTests.sh -s acceptanceInstall -d sqlite -p 8.1
  # Always retry a failed job, so it has a chance to recover from a faulty machine or timing issue
  retry: 1
